{"version":3,"sources":["webpack:///./src/js/prototypes/items/Rectangle.js","webpack:///./src/js/prototypes/placeholder.js","webpack:///./src/js/prototypes/Project.js","webpack:///./src/js/prototypes/Canvas.js","webpack:///./src/js/prototypes/ModeStore.js","webpack:///./src/js/util/observeAnimatableTree.js","webpack:///./src/js/prototypes/ToolsStore.js","webpack:///./src/js/store.js","webpack:///./src/js/index.jsx","webpack:///./src/js/containers/App.jsx","webpack:///./src/js/components/Playbar.jsx","webpack:///./src/js/containers/Viewer.jsx","webpack:///./src/js/prototypes/items/Circle.js","webpack:///./src/js/components/GridItem.jsx","webpack:///./src/js/prototypes/Handle.js","webpack:///./src/js/prototypes/Animation.js","webpack:///./src/js/components/Grid.jsx","webpack:///./src/css/index.js","webpack:///./src/js/containers/ToolController.jsx","webpack:///./src/js/components/IntegerInput.jsx","webpack:///./src/js/components/Modal.jsx","webpack:///./src/js/containers/PropertyEditor.jsx","webpack:///./src/js/containers/ProjectSettings.jsx","webpack:///./src/js/containers/BuildMode.jsx","webpack:///./src/js/components/Canvas.jsx","webpack:///./src/js/containers/ExportMode.jsx","webpack:///./src/css/bare.min.css","webpack:///./src/js/util/bezierCurve.js","webpack:///./src/js/prototypes/Keyframe.js","webpack:///./src/js/prototypes/AnimatableItem.js","webpack:///./src/js/containers/ModeController.jsx","webpack:///./src/js/prototypes/HandleEditor.js","webpack:///./src/js/containers/HandleEditor.jsx","webpack:///./src/js/containers/KeyframeEditor.jsx","webpack:///./src/js/containers/AnimateMode.jsx","webpack:///./src/js/containers/PlayController.jsx","webpack:///./src/js/components/withWindowSize.jsx","webpack:///./src/js/containers/ViewMode.jsx","webpack:///./node_modules/file-loader/dist/cjs.js"],"names":["Rectangle","AnimatableItem","itemProps","this","position","x","y","absX","absolute","absY","absWidth","width","absHeight","height","paper","Path","point","size","radius","Math","max","_width","value","recreate","_height","_radius","observable","WIDTH","HEIGHT","RADIUS","i","setLength","animation","setRange","setIn","setOut","addItems","canvas","circle","Circle","key","addKey","add","rect","Project","rootStore","clear","project","remove","setSize","undefined","Animation","FIRST","frames","setName","name","action","Canvas","attatchTo","id","element","document","getElementById","setup","addListenersAndSelect","animatable","item","on","handleItemMouseDown","select","event","stopPropagation","currentTarget","handleViewMouseDown","deselect","forEachAnimatable","callback","Object","values","animatables","forEach","build","create","draw","frame","frameToDraw","now","console","log","view","update","selectOn","selectOff","off","setSizeAction","setTimeout","autoUpdate","background","topLeft","bottomRight","fillColor","color","firstFrame","_color","t","tool","clone","nextTool","entering","toolId","prevTool","exiting","mode","settings","selected","Mode","m","current","observeAnimatableTree","observableObj","constructor","OBSERVABLES","map","keys","keyframes","keyFrType","Tools","keyframe","selectedKeyframe","RootStore","ModeStore","tools","ToolsStore","reaction","store","appNode","ReactDOM","render","App","observer","Component","props","set","setTool","minHeight","gridTemplateRows","hot","module","Playbar","fullWidth","totalFrames","inPoint","outPoint","ABSOLUTE_FIRST","playbarWidth","per","marker","head","parseInt","tail","activeHead","activeTail","style","display","playbarStyle","backgroundColor","marginTop","margin","Viewer","canvasHasSize","init","Fragment","hasSize","lastFrame","center","GridItem","children","Handle","type","influence","distance","_influence","_distance","MAX","newX","newY","nextFrame","later","prevFrame","earlier","length","f","goToFrame","playing","animateAtRate","pause","requestId","cancelAnimationFrame","func","interval","fps","then","Date","loop","requestAnimationFrame","delta","sync","round","Grid","cssContext","require","ToolController","choose","preventDefault","addCircle","existing","addRectangle","padding","onClick","primary","transform","IntegerInput","state","localValue","onChange","setState","target","onBlur","property","possibleInt","result","Number","isInteger","handleKeyDown","shiftKey","incrementBy","decrementBy","changeBy","operation","amount","next","a","b","marginRight","textAlign","onKeyDown","Modal","open","handleClose","clickawayEl","useRef","container","contains","ref","body","content","PropertyEditor","itemClass","classControls","zIndex","left","top","overflow","border","ProjectSettings","setColor","closeModal","step","flexDirection","BuildMode","ready","placeholder","clientWidth","gridTemplateColumns","gridArea","alignSelf","testForAvailability","prevProps","ExportMode","alignItems","justifyItems","exports","makeRoot","real","imag","evaluate","A","B","C","D","q0","B1","C2","Q","dQ","bezierCurve","x2","x3","y2","y3","Error","roots","X","b1","c2","evalInfo","q","dq","r","abs","s","sign","sqrt","x0","den","EPSILON","push","quadInfo","X1","Y1","X2","Y2","concat","getCubicRoots","xA","xB","xC","filter","toFixed","is","yA","yB","yC","c","d","Keyframe","handleIn","handleOut","sort","createCurve","k1","k2","interpolate","curve","timeRatio","valueRatio","dimension","fraction","valueForFrame","includes","indexOf","where","before","after","hue","floor","random","saturation","brightness","scale","rotate","rotation","k","updateKeyframes","setCanvas","sharedProps","onCreate","setUntrackedValues","entries","xKeyframes","yKeyframes","xValue","yValue","activeLayer","_x","_y","_scale","scaleBy","_rotation","rotateBy","_fillColor","Y","SCALE","ROTATION","FILL_COLOR","ModeController","navigate","textContent","toUpperCase","borderBottom","HandleEditor","trueWidth","keyframeBefore","keyframeAfter","handleBefore","absoluteHandlePosition","handleAfter","PaperScope","topRight","bottomLeft","spacing","STEP","gridline","SymbolDefinition","Line","from","to","strokeColor","strokeWidth","offset","place","Point","setVisualCurveHandles","stringStyle","handleBeforeString","handleAfterString","handleMovable","Color","handleStationary","onMouseEnter","cursor","onMouseLeave","onMouseDrag","travelled","subtract","newPosition","lastSegment","onMouseUp","firstSegment","handlePosition","handleEditor","handleEditorHasSize","buildHandleEditorCanvas","HandleEditorInstance","React","keyframeKey","destroy","KeyframeEditor","previouslyClickedKeyframe","keyframeEditorHasSize","buildKeyframeEditorCanvas","handleKeyframeClick","onSelect","shadowColor","alpha","timelineMath","verticalSpacing","timelineStart","timelineEnd","timelineStep","buildPlayhead","index","prop","list","placing","PointText","fontSize","keyframeIndex","shadowBlur","RegularPolygon","sides","timelineWidth","AnimateMode","heWidth","keSize","container2","clientHeight","smallestLength","min","container3","split","kItem","kProp","kIndexStr","kIndex","keyframesOfType","selectKeyframe","PlayController","play","goToNext","goToPrev","goToFirst","goToLast","addEventListener","removeEventListener","borderTop","gridColumnStart","ViewMode","window","innerWidth","documentElement","webpackContext","req","webpackContextResolve","__webpack_require__","o","e","code","resolve"],"mappings":"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","file":"app.aaeb609b.js","sourcesContent":["import { observable } from 'mobx'\nimport paper from 'paper'\n\nimport AnimatableItem from '../AnimatableItem'\n\nclass Rectangle extends AnimatableItem {\n  // Canvas Size Relative Values (0-100)\n  static get WIDTH() { return 10 }\n  static get HEIGHT() { return 10 }\n  static get RADIUS() { return 0 }\n\n  @observable _width = Rectangle.WIDTH\n  @observable _height = Rectangle.HEIGHT\n  @observable _radius = Rectangle.RADIUS\n\n  get width() { return this._width }\n  get height() { return this._height }\n  get radius() { return this._radius }\n\n  set width(value) {\n    // TODO: update this value using item.bounds and scale\n    this._width = value\n    this.recreate()\n  }\n\n  set height(value) {\n    // TODO: update this value using item.bounds and scale\n    this._height = value\n    this.recreate()\n  }\n\n  set radius(value) {\n    // TODO: update this value using item.bounds and scale\n    this._radius = value\n    this.recreate()\n  }\n\n  onCreate(itemProps) {\n    const { x, y } = this.position\n    const absX = this.absolute(x)\n    const absY = this.absolute(y, 'height')\n    const absWidth = this.absolute(this.width)\n    const absHeight = this.absolute(this.height)\n\n    new paper.Path.Rectangle({\n      ...itemProps,\n      point: [absX - (absWidth / 2), absY - (absHeight / 2)],\n      size: [absWidth, absHeight],\n      radius: (this.radius / 100) * (Math.max(absWidth, absHeight) / 2),\n    })\n  }\n}\n\nexport default Rectangle\n","import Circle from './items/Circle'\nimport Rectangle from './items/Rectangle'\n\nconst setLength = (animation) => {\n  animation.setLength(200)\n}\n\nconst setRange = (animation) => {\n  animation.setIn(60)\n  animation.setOut(140)\n}\n\nconst addItems = (canvas) => {\n  const circle = new Circle({ key: 'circle1' })\n  circle.addKey('x', 60, 25)\n  circle.addKey('y', 60, 25)\n  circle.addKey('x', 90, 75)\n  circle.addKey('y', 90, 50)\n  circle.addKey('scale', 60, 100)\n  circle.addKey('scale', 90, 250)\n  circle.addKey('scale', 100, 250)\n  circle.addKey('scale', 130, 100)\n  canvas.add(circle)\n\n  const rect = new Rectangle({ key: 'rect1' })\n\n  rect.addKey('rotation', 80, 0)\n  rect.addKey('rotation', 140, 360)\n  rect.addKey('scale', 80, 0.001)\n  rect.addKey('scale', 140, 100)\n  canvas.add(rect)\n  rect.width = 20\n  rect.height = 10\n}\n\nexport default {\n  setLength,\n  setRange,\n  addItems,\n}\n","import { observable, action } from 'mobx'\nimport paper from 'paper'\n\nimport Animation from './Animation'\n\nclass Project {\n  constructor(rootStore) {\n    // FIXME: remove reference to rootStore\n    this.rootStore = rootStore\n    this.setName('My Animation')\n  }\n\n  @observable name = ''\n\n  @action setName(name) {\n    this.name = name\n  }\n\n  clear = () => {\n    paper.project.clear()\n    paper.project.remove()\n\n    const { canvas, animation } = this.rootStore\n    canvas.setSize(undefined, undefined)\n    animation.setIn(Animation.FIRST)\n    animation.setOut(animation.frames)\n  }\n\n  // load() {\n  //   // load project file\n  // }\n\n  // save() {\n  //   // save project file\n  // }\n\n  // render() {\n  //   // render canvas animation to frames\n  // }\n}\n\nexport default Project\n","import { observable, action } from 'mobx'\nimport paper from 'paper'\n\nclass Canvas {\n  constructor(rootStore) {\n    this.rootStore = rootStore\n  }\n\n  @observable width\n  @observable height\n  @observable _color = '#000000'\n  @observable background\n  @observable animatables = {}\n  @observable tool\n  @observable selected\n\n  setSize(width, height) {\n    // allows the canvas element one tick to recognize size changes\n    const setSizeAction = action(() => {\n      this.height = height\n      this.width = width\n    })\n    setTimeout(setSizeAction, 1)\n  }\n\n  attatchTo = (id) => {\n    const element = document.getElementById(id)\n    paper.setup(element)\n  }\n\n  init() {\n    paper.view.autoUpdate = false\n    this.background = new paper.Path.Rectangle({\n      topLeft: [0, 0],\n      bottomRight: [paper.view.element.width, paper.view.element.height],\n      fillColor: this.color,\n    })\n    this.draw(this.rootStore.animation.firstFrame)\n  }\n\n  get color() { return this._color }\n  set color(value) {\n    this._color = value\n    this.background.fillColor = value\n  }\n\n  @action add = (animatable) => {\n    animatable.create(this)\n    this.animatables = {\n      ...this.animatables,\n      [animatable.key]: animatable,\n    }\n\n    if (this.tool === 'SELECT') {\n      this.addListenersAndSelect(animatable)\n    }\n\n    this.draw()\n  }\n\n  @action remove = (animatable) => {\n    animatable.item.off('mousedown', this.handleItemMouseDown)\n    animatable.item.remove()\n\n    const clone = { ...this.animatables }\n    delete clone[animatable.key]\n    this.animatables = clone\n    this.draw()\n  }\n\n  @action setTool = (nextTool) => {\n    const prevTool = this.tool\n\n    const entering = toolId => (prevTool !== toolId && nextTool === toolId)\n    const exiting = toolId => (prevTool === toolId && nextTool !== toolId)\n\n    if (entering('SELECT')) { this.selectOn() }\n    if (exiting('SELECT')) { this.selectOff() }\n\n    if (entering('SETTINGS')) { this.rootStore.mode.settings = true }\n    if (exiting('SETTINGS')) { this.rootStore.mode.settings = false }\n\n    // Finally, set the tool in-memory\n    this.tool = nextTool\n  }\n\n  @action select = (item) => {\n    this.deselect()\n    item.selected = true // eslint-disable-line no-param-reassign\n    this.selected = this.animatables[item.name]\n    paper.view.update()\n  }\n\n  @action deselect = () => {\n    if (this.selected) {\n      this.selected.item.selected = false\n      this.selected = undefined\n    }\n    paper.view.update()\n  }\n\n  addListenersAndSelect = (animatable) => {\n    animatable.item.on('mousedown', this.handleItemMouseDown)\n    this.select(animatable.item)\n  }\n\n  handleItemMouseDown = (event) => {\n    event.stopPropagation()\n    this.select(event.currentTarget)\n  }\n\n  handleViewMouseDown = (event) => {\n    event.stopPropagation()\n    this.deselect()\n  }\n\n  forEachAnimatable = callback => (\n    Object.values(this.animatables).forEach(callback)\n  )\n\n  build = () => {\n    this.forEachAnimatable((animatable) => { animatable.create(this) })\n    this.draw()\n  }\n\n  draw = (frame) => {\n    const frameToDraw = frame || this.rootStore.animation.now\n    console.log('drawing frame', frameToDraw)\n    this.forEachAnimatable((animatable) => { animatable.draw(frameToDraw) })\n    if (paper.view) paper.view.update()\n  }\n\n  selectOn = () => {\n    this.forEachAnimatable((animatable) => {\n      animatable.item.on('mousedown', this.handleItemMouseDown)\n    })\n    paper.view.on('mousedown', this.handleViewMouseDown)\n  }\n\n  selectOff = () => {\n    this.forEachAnimatable((animatable) => {\n      animatable.item.off('mousedown', this.handleItemMouseDown)\n    })\n    paper.view.off('mousedown', this.handleViewMouseDown)\n    this.deselect()\n  }\n}\n\nexport default Canvas\n","import { observable, action } from 'mobx'\n\nclass Mode {\n  @observable current = null\n  @observable settings = false\n\n  @action set = (m) => {\n    this.current = m\n  }\n}\n\nexport default Mode\n","const observeAnimatableTree = (observableObj) => {\n  const observableKeys = observableObj.constructor.OBSERVABLES\n  return observableKeys.map((key) => {\n    if (key === 'keyframes') {\n      return Object.keys(observableObj.keyframes).map(keyFrType => (\n        observableObj.keyframes[keyFrType].map(observeAnimatableTree)\n      ))\n    }\n\n    const value = observableObj[key]\n    if (value.constructor.OBSERVABLES) {\n      return observeAnimatableTree(value)\n    }\n\n    return value\n  })\n}\n\nexport default observeAnimatableTree\n","import { observable, action } from 'mobx'\n\nclass Tools {\n  @observable selectedKeyframe\n\n  @action selectKeyframe = (keyframe) => {\n    this.selectedKeyframe = keyframe\n  }\n}\n\nexport default Tools\n","import { observable, reaction } from 'mobx'\n\nimport Project from './prototypes/Project'\nimport Canvas from './prototypes/Canvas'\nimport Animation from './prototypes/Animation'\nimport ModeStore from './prototypes/ModeStore'\nimport ToolsStore from './prototypes/ToolsStore'\n\nimport observeAnimatableTree from './util/observeAnimatableTree'\n\nclass RootStore {\n  @observable project\n  @observable canvas\n  @observable animation\n  @observable mode\n  @observable tools\n\n  constructor() {\n    this.project = new Project(this)\n    this.canvas = new Canvas(this)\n    this.animation = new Animation()\n    this.mode = new ModeStore()\n    this.tools = new ToolsStore()\n\n    // Reacts to all changes made to animatable item properties and redraws the canvas\n    reaction(\n      () => ([\n        this.animation.now,\n        this.canvas.color,\n        Object.values(this.canvas.animatables).map(observeAnimatableTree),\n      ]),\n      () => this.canvas.draw()\n    )\n  }\n}\n\nexport default RootStore\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\n// Root Application Container\nimport App from './containers/App'\nimport RootStore from './store'\n\n// Styles\nimport '../css'\n\nconst store = new RootStore()\nconst appNode = document.getElementById('app')\n\nReactDOM.render(\n  <App store={store} />,\n  appNode\n)\n","import React, { Component } from 'react'\nimport { hot } from 'react-hot-loader'\nimport { observer } from 'mobx-react'\n\nimport ModeController from './ModeController'\nimport BuildMode from './BuildMode'\nimport AnimateMode from './AnimateMode'\nimport ViewMode from './ViewMode'\nimport ExportMode from './ExportMode'\nimport Grid from '../components/Grid'\n\n@observer\nclass App extends Component {\n  componentDidMount() {\n    const { store } = this.props\n    store.mode.set('BUILD')\n    // setTimeout(() => { store.mode.set('ANIMATE') }, 100)\n    store.canvas.setTool('SETTINGS')\n  }\n\n  render() {\n    const { store } = this.props\n    return (\n      <Grid\n        minHeight=\"100vh\"\n        gridTemplateRows=\"60px 1fr\"\n      >\n        <ModeController mode={store.mode} />\n        {store.mode.current === 'BUILD' &&\n          <BuildMode store={store} />\n        }\n        {store.mode.current === 'ANIMATE' &&\n          <AnimateMode store={store} />\n        }\n        {store.mode.current === 'VIEW' &&\n          <ViewMode store={store} />\n        }\n        {store.mode.current === 'EXPORT' &&\n          <ExportMode store={store} />\n        }\n      </Grid>\n    )\n  }\n}\n\nexport default hot(module)(App)\n","import React from 'react'\n\nconst playbarStyle = { height: '10px', margin: '10px 0px' }\n\nconst Playbar = ({\n  fullWidth,\n  totalFrames,\n  inPoint,\n  outPoint,\n  now,\n  ABSOLUTE_FIRST,\n}) => {\n  const playbarWidth = fullWidth || 0\n\n  const per = playbarWidth / totalFrames\n  const marker = totalFrames > 1 ? per : 0\n  const head = parseInt((inPoint - ABSOLUTE_FIRST) * per)\n  const tail = parseInt((totalFrames - outPoint) * per)\n\n  let activeHead = parseInt((now * per) - head)\n  if (totalFrames === 1) {\n    activeHead = per\n  } else if (now === inPoint) {\n    activeHead = 0\n  } else if (now === outPoint) {\n    activeHead = playbarWidth - head - tail - marker\n  }\n  const activeTail = now === outPoint ? 0 : playbarWidth - head - tail - activeHead - marker\n\n  return (\n    <div style={{ display: 'flex' }}>\n      <div style={{\n        ...playbarStyle,\n        width: head,\n        backgroundColor: 'rgb(150, 160, 170)' }}\n      />\n      <div style={{\n        ...playbarStyle,\n        width: activeHead,\n        backgroundColor: 'rgb(220, 225, 240)' }}\n      />\n      <div style={{\n        ...playbarStyle,\n        width: marker,\n        height: '20px',\n        marginTop: '5px',\n        backgroundColor: 'rgb(30, 155, 255)' }}\n      />\n      <div style={{\n        ...playbarStyle,\n        width: activeTail,\n        backgroundColor: 'rgb(220, 225, 240)' }}\n      />\n      <div style={{\n        ...playbarStyle,\n        width: tail,\n        backgroundColor: 'rgb(150, 160, 170)' }}\n      />\n    </div>\n  )\n}\n\nexport default Playbar\n","import React, { Component } from 'react'\nimport { observer } from 'mobx-react'\n\nimport Animation from '../prototypes/Animation'\nimport Canvas from '../components/Canvas'\nimport Playbar from '../components/Playbar'\n\n@observer\nclass Viewer extends Component {\n  canvasHasSize = () => {\n    const { canvas, setup } = this.props\n    canvas.attatchTo('paper-canvas')\n    canvas.init()\n    setup()\n  }\n\n  render() {\n    const { canvas, animation } = this.props\n    return (\n      <React.Fragment>\n        <Canvas\n          id=\"paper-canvas\"\n          width={canvas.width}\n          height={canvas.height}\n          hasSize={this.canvasHasSize}\n        />\n        <Playbar\n          fullWidth={canvas.width}\n          totalFrames={animation.frames}\n          inPoint={animation.firstFrame}\n          outPoint={animation.lastFrame}\n          now={animation.now}\n          ABSOLUTE_FIRST={Animation.FIRST}\n        />\n      </React.Fragment>\n    )\n  }\n}\n\nexport default Viewer\n","import { observable } from 'mobx'\nimport paper from 'paper'\n\nimport AnimatableItem from '../AnimatableItem'\n\nclass Circle extends AnimatableItem {\n  // Canvas Size Relative Values (0-100)\n  static get RADIUS() { return 10 }\n\n  @observable _radius = Circle.RADIUS\n\n  get radius() { return this._radius }\n  set radius(value) {\n    // TODO: update this value using item.bounds and scale\n    this._radius = value\n    this.recreate()\n  }\n\n  onCreate(itemProps) {\n    const { x, y } = this.position\n    new paper.Path.Circle({\n      ...itemProps,\n      center: [this.absolute(x), this.absolute(y, 'height')],\n      radius: this.absolute(this.radius) / 2,\n    })\n  }\n}\n\nexport default Circle\n","import React from 'react'\n\nconst GridItem = ({ id, children, ...style }) => (\n  <div id={id} style={style}>\n    {children}\n  </div>\n)\n\nexport default GridItem\n","import { observable } from 'mobx'\n\nclass Handle {\n  static get MAX() { return 100 }\n  static get STEP() { return 10 }\n  static get OBSERVABLES() {\n    return ['influence', 'distance']\n  }\n\n  @observable _influence\n  @observable _distance\n\n  constructor(type) {\n    this.type = type\n    this.influence = 50\n    this.distance = 0\n  }\n\n  get influence() { return this._influence }\n  get distance() { return this._distance }\n  get position() {\n    let x = this.influence\n    let y = this.distance\n    if (this.type === 'IN') {\n      x = Handle.MAX - this.influence\n      y = Handle.MAX - this.distance\n    }\n    x /= Handle.MAX\n    y /= Handle.MAX\n    return { x, y }\n  }\n\n  set influence(value) {\n    this._influence = value\n  }\n\n  set distance(value) {\n    this._distance = value\n  }\n\n  set position({ x, y }) {\n    const newX = x * Handle.MAX\n    const newY = x * Handle.MAX\n    if (this.type === 'IN') {\n      this.influence = Handle.MAX - newX\n      this.distance = Handle.MAX - newY\n    } else {\n      this.influence = newX\n      this.distance = newY\n    }\n  }\n}\n\nexport default Handle\n","import { observable, action } from 'mobx'\n\nclass Animation {\n  static get FIRST() { return 1 }\n  static get PLAYBACK_MODES() { return ['LOOP', 'ONCE'] }\n\n  constructor() {\n    this.setLength(100)\n  }\n\n  @observable frames = 1\n  @observable firstFrame = Animation.FIRST\n  @observable lastFrame = 1\n  @observable fps = 30\n  @observable now = this.firstFrame\n  @observable playing = false\n  @observable sync = 0\n  @observable requestId = null\n  @observable mode = 'LOOP'\n\n  @action setLength(length) {\n    this.frames = length\n    if (length < this.lastFrame) {\n      this.lastFrame = length\n    }\n  }\n\n  @action setIn = (f) => {\n    if (f < Animation.FIRST || f > this.frames) return\n    this.firstFrame = f\n    if (this.now < f) {\n      this.goToFrame(f)\n    }\n  }\n\n  @action setOut = (f) => {\n    if (f < Animation.FIRST || f > this.frames) return\n    this.lastFrame = f\n    if (this.now > f) {\n      this.goToFrame(f)\n    }\n  }\n\n  nextFrame = () => {\n    const later = this.now + 1\n    if (later > this.lastFrame) {\n      if (this.mode === 'LOOP') return this.firstFrame\n      return null\n    }\n    return later\n  }\n\n  prevFrame = () => {\n    const earlier = this.now - 1\n    if (earlier < this.firstFrame) {\n      if (this.mode === 'LOOP') return this.lastFrame\n      return null\n    }\n    return earlier\n  }\n\n  @action play = () => {\n    if (this.nextFrame() === null) return\n    this.playing = true\n    this.animateAtRate(() => {\n      const nextFrame = this.nextFrame()\n      if (nextFrame === null) return this.pause()\n      this.now = nextFrame\n    })\n  }\n\n  @action pause = () => {\n    this.playing = false\n    if (this.requestId) cancelAnimationFrame(this.requestId)\n  }\n\n  @action goToFrame = (frame) => {\n    this.now = frame\n  }\n\n  @action goToFirst = () => {\n    this.goToFrame(this.firstFrame)\n  }\n\n  @action goToLast = () => {\n    this.goToFrame(this.lastFrame)\n  }\n\n  @action goToNext = () => {\n    const nextFrame = this.nextFrame()\n    if (nextFrame === null) return\n    this.goToFrame(nextFrame)\n  }\n\n  @action goToPrev = () => {\n    const prevFrame = this.prevFrame()\n    if (prevFrame === null) return\n    this.goToFrame(prevFrame)\n  }\n\n  @action animateAtRate = (func) => {\n    const interval = 1000 / this.fps\n    let then = Date.now()\n\n    const loop = () => {\n      if (this.playing === false) return\n      this.requestId = requestAnimationFrame(loop)\n      const now = Date.now()\n      const delta = now - then\n      if (delta >= interval) {\n        then = now - (delta % interval)\n        this.sync = Math.round(delta - interval - (delta % interval))\n        func()\n      }\n    }\n    loop()\n  }\n}\n\nexport default Animation\n","import React from 'react'\n\nconst Grid = ({ children, ...style }) => (\n  <div style={{ display: 'grid', ...style }}>\n    {children}\n  </div>\n)\n\nexport default Grid\n","const cssContext = require.context(\n  '!!file-loader?name=[name].[ext]!.',\n  true,\n  /\\.(css)$/\n)\n\ncssContext.keys().forEach(cssContext)\n","import React, { Component } from 'react'\nimport { observer } from 'mobx-react'\n\nimport Circle from '../prototypes/items/Circle'\nimport Rectangle from '../prototypes/items/Rectangle'\n\n@observer\nclass ToolController extends Component {\n  choose = (event) => {\n    event.preventDefault()\n    this.props.setTool(event.currentTarget.id)\n  }\n\n  addCircle = () => {\n    const { existing } = this.props\n    const circle = new Circle({\n      key: `circle-${Object.keys(existing).length}`,\n    })\n    this.props.add(circle)\n  }\n\n  addRectangle = () => {\n    const { existing } = this.props\n    const rect = new Rectangle({\n      key: `rect-${Object.keys(existing).length}`,\n    })\n    this.props.add(rect)\n  }\n\n  render() {\n    const { tool } = this.props\n\n    return (\n      <div style={{ display: 'flex', padding: '10px 10px 0px 10px' }}>\n        <button\n          type=\"button\"\n          id=\"SETTINGS\"\n          onClick={this.choose}\n          {...(tool === 'SETTINGS' ? { primary: 'true' } : {})}\n        >\n          <div>*</div>\n        </button>\n        <button\n          type=\"button\"\n          id=\"SELECT\"\n          onClick={this.choose}\n          {...(tool === 'SELECT' ? { primary: 'true' } : {})}\n        >\n          <div style={{ transform: 'rotate(-135deg)' }}>&#10148;</div>\n        </button>\n        {/* <button\n          type=\"button\"\n          id=\"DRAW\"\n          onClick={this.choose}\n          {...(tool === 'DRAW' ? { primary: 'true' } : {})}\n        >\n          \n        </button> */}\n\n        <button type=\"button\" onClick={this.addCircle}>+ Circle</button>\n        <button type=\"button\" onClick={this.addRectangle}>+ Rectangle</button>\n      </div>\n    )\n  }\n}\n\nexport default ToolController\n","/* eslint react/sort-comp: 0 */\n\nimport React, { Component } from 'react'\nimport { observer } from 'mobx-react'\n\n@observer\nclass IntegerInput extends Component {\n  state = {\n    localValue: 0,\n  }\n\n  componentDidMount() {\n    const { item, property } = this.props\n    if (item[property] !== this.state.localValue) {\n      this.setState({ localValue: item[property] })\n    }\n  }\n\n  onChange = (event) => {\n    this.setState({ localValue: event.target.value })\n  }\n\n  onBlur = () => {\n    const { item, property } = this.props\n    const { localValue } = this.state\n\n    const possibleInt = parseInt(localValue)\n    let result = item[property]\n    if (Number.isInteger(possibleInt)) {\n      result = possibleInt\n    }\n\n    item[property] = result\n    this.setState({ localValue: result })\n  }\n\n  handleKeyDown = (event) => {\n    const { key, shiftKey } = event\n    if (key === 'ArrowUp' && shiftKey) {\n      this.incrementBy(10)\n    } else if (key === 'ArrowUp') {\n      this.incrementBy(1)\n    } else if (key === 'ArrowDown' && shiftKey) {\n      this.decrementBy(10)\n    } else if (key === 'ArrowDown') {\n      this.decrementBy(1)\n    }\n  }\n\n  changeBy = operation => (amount) => {\n    const { item, property } = this.props\n    const current = item[property]\n    const next = operation(current, amount)\n    item[property] = next\n    this.setState({ localValue: next })\n  }\n\n  incrementBy = this.changeBy((a, b) => a + b)\n  decrementBy = this.changeBy((a, b) => a - b)\n\n  render() {\n    const { localValue } = this.state\n    return (\n      <input\n        type=\"text\"\n        style={{ width: '60px', marginRight: '20px', textAlign: 'center' }}\n        value={localValue}\n        onChange={this.onChange}\n        onKeyDown={this.handleKeyDown}\n        onBlur={this.onBlur}\n      />\n    )\n  }\n}\n\nexport default IntegerInput\n","import React, { useRef } from 'react'\n\nconst style = {\n  container: {\n    position: 'fixed',\n    zIndex: 100,\n    left: 0,\n    top: 0,\n    width: '100%',\n    height: '100%',\n    overflow: 'auto',\n    backgroundColor: 'rgba(0, 0, 0, 0.4)',\n  },\n  body: {\n    backgroundColor: '#fefefe',\n    margin: '15% auto',\n    border: '1px solid #888',\n    width: '80%',\n  },\n  content: {\n    padding: '16px',\n  },\n}\n\nconst Modal = ({ children, open, handleClose }) => {\n  const clickawayEl = useRef(null)\n\n  const onClickaway = (event) => {\n    if (clickawayEl.current.contains(event.target)) return\n    handleClose()\n  }\n\n  return (\n    open === false ? null : (\n      <div style={style.container} onClick={onClickaway}>\n        <div ref={clickawayEl} style={style.body}>\n          <div style={style.content}>{children}</div>\n        </div>\n      </div>\n    )\n  )\n}\n\nexport default Modal\n","// encapsulates ValueEditor, implements editing the paper properties of an AnimatibleItem\n\nimport React, { Component } from 'react'\nimport { observer } from 'mobx-react'\n\nimport IntegerInput from '../components/IntegerInput'\n\n@observer\nclass PropertyEditor extends Component {\n  classControls() {\n    const { item } = this.props\n    const itemClass = item.constructor.name\n\n    if (itemClass === 'Circle') {\n      return (\n        <React.Fragment>\n          <label>Radius</label>\n          <div style={{ display: 'flex' }}>\n            <IntegerInput item={item} property=\"radius\" />\n          </div>\n        </React.Fragment>\n      )\n    }\n\n    if (itemClass === 'Rectangle') {\n      return (\n        <React.Fragment>\n          <label>Size</label>\n          <div style={{ display: 'flex' }}>\n            <IntegerInput item={item} property=\"width\" />\n            <IntegerInput item={item} property=\"height\" />\n          </div>\n        </React.Fragment>\n      )\n    }\n  }\n\n  render() {\n    const { item } = this.props\n\n    if (item === undefined) {\n      return (\n        <h3 style={{ padding: '10px', color: 'darkgray' }}>\n          Select an Item on the Canvas.\n        </h3>\n      )\n    }\n\n    return (\n      <div style={{ padding: '10px' }}>\n        <h4>{item.key}</h4>\n        <label>Position</label>\n        <div style={{ display: 'flex' }}>\n          <IntegerInput item={item} property=\"x\" />\n          <IntegerInput item={item} property=\"y\" />\n        </div>\n\n        <label>Scale</label>\n        <div style={{ display: 'flex' }}>\n          <IntegerInput item={item} property=\"scale\" />\n        </div>\n\n        <label>Rotation</label>\n        <div style={{ display: 'flex' }}>\n          <IntegerInput item={item} property=\"rotation\" />\n        </div>\n\n        {this.classControls()}\n      </div>\n    )\n  }\n}\n\nexport default PropertyEditor\n","import React, { Component } from 'react'\nimport { observer } from 'mobx-react'\n\nimport Modal from '../components/Modal'\n\n@observer\nclass ProjectSettings extends Component {\n  setName = (event) => {\n    const { store } = this.props\n    store.project.setName(event.target.value)\n  }\n\n  setLength = (event) => {\n    const { store } = this.props\n    const length = parseInt(event.target.value)\n    store.animation.setLength(length)\n  }\n\n  setColor = (event) => {\n    const { store } = this.props\n    store.canvas.color = event.target.value\n  }\n\n  closeModal = () => this.props.store.canvas.setTool('SELECT')\n\n  render() {\n    const { store } = this.props\n\n    return (\n      <Modal open={store.mode.settings} handleClose={this.closeModal}>\n        <h3>Project Settings</h3>\n\n        <label>Project Name</label>\n        <input type=\"text\" value={store.project.name} onChange={this.setName} />\n\n        <label>Animation Length</label>\n        <input type=\"number\" step=\"1\" value={store.animation.frames} onChange={this.setLength} />\n\n        <label>Canvas Background</label>\n        <select value={store.canvas.color} onChange={this.setColor}>\n          <option value=\"#000000\">Black</option>\n          <option value=\"#ffffff\">White</option>\n        </select>\n\n        <div style={{ display: 'flex', flexDirection: 'row-reverse' }}>\n          <button type=\"button\" onClick={this.closeModal}>Close</button>\n        </div>\n      </Modal>\n    )\n  }\n}\n\nexport default ProjectSettings\n","import React, { Component } from 'react'\nimport { observer } from 'mobx-react'\n\nimport Viewer from './Viewer'\nimport ToolController from './ToolController'\nimport PropertyEditor from './PropertyEditor'\nimport ProjectSettings from './ProjectSettings'\nimport Grid from '../components/Grid'\nimport GridItem from '../components/GridItem'\n\nimport placeholder from '../prototypes/placeholder'\n\n@observer\nclass BuildMode extends Component {\n  state = {\n    ready: false,\n  }\n\n  componentDidMount() {\n    const { canvas } = this.props.store\n    const container = document.getElementById('build-container')\n    setTimeout(() => {\n      const width = Math.round(container.clientWidth) - 20\n      const height = Math.round((9 / 16) * width)\n      canvas.setSize(width, height)\n    }, 1)\n\n    if (canvas.tool === 'SELECT') {\n      setTimeout(() => {\n        canvas.setTool(undefined)\n        canvas.setTool('SELECT')\n      }, 20)\n    }\n  }\n\n  componentWillUnmount() {\n    const { project, canvas } = this.props.store\n    canvas.selectOff()\n    project.clear()\n  }\n\n  setup = () => {\n    this.setState({ ready: true })\n    const { canvas } = this.props.store\n    canvas.build()\n\n    placeholder.setLength(this.props.store.animation)\n    placeholder.setRange(this.props.store.animation)\n    if (Object.keys(canvas.animatables).length === 0) {\n      placeholder.addItems(canvas)\n    }\n  }\n\n  add = (item) => {\n    const { canvas } = this.props.store\n    canvas.add(item)\n  }\n\n  render() {\n    const { canvas, animation } = this.props.store\n    const { ready } = this.state\n    return (\n      <React.Fragment>\n        <ProjectSettings store={this.props.store} />\n        <Grid\n          gridTemplateRows=\"auto 60px\"\n          gridTemplateColumns=\"auto 340px\"\n        >\n          <GridItem gridArea=\"1 / 1 / 1 / 2\" id=\"build-container\" padding=\"10px\" alignSelf=\"center\">\n            <Viewer canvas={canvas} animation={animation} setup={this.setup} />\n          </GridItem>\n          <GridItem gridArea=\"1 / 2 / 1 / 3\" backgroundColor=\"rgb(210, 210, 210)\">\n            { canvas && (\n              <PropertyEditor item={canvas.selected} />\n            )}\n          </GridItem>\n          <GridItem gridArea=\"2 / 1 / 2 / 3\" backgroundColor=\"rgb(180, 180, 180)\">\n            { ready && (\n              <ToolController\n                existing={canvas.animatables}\n                add={this.add}\n                tool={canvas.tool}\n                setTool={canvas.setTool}\n              />\n            )}\n          </GridItem>\n        </Grid>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default BuildMode\n","import React, { Component } from 'react'\nimport { observer } from 'mobx-react'\n\n@observer\nclass Canvas extends Component {\n  componentDidMount() {\n    this.testForAvailability()\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.width === undefined) {\n      this.testForAvailability()\n    }\n  }\n\n  testForAvailability() {\n    const { width, hasSize } = this.props\n    if (width !== undefined) {\n      hasSize()\n    }\n  }\n\n  render() {\n    const { id, width, height } = this.props\n    if (width === undefined) return null\n    return (\n      <canvas\n        style={{ display: 'block' }}\n        id={id}\n        width={width}\n        height={height}\n      />\n    )\n  }\n}\n\nexport default Canvas\n","/* encapsulates Mode, implements:\n\n  | Viewer     | ExportEditor   |\n  |            |                |\n   ------------|                |\n  | Format     |                |\n  | Controller |                |\n\n*/\n\nimport React, { Component } from 'react'\n\nimport Grid from '../components/Grid'\nimport GridItem from '../components/GridItem'\n\nclass ExportMode extends Component {\n  render() {\n    return (\n      <Grid\n        gridTemplateRows=\"auto\"\n        gridTemplateColumns=\"auto\"\n        alignItems=\"center\"\n        justifyItems=\"center\"\n      >\n        <GridItem padding=\"10px\">\n          <h3 style={{ padding: '10px', color: 'darkgray' }}>\n            Feature under construction.\n          </h3>\n        </GridItem>\n      </Grid>\n    )\n  }\n}\n\nexport default ExportMode\n","module.exports = __webpack_public_path__ + \"bare.min.css\";","const makeRoot = (real, imag) => ({ real, imag })\n\nconst evaluate = (x, A, B, C, D) => {\n  const q0 = A * x\n  const B1 = q0 + B\n  const C2 = B1 * x + C\n  return {\n    Q: C2 * x + D,\n    dQ: (q0 + B1) * x + C2,\n    B1,\n    C2,\n  }\n}\n\nconst qdrtc = (A, B, C) => {\n  const b = -B / 2\n  const q = b * b - A * C\n  let X1 = 0\n  let Y1 = 0\n  let X2 = 0\n  let Y2 = 0\n\n  if (q < 0) {\n    const X = b / A\n    const Y = Math.sqrt(-q) / A\n    X1 = X\n    Y1 = Y\n    X2 = X\n    Y2 = -Y\n  } else {\n    Y1 = 0\n    Y2 = 0\n    const r = b + Math.sign(b) * Math.sqrt(q)\n    if (r === 0) {\n      X1 = C / A\n      X2 = -C / A\n    } else {\n      X1 = C / r\n      X2 = r / A\n    }\n  }\n  return [\n    makeRoot(X1, Y1),\n    makeRoot(X2, Y2),\n  ]\n}\n\nconst getCubicRoots = (A, B, C, D) => {\n  let X\n  let a\n  let b1\n  let c2\n  if (A === 0) {\n    X = undefined\n    a = B\n    b1 = C\n    c2 = D\n  } else if (D === 0) {\n    X = 0\n    a = A\n    b1 = B\n    c2 = C\n  } else {\n    a = A\n    X = -(B / A) / 3\n    let evalInfo = evaluate(X, A, B, C, D)\n    let q = evalInfo.Q\n    let dq = evalInfo.dQ\n    b1 = evalInfo.B1\n    c2 = evalInfo.C2\n\n    let t = q / A\n    let r = Math.abs(t) ** (1 / 3)\n    const s = Math.sign(t)\n    t = -dq / A\n    if (t > 0) {\n      r = 1.324717957244746 * Math.max(r, Math.sqrt(t))\n    }\n    let x0 = X - s * r\n    if (x0 !== X) {\n      const den = 1 + (100 * Number.EPSILON)\n      do {\n        X = x0\n        evalInfo = evaluate(X, A, B, C, D)\n        q = evalInfo.Q\n        dq = evalInfo.dQ\n        b1 = evalInfo.B1\n        c2 = evalInfo.C2\n        x0 = (dq === 0 ? X : X - (q / dq) / den)\n      } while (s * x0 > s * X)\n      if (Math.abs(A) * X * X > Math.abs(D / X)) {\n        c2 = -D / X\n        b1 = (c2 - C) / X\n      }\n    }\n  }\n  const roots = []\n  if (X !== undefined) {\n    roots.push(makeRoot(X, 0))\n  }\n  const quadInfo = qdrtc(a, b1, c2)\n  return roots.concat(quadInfo)\n}\n\nconst cubic = (x, a, b, c, d) => (\n  (a * (x ** 3)) + (b * (x ** 2)) + (c * x) + d\n)\n\nconst bezierCurve = ({ x2, x3, y2, y3 }) => {\n  /* x2, and x3 are the X values from the 2nd and 3rd points for a bezier\n      definition. For this use case, they must be between 0 - 1.\n  */\n  if (x2 > 1 || x2 < 0 || x3 > 1 || x3 < 0) {\n    throw Error('This bezier curve requires control values between 0 & 1')\n  }\n\n  // These constants were reduced from the Cubic Bzier curve definition, with\n  // values of (0, 0) and (1, 1) used for p1 & p4 respectively\n  const xA = 3 * x2 - 3 * x3 + 1\n  const xB = -1 * 6 * x2 + 3 * x3\n  const xC = 3 * x2\n\n  const yA = 3 * y2 - 3 * y3 + 1\n  const yB = -1 * 6 * y2 + 3 * y3\n  const yC = 3 * y2\n  const yD = 0\n\n  const t = (x) => {\n    const xD = -x\n    const roots = getCubicRoots(xA, xB, xC, xD)\n    roots.filter(r => (\n      r.imag === 0\n      && r.real.toFixed(10) >= 0\n      && r.real.toFixed(10) <= 1\n      && !Object.is(r.real, -0)\n    ))\n    // console.log(JSON.stringify(roots))\n    return roots[0].real\n  }\n\n  const y = (x) => {\n    const time = t(x)\n    return cubic(time, yA, yB, yC, yD)\n  }\n\n  return ({ t, y })\n}\n\nexport default bezierCurve\n","import { observable } from 'mobx'\n\nimport Handle from './Handle'\nimport bezierCurve from '../util/bezierCurve'\n\nclass Keyframe {\n  static get OBSERVABLES() {\n    return ['frame', 'value', 'handleIn', 'handleOut']\n  }\n\n  @observable frame\n  @observable value\n  @observable handleIn\n  @observable handleOut\n\n  constructor(frame, value) {\n    this.frame = frame\n    this.value = value\n    this.handleIn = new Handle('IN')\n    this.handleOut = new Handle('OUT')\n  }\n\n  static sort = (a, b) => (a.frame - b.frame)\n\n  static createCurve = (k1, k2) => (\n    bezierCurve({\n      x2: k1.handleOut.position.x,\n      y2: k1.handleOut.position.y,\n      x3: k2.handleIn.position.x,\n      y3: k2.handleIn.position.y,\n    })\n  )\n\n  static interpolate = (k1, k2, frame) => {\n    const curve = Keyframe.createCurve(k1, k2)\n    const timeRatio = (frame - k1.frame) / (k2.frame - k1.frame)\n    // BUG: Bezier Interpolation is broken for certain ranges\n    const valueRatio = curve.y(timeRatio)\n    const interpolated = ((k2.value - k1.value) * valueRatio) + k1.value\n    return interpolated\n  }\n}\n\nexport default Keyframe\n","import { observable, action } from 'mobx'\nimport paper from 'paper'\n\nimport Keyframe from './Keyframe'\n\nclass AnimatableItem {\n  // Canvas Size Relative Values (0-100)\n  static get X() { return 50 }\n  static get Y() { return 50 }\n\n  // Absolute Values\n  static get SCALE() { return 100 }\n  static get ROTATION() { return 0 }\n  static get FILL_COLOR() {\n    return {\n      hue: Math.floor(Math.random() * 361),\n      saturation: 0.4,\n      brightness: 1,\n    }\n  }\n\n  static get OBSERVABLES() {\n    return ['x', 'y', 'scale', 'rotation', 'fillColor', 'keyframes']\n  }\n\n  constructor({ key }) {\n    this.key = key\n  }\n\n  @observable canvas\n  @observable _x = AnimatableItem.X\n  @observable _y = AnimatableItem.Y\n  @observable _scale = AnimatableItem.SCALE\n  @observable _rotation = AnimatableItem.ROTATION\n  @observable _fillColor = AnimatableItem.FILL_COLOR\n  @observable keyframes = {\n    x: observable([]),\n    y: observable([]),\n    scale: observable([]),\n    rotation: observable([]),\n  }\n\n  get item() { return paper.project.activeLayer.children[this.key] }\n  get x() { return this._x }\n  get y() { return this._y }\n  get position() { return { x: this.x, y: this.y } }\n  get scale() { return this._scale }\n  get rotation() { return this._rotation }\n  get fillColor() { return this._fillColor }\n\n  set x(value) {\n    this.item.position.x = this.absolute(value)\n    this._x = value\n  }\n\n  set y(value) {\n    this.item.position.y = this.absolute(value, 'height')\n    this._y = value\n  }\n\n  set position({ x, y }) {\n    this.x = x\n    this.y = y\n  }\n\n  set scale(value) {\n    if (this.scale === 0 && value !== 0) {\n      this.item.remove()\n      this.create(this.canvas)\n      this.item.scale(this.fraction(value))\n    } else {\n      const scaleBy = value / this.scale\n      this.item.scale(scaleBy)\n    }\n    this._scale = value\n  }\n\n  set rotation(value) {\n    const rotateBy = value - this.rotation\n    this.item.rotate(rotateBy)\n    this._rotation = value\n  }\n\n  set fillColor(value) {\n    this.item.fillColor = value\n    this._fillColor = value\n  }\n\n  @action setCanvas(canvas) {\n    this.canvas = canvas\n  }\n\n  @action setUntrackedValues() {\n    this.item.scale(this.fraction(this.scale))\n    this.item.rotate(this.rotation)\n  }\n\n  @action updateKeyframes(property, keyframes) {\n    this.keyframes = {\n      ...this.keyframes,\n      [property]: keyframes,\n    }\n  }\n\n  addKey(property, frame, value) {\n    const k = new Keyframe(frame, value)\n    const keyframes = [...this.keyframes[property], k]\n    keyframes.sort(Keyframe.sort)\n    this.updateKeyframes(property, keyframes)\n  }\n\n  removeKey(property, frame) {\n    let keyframes = [...this.keyframes[property]]\n    keyframes = keyframes.filter(k => k.frame !== frame)\n    this.updateKeyframes(property, keyframes)\n  }\n\n  absolute = (value, dimension = 'width') => (\n    value / 100 * this.canvas[dimension]\n  )\n\n  fraction = value => (\n    value / 100\n  )\n\n  create(canvas) {\n    if (this.canvas === undefined) this.setCanvas(canvas)\n\n    const sharedProps = {\n      name: this.key,\n      fillColor: this.fillColor,\n    }\n\n    if (typeof this.onCreate === 'function') {\n      this.onCreate(sharedProps)\n    }\n\n    if (this.item !== undefined) this.setUntrackedValues()\n  }\n\n  recreate() {\n    this.item.remove()\n    this.create(this.canvas)\n    this.canvas.addListenersAndSelect(this)\n  }\n\n  draw(frame) {\n    if (this.item === undefined) return\n\n    Object.entries(this.keyframes).forEach(([property, keyframes]) => {\n      // Ignore `y` property\n      if (property === 'y') return\n      if (property === 'x') {\n        // Interpret `x` & `y` at the same time\n        const xKeyframes = keyframes\n        const yKeyframes = this.keyframes.y\n        if (xKeyframes.length === 0 && yKeyframes.length === 0) return\n        const xValue = this.valueForFrame(frame, xKeyframes)\n        const yValue = this.valueForFrame(frame, yKeyframes)\n        this.position = { x: xValue, y: yValue }\n      } else {\n        // Interpret all other properties individually\n        if (keyframes.length === 0) return\n        const value = this.valueForFrame(frame, keyframes)\n        this[property] = value\n      }\n    })\n  }\n\n  valueForFrame = (frame, keyframes) => {\n    const frames = keyframes.map(key => key.frame)\n\n    // is frame a keyframe\n    if (frames.includes(frame)) {\n      const where = frames.indexOf(frame)\n      return keyframes[where].value\n    }\n\n    // where is frame with respect to keyframes\n    frames.push(frame)\n    frames.sort((a, b) => a - b)\n    const where = frames.indexOf(frame)\n\n    // is frame before or after last key\n    if (where === 0) return keyframes[0].value\n    if (where === frames.length - 1) return keyframes[keyframes.length - 1].value\n\n    // frame is between two keys\n    const before = keyframes[where - 1]\n    const after = keyframes[where]\n    return Keyframe.interpolate(before, after, frame)\n  }\n}\n\nexport default AnimatableItem\n","import React, { Component } from 'react'\n\nimport Grid from '../components/Grid'\nimport GridItem from '../components/GridItem'\n\nclass ModeController extends Component {\n  navigate = (event) => {\n    event.preventDefault()\n    const { mode } = this.props\n    mode.set(event.target.textContent.toUpperCase())\n  }\n\n  render() {\n    const { current } = this.props.mode\n    return (\n      <Grid gridTemplateColumns=\"1fr 1fr 1fr 1fr\" borderBottom=\"1px solid rgb(230, 230, 230)\">\n        <GridItem display=\"grid\" alignItems=\"center\" justifyItems=\"center\">\n          <button\n            type=\"button\"\n            style={{ margin: '0px' }}\n            onClick={this.navigate}\n            {...(current === 'BUILD' ? { primary: 'true' } : {})}\n          >\n            Build\n          </button>\n        </GridItem>\n        <GridItem display=\"grid\" alignItems=\"center\" justifyItems=\"center\">\n          <button\n            type=\"button\"\n            style={{ margin: '0px' }}\n            onClick={this.navigate}\n            {...(current === 'ANIMATE' ? { primary: 'true' } : {})}\n          >\n            Animate\n          </button>\n        </GridItem>\n        <GridItem display=\"grid\" alignItems=\"center\" justifyItems=\"center\">\n          <button\n            type=\"button\"\n            style={{ margin: '0px' }}\n            onClick={this.navigate}\n            {...(current === 'VIEW' ? { primary: 'true' } : {})}\n          >\n            View\n          </button>\n        </GridItem>\n        <GridItem display=\"grid\" alignItems=\"center\" justifyItems=\"center\">\n          <button\n            type=\"button\"\n            style={{ margin: '0px' }}\n            onClick={this.navigate}\n            {...(current === 'EXPORT' ? { primary: 'true' } : {})}\n          >\n            Export\n          </button>\n        </GridItem>\n      </Grid>\n    )\n  }\n}\n\nexport default ModeController\n","import paper from 'paper'\n\nimport Handle from './Handle'\n\nclass HandleEditor {\n  constructor(trueWidth, keyframeBefore, keyframeAfter) {\n    this.trueWidth = trueWidth\n    this.keyframeBefore = keyframeBefore\n    this.keyframeAfter = keyframeAfter\n    this.paper = new paper.PaperScope()\n\n    this.element = undefined\n  }\n\n  attatchTo = (id) => {\n    const element = document.getElementById(id)\n    this.element = element\n    this.paper.setup(element)\n  }\n\n  destroy() {\n    if (this.paper.project) {\n      this.paper.project.clear()\n      this.paper.project.remove()\n    }\n  }\n\n  init() {\n    // Assumes Width & Height are identical\n    this.padding = 10\n    this.width = this.trueWidth - (this.padding * 2)\n    const { width, padding } = this\n\n    const topLeft = [padding, padding]\n    const topRight = [width + padding, padding]\n    const bottomLeft = [padding, width + padding]\n    // const bottomRight = [width, width + padding]\n    const spacing = width / Handle.STEP\n    const center = this.trueWidth / 2\n\n    // Background\n    new this.paper.Path.Rectangle({\n      topLeft: [0, 0],\n      bottomRight: [this.trueWidth, this.trueWidth],\n      fillColor: 'rgb(210, 210, 210)',\n    })\n\n    // Gridlines\n    const gridline = new this.paper.SymbolDefinition(\n      new this.paper.Path.Line({\n        from: [0, 0],\n        to: [0, this.trueWidth],\n        // strokeColor: '#324252',\n        strokeColor: 'rgb(180, 180, 180)',\n        strokeWidth: 2,\n      })\n    )\n    for (let i = 0; i <= Handle.STEP; i += 1) {\n      const offset = padding + 0 + (spacing * i)\n      gridline.place(new this.paper.Point(offset, center))\n      const offAxis = gridline.place(new this.paper.Point(center, offset))\n      offAxis.rotate(90)\n    }\n\n    // Value Interpolation Curve\n    this.curve = new this.paper.Path.Line({\n      // strokeColor: '#2176ff',\n      strokeColor: 'rgb(30, 155, 255)',\n      strokeWidth: 2,\n      from: new this.paper.Point(bottomLeft),\n      to: new this.paper.Point(topRight),\n    })\n    this.setVisualCurveHandles()\n\n    // Handle Strings\n    const stringStyle = {\n      // strokeColor: '#2176ff',\n      strokeColor: 'rgb(30, 155, 255)',\n      strokeWidth: 2,\n    }\n    const handleBeforeString = new this.paper.Path.Line({\n      ...stringStyle,\n      from: bottomLeft,\n      to: this.handleBefore(),\n    })\n    const handleAfterString = new this.paper.Path.Line({\n      ...stringStyle,\n      from: this.handleAfter(),\n      to: topRight,\n    })\n\n    // Handle Grips\n    const handleMovable = new this.paper.SymbolDefinition(\n      new this.paper.Path.Circle({\n        point: topLeft,\n        radius: 6,\n        // strokeColor: '#2176ff',\n        strokeColor: 'rgb(30, 155, 255)',\n        strokeWidth: 2,\n        fillColor: new this.paper.Color(1, 0.01),\n      })\n    )\n    const handleStationary = new this.paper.SymbolDefinition(\n      new this.paper.Path.Rectangle({\n        point: [100, 100],\n        size: [10, 10],\n        // fillColor: '#2176ff',\n        fillColor: 'rgb(30, 155, 255)',\n      })\n    )\n    handleStationary.place(bottomLeft)\n    handleStationary.place(topRight)\n    const handleBefore = handleMovable.place(this.handleBefore())\n    const handleAfter = handleMovable.place(this.handleAfter())\n\n    // Handle Events\n    handleBefore.onMouseEnter = () => {\n      this.element.style.cursor = 'pointer'\n    }\n    handleBefore.onMouseLeave = () => {\n      this.element.style.cursor = 'default'\n    }\n    handleBefore.onMouseDrag = (event) => {\n      this.element.style.cursor = 'pointer'\n      const travelled = event.point.subtract(handleBefore.position)\n\n      if (Math.abs(travelled.x) >= (spacing / 2)) {\n        const newPosition = handleBefore.position.add({\n          y: 0,\n          x: (travelled.x / Math.abs(travelled.x)) * spacing,\n        })\n\n        handleBefore.position = newPosition\n        handleBeforeString.lastSegment.point = newPosition\n        this.keyframeBefore.handleOut.influence += Math.sign(travelled.x) * Handle.STEP\n        this.setVisualCurveHandles()\n      }\n\n      if (Math.abs(travelled.y) >= (spacing / 2)) {\n        const newPosition = handleBefore.position.add({\n          x: 0,\n          y: (travelled.y / Math.abs(travelled.y)) * spacing,\n        })\n\n        handleBefore.position = newPosition\n        handleBeforeString.lastSegment.point = newPosition\n        this.keyframeBefore.handleOut.distance += -1 * Math.sign(travelled.y) * Handle.STEP\n        this.setVisualCurveHandles()\n      }\n    }\n    handleBefore.onMouseUp = () => {\n      this.element.style.cursor = 'default'\n    }\n\n    handleAfter.onMouseEnter = () => {\n      this.element.style.cursor = 'pointer'\n    }\n    handleAfter.onMouseLeave = () => {\n      this.element.style.cursor = 'default'\n    }\n    handleAfter.onMouseDrag = (event) => {\n      this.element.style.cursor = 'pointer'\n      const travelled = event.point.subtract(handleAfter.position)\n\n      if (Math.abs(travelled.x) >= (spacing / 2)) {\n        const newPosition = handleAfter.position.add({\n          y: 0,\n          x: (travelled.x / Math.abs(travelled.x)) * spacing,\n        })\n\n        handleAfter.position = newPosition\n        handleAfterString.firstSegment.point = newPosition\n        this.keyframeAfter.handleIn.influence += -1 * Math.sign(travelled.x) * Handle.STEP\n        this.setVisualCurveHandles()\n      }\n\n      if (Math.abs(travelled.y) >= (spacing / 2)) {\n        const newPosition = handleAfter.position.add({\n          x: 0,\n          y: (travelled.y / Math.abs(travelled.y)) * spacing,\n        })\n\n        handleAfter.position = newPosition\n        handleAfterString.firstSegment.point = newPosition\n        this.keyframeAfter.handleIn.distance += Math.sign(travelled.y) * Handle.STEP\n        this.setVisualCurveHandles()\n      }\n    }\n    handleAfter.onMouseUp = () => {\n      this.element.style.cursor = 'default'\n    }\n  }\n\n\n  handleBefore = () => (\n    this.absoluteHandlePosition(this.keyframeBefore.handleOut.position)\n  )\n\n  handleAfter = () => (\n    this.absoluteHandlePosition(this.keyframeAfter.handleIn.position)\n  )\n\n  absoluteHandlePosition(handlePosition) {\n    return ([\n      handlePosition.x * this.width + this.padding,\n      // Compensates for 4th quadrant cartesian system\n      this.width - (handlePosition.y * this.width) + this.padding,\n    ])\n  }\n\n  setVisualCurveHandles() {\n    if (this.curve) {\n      this.curve.firstSegment.handleOut = new this.paper.Point(\n        this.keyframeBefore.handleOut.influence * this.width / Handle.MAX,\n        -1 * this.keyframeBefore.handleOut.distance * this.width / Handle.MAX\n      )\n      this.curve.lastSegment.handleIn = new this.paper.Point(\n        -1 * this.keyframeAfter.handleIn.influence * this.width / Handle.MAX,\n        this.keyframeAfter.handleIn.distance * this.width / Handle.MAX\n      )\n    }\n  }\n}\n\nexport default HandleEditor\n","import React from 'react'\nimport { observer } from 'mobx-react'\n\nimport Canvas from '../components/Canvas'\n\nimport HandleEditorInstance from '../prototypes/HandleEditor'\n\n@observer\nclass HandleEditor extends React.Component {\n  state = {}\n\n  handleEditor\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.keyframeKey !== undefined && prevProps.keyframeKey !== this.props.keyframeKey) {\n      if (this.handleEditor) this.handleEditor.destroy()\n      this.buildHandleEditorCanvas()\n    }\n  }\n\n  handleEditorHasSize = () => {\n    this.buildHandleEditorCanvas()\n  }\n\n  buildHandleEditorCanvas = () => {\n    const { width, keyframeBefore, keyframeAfter } = this.props\n\n    if (keyframeBefore && keyframeAfter) {\n      this.handleEditor = new HandleEditorInstance(width, keyframeBefore, keyframeAfter)\n      this.handleEditor.attatchTo('handle-editor')\n      this.handleEditor.init()\n    }\n  }\n\n  render() {\n    const { width, keyframeKey, keyframeBefore, keyframeAfter } = this.props\n\n    if (keyframeKey === undefined) {\n      return (\n        <h3 style={{ padding: '10px', color: 'darkgray' }}>\n          Select a Keyframe on the Timeline.\n        </h3>\n      )\n    }\n\n    if (keyframeBefore && !keyframeAfter) {\n      return (\n        <h3 style={{ padding: '10px', color: 'darkgray' }}>\n          <i>Selected tail Keyframe has no handle relationships.</i>\n        </h3>\n      )\n    }\n\n    return (\n      <div style={{ padding: '10px' }}>\n        <Canvas\n          id=\"handle-editor\"\n          width={width}\n          height={width}\n          hasSize={this.handleEditorHasSize}\n        />\n      </div>\n    )\n  }\n}\n\nexport default HandleEditor\n","import React from 'react'\nimport { observer } from 'mobx-react'\nimport paper from 'paper'\n\nimport Canvas from '../components/Canvas'\n\n@observer\nclass KeyframeEditor extends React.Component {\n  state = {\n    previouslyClickedKeyframe: undefined,\n  }\n\n  paper = new paper.PaperScope()\n  element\n\n  componentDidUpdate(prevProps) {\n    if (\n      prevProps.item !== undefined &&\n      this.props.item !== undefined &&\n      prevProps.item.key !== this.props.item.key\n    ) {\n      this.paper.project.clear()\n      this.paper.project.remove()\n      this.buildKeyframeEditorCanvas()\n    }\n\n    if (prevProps.now !== this.props.now) {\n      console.log('now changed')\n      this.buildPlayhead()\n    }\n  }\n\n  keyframeEditorHasSize = () => {\n    this.buildKeyframeEditorCanvas()\n  }\n\n  handleKeyframeClick = (event) => {\n    event.stopPropagation()\n    const { currentTarget } = event\n\n    const { onSelect } = this.props\n    const { previouslyClickedKeyframe } = this.state\n\n    if (previouslyClickedKeyframe) {\n      previouslyClickedKeyframe.strokeWidth = 0\n      previouslyClickedKeyframe.shadowColor.alpha = 0\n    }\n    currentTarget.strokeWidth = 1\n    currentTarget.shadowColor.alpha = 0.3\n    onSelect(currentTarget.name)\n    this.setState({ previouslyClickedKeyframe: currentTarget })\n  }\n\n  buildKeyframeEditorCanvas = () => {\n    const { item } = this.props\n    this.element = document.getElementById('keyframe-editor')\n    this.paper.setup(this.element)\n\n    const { verticalSpacing, timelineStart, timelineEnd, timelineStep } = this.timelineMath()\n\n    this.buildPlayhead()\n\n    Object.entries(item.keyframes).forEach(([prop, list], index) => {\n      const placing = index * verticalSpacing + verticalSpacing\n\n      // Draw Timelines\n      new this.paper.PointText({\n        point: [0, placing],\n        content: prop,\n        fillColor: 'black',\n        fontSize: 14,\n      })\n      new this.paper.Path.Line({\n        from: [timelineStart, placing - 5],\n        to: [timelineEnd, placing - 5],\n        strokeColor: 'lightgrey',\n        strokeWidth: 4,\n      })\n\n      // Draw Keyframes\n      list.forEach((keyframe, keyframeIndex) => {\n        const keyframeRect = new this.paper.Path.Rectangle({\n          name: `${item.key}.${prop}.${keyframeIndex}`,\n          point: [timelineStart + keyframe.frame * timelineStep - 5, placing - 10],\n          size: [10, 10],\n          radius: 3,\n          fillColor: 'rgb(30, 155, 255)',\n          rotation: 45,\n          strokeColor: 'rgba(0, 0, 0, 0.25)',\n          strokeWidth: 0,\n          shadowColor: 'rgba(0, 0, 0, 0)',\n          shadowBlur: 5,\n        })\n        keyframeRect.on('mousedown', this.handleKeyframeClick)\n      })\n    })\n  }\n\n  buildPlayhead() {\n    const { size, now } = this.props\n    const { timelineStart, timelineStep } = this.timelineMath()\n    new this.paper.Path.Line({\n      from: [timelineStart + now * timelineStep, 10],\n      to: [timelineStart + now * timelineStep, size.height - 10],\n      strokeColor: 'white',\n      strokeWidth: 1,\n    })\n    new this.paper.Path.RegularPolygon({\n      center: [timelineStart + now * timelineStep, 10],\n      sides: 3,\n      radius: 6,\n      rotation: 180,\n      fillColor: 'white',\n    })\n  }\n\n  timelineMath() {\n    const { size, frames } = this.props\n    const verticalSpacing = 40\n    const timelineStart = 80\n    const timelineEnd = size.width - verticalSpacing\n    const timelineWidth = timelineEnd - timelineStart\n    const timelineStep = timelineWidth / frames\n    return {\n      verticalSpacing,\n      timelineStart,\n      timelineEnd,\n      timelineWidth,\n      timelineStep,\n    }\n  }\n\n  render() {\n    const { size, item } = this.props\n\n    if (size === undefined || item === undefined) {\n      return (\n        <h3 style={{ padding: '10px', color: 'grey' }}>\n          Select an Item to view its Keyframes.\n        </h3>\n      )\n    }\n\n    return (\n      <div style={{ padding: '10px' }}>\n        <Canvas\n          id=\"keyframe-editor\"\n          width={size.width}\n          height={size.height}\n          hasSize={this.keyframeEditorHasSize}\n        />\n      </div>\n    )\n  }\n}\n\nexport default KeyframeEditor\n","import React, { Component } from 'react'\nimport { observer } from 'mobx-react'\n\nimport Viewer from './Viewer'\nimport HandleEditor from './HandleEditor'\nimport KeyframeEditor from './KeyframeEditor'\nimport Grid from '../components/Grid'\nimport GridItem from '../components/GridItem'\n\n@observer\nclass AnimateMode extends Component {\n  state = {\n    heWidth: undefined,\n    keSize: undefined,\n  }\n\n  componentDidMount() {\n    const { canvas } = this.props.store\n    const container = document.getElementById('view-container')\n    setTimeout(() => {\n      const width = Math.round(container.clientWidth) - 20\n      const height = Math.round((9 / 16) * width)\n      canvas.setSize(width, height)\n    }, 1)\n\n    const container2 = document.getElementById('handle-container')\n    setTimeout(() => {\n      const width = Math.round(container2.clientWidth) - 20\n      const height = Math.round(container2.clientHeight) - 20\n      const smallestLength = Math.min(width, height)\n      this.setState({ heWidth: smallestLength })\n    }, 1)\n\n    const container3 = document.getElementById('keyframe-container')\n    setTimeout(() => {\n      const width = Math.round(container3.clientWidth) - 20\n      const height = Math.round(container3.clientHeight) - 20\n      this.setState({ keSize: { width, height } })\n    }, 1)\n  }\n\n  componentWillUnmount() {\n    const { canvas, project } = this.props.store\n    canvas.selectOff()\n    project.clear()\n  }\n\n  setup = () => {\n    const { canvas } = this.props.store\n    canvas.build()\n    setTimeout(() => {\n      canvas.setTool(undefined)\n      canvas.setTool('SELECT')\n    }, 20)\n  }\n\n  render() {\n    const { canvas, animation, tools } = this.props.store\n    const { heWidth, keSize } = this.state\n\n    let keyframeBefore\n    let keyframeAfter\n    if (tools.selectedKeyframe) {\n      const [kItem, kProp, kIndexStr] = tools.selectedKeyframe.split('.')\n      const kIndex = parseInt(kIndexStr)\n      const keyframesOfType = canvas.animatables[kItem].keyframes[kProp]\n      keyframeBefore = keyframesOfType[kIndex]\n      if (kIndex + 1 < keyframesOfType.length) {\n        keyframeAfter = keyframesOfType[kIndex + 1]\n      }\n    }\n\n    return (\n      <Grid\n        gridTemplateRows=\"auto 340px\"\n        gridTemplateColumns=\"auto 400px\"\n      >\n        <GridItem id=\"view-container\" padding=\"10px\" gridArea=\"1 / 1 / 1 / 2\">\n          <Viewer canvas={canvas} animation={animation} setup={this.setup} />\n        </GridItem>\n        <GridItem id=\"handle-container\" gridArea=\"1 / 2 / 1 / 3\" backgroundColor=\"rgb(210, 210, 210)\">\n          <HandleEditor\n            width={heWidth}\n            keyframeKey={tools.selectedKeyframe}\n            keyframeBefore={keyframeBefore}\n            keyframeAfter={keyframeAfter}\n          />\n        </GridItem>\n        <GridItem id=\"keyframe-container\" gridArea=\"2 / 1 / 2 / 3\" backgroundColor=\"rgb(180, 180, 180)\">\n          <KeyframeEditor\n            size={keSize}\n            item={canvas.selected}\n            frames={animation.frames}\n            now={animation.now}\n            onSelect={tools.selectKeyframe}\n          />\n        </GridItem>\n      </Grid>\n    )\n  }\n}\n\nexport default AnimateMode\n","import React, { Component } from 'react'\nimport { observer } from 'mobx-react'\n\nimport Grid from '../components/Grid'\nimport GridItem from '../components/GridItem'\n\n@observer\nclass PlayController extends Component {\n  componentDidMount() {\n    document.addEventListener('keydown', this.handleKeyDown, false)\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleKeyDown, false)\n  }\n\n  handleKeyDown = (event) => {\n    const {\n      play,\n      pause,\n      goToNext,\n      goToPrev,\n      goToFirst,\n      goToLast,\n      playing,\n    } = this.props.animation\n    const { key, shiftKey } = event\n\n    if (key === 'ArrowLeft' && shiftKey) {\n      goToFirst()\n    } else if (key === 'ArrowLeft') {\n      goToPrev()\n    } else if (key === 'ArrowRight' && shiftKey) {\n      goToLast()\n    } else if (key === 'ArrowRight') {\n      goToNext()\n    } else if (key === ' ') {\n      event.stopPropagation()\n      event.preventDefault()\n      if (playing === true) {\n        pause()\n      } else {\n        play()\n      }\n    }\n  }\n\n  render() {\n    const {\n      play,\n      pause,\n      goToNext,\n      goToPrev,\n      goToFirst,\n      goToLast,\n      playing,\n    } = this.props.animation\n\n    return (\n      <Grid gridTemplateColumns=\"30% 1fr 1fr 1fr 1fr 1fr 30%\" height=\"60px\" alignItems=\"center\" justifyItems=\"center\" borderTop=\"1px solid rgb(230, 230, 230)\">\n        <GridItem gridColumnStart=\"2\">\n          <button type=\"button\" style={{ margin: 0 }} onClick={goToFirst}>&#8676;</button>\n        </GridItem>\n        <GridItem gridColumnStart=\"3\">\n          <button type=\"button\" style={{ margin: 0 }} onClick={goToPrev}>&#9667;</button>\n        </GridItem>\n        <GridItem gridColumnStart=\"4\">\n          { playing === false\n            ? <button type=\"button\" style={{ margin: 0 }} onClick={play}>&#9658;</button>\n            : <button type=\"button\" style={{ margin: 0 }} onClick={pause}>&#10073; &#10073;</button>\n          }\n        </GridItem>\n        <GridItem gridColumnStart=\"5\">\n          <button type=\"button\" style={{ margin: 0 }} onClick={goToNext}>\n            <div style={{ transform: 'rotate(180deg)' }}>&#9667;</div>\n          </button>\n        </GridItem>\n        <GridItem gridColumnStart=\"6\">\n          <button type=\"button\" style={{ margin: 0 }} onClick={goToLast}>&#8677;</button>\n        </GridItem>\n      </Grid>\n    )\n  }\n}\n\nexport default PlayController\n","import React from 'react'\n\nconst getWidth = () => (\n  window.innerWidth\n    || document.documentElement.clientWidth\n    || document.body.clientWidth\n)\n\nconst getHeight = () => (\n  window.innerHeight\n    || document.documentElement.clientHeight\n    || document.body.clientHeight\n)\n\nconst withWindowSize = Component => (\n  class extends React.Component {\n    state = {\n      width: getWidth(),\n      height: getHeight(),\n    }\n\n    componentDidMount() {\n      window.addEventListener('resize', this.updateDimensions)\n    }\n\n    componentWillUnmount() {\n      window.removeEventListener('resize', this.updateDimensions)\n    }\n\n    updateDimensions = () => {\n      const width = getWidth()\n      const height = getHeight()\n      this.setState({ width, height })\n    }\n\n    render() {\n      const { width, height } = this.state\n      return <Component width={width} height={height} {...this.props} />\n    }\n  }\n)\n\nexport default withWindowSize\nexport {\n  getWidth,\n  getHeight,\n}\n","import React, { Component } from 'react'\nimport { observer } from 'mobx-react'\n\nimport Viewer from './Viewer'\nimport PlayController from './PlayController'\nimport Grid from '../components/Grid'\nimport GridItem from '../components/GridItem'\nimport { getWidth } from '../components/withWindowSize'\n\nimport placeholder from '../prototypes/placeholder'\n\n@observer\nclass ViewMode extends Component {\n  componentDidMount() {\n    const { canvas } = this.props.store\n    const width = getWidth() - 20\n    const height = Math.round((9 / 16) * width)\n    canvas.setSize(width, height)\n\n    placeholder.setRange(this.props.store.animation)\n  }\n\n  componentWillUnmount() {\n    const { project } = this.props.store\n    project.clear()\n  }\n\n  setup = () => {\n    const { canvas } = this.props.store\n    canvas.build()\n  }\n\n  render() {\n    const { canvas, animation } = this.props.store\n    return (\n      <Grid\n        gridTemplateRows=\"auto 60px\"\n        alignItems=\"center\"\n      >\n        <GridItem padding=\"10px\">\n          <Viewer canvas={canvas} animation={animation} setup={this.setup} />\n        </GridItem>\n        <PlayController animation={animation} />\n      </Grid>\n    )\n  }\n}\n\nexport default ViewMode\n","var map = {\n\t\"./bare.min.css\": \"v4a6\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"zGb5\";"],"sourceRoot":""}