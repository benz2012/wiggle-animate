{"version":3,"sources":["webpack:///./src/js/util/download.js","webpack:///./src/js/prototypes/Project.js","webpack:///./src/js/prototypes/Canvas.js","webpack:///./src/js/prototypes/ModeStore.js","webpack:///./src/js/util/observeAnimatableTree.js","webpack:///./src/js/prototypes/ToolsStore.js","webpack:///./src/js/store.js","webpack:///./src/js/util/storage.js","webpack:///./src/js/index.jsx","webpack:///./src/js/containers/App.jsx","webpack:///./src/js/components/Playbar.jsx","webpack:///./src/js/containers/Viewer.jsx","webpack:///./src/js/components/GridItem.jsx","webpack:///./src/js/prototypes/Handle.js","webpack:///./src/js/prototypes/Animation.js","webpack:///./src/js/components/Grid.jsx","webpack:///./src/css/index.js","webpack:///./src/js/util/bezierCurve.js","webpack:///./src/js/prototypes/Keyframe.js","webpack:///./src/js/prototypes/AnimatableItem.js","webpack:///./src/js/prototypes/items/Circle.js","webpack:///./src/js/prototypes/items/Rectangle.js","webpack:///./src/js/containers/ToolController.jsx","webpack:///./src/js/components/IntegerInput.jsx","webpack:///./src/js/components/Modal.jsx","webpack:///./src/js/containers/PropertyEditor.jsx","webpack:///./src/js/containers/ProjectSettings.jsx","webpack:///./src/js/containers/ClearProject.jsx","webpack:///./src/js/prototypes/items/index.js","webpack:///./src/js/containers/BuildMode.jsx","webpack:///./src/js/components/Canvas.jsx","webpack:///./src/js/containers/ExportMode.jsx","webpack:///./src/css/bare.min.css","webpack:///./src/js/containers/ModeController.jsx","webpack:///./src/js/prototypes/HandleEditor.js","webpack:///./src/js/containers/HandleEditor.jsx","webpack:///./src/js/containers/KeyframeEditor.jsx","webpack:///./src/js/containers/AnimateMode.jsx","webpack:///./src/js/util/string.js","webpack:///./src/js/containers/PlayController.jsx","webpack:///./src/js/components/withWindowSize.jsx","webpack:///./src/js/containers/ViewMode.jsx","webpack:///./node_modules/file-loader/dist/cjs.js"],"names":["downloadJSON","data","basename","download","filename","type","file","Blob","window","navigator","msSaveOrOpenBlob","elm","document","createElement","url","URL","createObjectURL","href","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","Project","rootStore","clear","paper","project","remove","canvas","animation","setSize","undefined","setIn","Animation","FIRST","setOut","frames","load","inputJSON","fileName","input","JSON","parse","name","setName","replace","Object","keys","forEach","key","inputItems","animatables","mode","set","loadFromFile","event","targetFile","target","files","reader","FileReader","onload","result","reset","readAsText","save","stringify","toJSON","object","publish","console","log","this","initialize","inputBuilt","observable","action","Canvas","attatchAndSetup","id","element","getElementById","setup","view","autoUpdate","background","Path","Rectangle","topLeft","bottomRight","width","height","fillColor","color","draw","firstFrame","addListenersAndSelect","animatable","item","on","handleItemMouseDown","select","stopPropagation","currentTarget","handleViewMouseDown","deselect","forEachAnimatable","callback","values","build","create","frame","frameToDraw","now","update","selectOn","selectOff","off","prevWidth","prevHeight","_color","tool","selected","entries","reduce","output","setSizeAction","value","clone","nextTool","entering","toolId","prevTool","exiting","settings","Mode","current","m","observeAnimatableTree","observableObj","constructor","OBSERVABLES","map","keyframes","keyFrType","Tools","selectedKeyframe","keyframe","RootStore","tools","ModeStore","ToolsStore","storageEnabled","localStorage","setItem","e","projectObj","getItem","autorun","projectAsJSON","delay","reaction","store","appNode","ReactDOM","render","App","observer","Component","props","minHeight","gridTemplateRows","hot","module","Playbar","fullWidth","totalFrames","inPoint","outPoint","ABSOLUTE_FIRST","playbarWidth","per","marker","head","parseInt","tail","activeHead","activeTail","style","display","playbarStyle","backgroundColor","marginTop","margin","Viewer","canvasHasSize","onSetup","Fragment","hasSize","lastFrame","GridItem","children","Handle","influence","distance","_influence","_distance","x","y","MAX","newX","newY","nextFrame","later","prevFrame","earlier","fps","playing","sync","requestId","length","f","goToFrame","animateAtRate","pause","cancelAnimationFrame","func","interval","then","Date","loop","requestAnimationFrame","delta","Math","round","Grid","cssContext","require","makeRoot","real","imag","evaluate","A","B","C","D","q0","B1","C2","Q","dQ","getCubicRoots","X","a","b1","c2","evalInfo","q","dq","t","r","abs","s","sign","max","sqrt","x0","den","Number","EPSILON","roots","push","quadInfo","qdrtc","b","X1","Y1","X2","Y2","Y","concat","bezierCurve","x2","x3","y2","y3","Error","xA","xB","xC","filter","toFixed","is","yA","yB","yC","cubic","c","d","Keyframe","handleIn","handleOut","sort","createCurve","k1","k2","position","interpolate","curve","timeRatio","valueRatio","AnimatableItem","absolute","dimension","fraction","valueForFrame","includes","indexOf","where","before","after","hue","floor","random","saturation","brightness","class","scale","rotation","prop","keyframeList","rotate","property","ignorePairings","valueToKey","k","updateKeyframes","paired","valueToPair","kP","keyframesPaired","keyframesY","setCanvas","sharedProps","onCreate","setUntrackedValues","xKeyframes","yKeyframes","xValue","yValue","activeLayer","_x","_y","_scale","scaleBy","_rotation","rotateBy","_fillColor","SCALE","ROTATION","FILL_COLOR","Circle","radius","itemProps","center","_radius","recreate","RADIUS","absX","absY","absWidth","absHeight","point","size","_width","_height","WIDTH","HEIGHT","ToolController","choose","preventDefault","setTool","addCircle","existing","circle","add","addRectangle","rect","padding","onClick","primary","transform","IntegerInput","state","localValue","onChange","setState","onBlur","setValue","possibleInt","isInteger","handleKeyDown","shiftKey","incrementBy","decrementBy","changeBy","operation","amount","next","marginRight","textAlign","onKeyDown","Modal","open","handleClose","clickawayEl","useRef","container","onClickaway","contains","ref","content","PropertyEditor","propertySetter","existingKeyframe","find","addKey","itemClass","classControls","zIndex","left","top","overflow","border","ProjectSettings","setLength","setColor","closeModal","step","flexDirection","ClearProject","justifyContent","items","BuildMode","ready","inputItemsExist","autorunDisposer","clientWidth","Boolean","prevProps","prevState","prevInputItemsExist","itemKey","itemObj","properties","inputKeyframes","accum","keyframeProp","fromJSON","gridTemplateColumns","gridArea","alignSelf","testForAvailability","ExportMode","saveThenDownload","justifyItems","htmlFor","exports","ModeController","navigate","textContent","toUpperCase","borderBottom","alignItems","HandleEditor","trueWidth","keyframeBefore","keyframeAfter","onMove","attatchTo","handleBefore","absoluteHandlePosition","handleAfter","PaperScope","topRight","bottomLeft","spacing","STEP","gridline","SymbolDefinition","Line","from","to","strokeColor","strokeWidth","i","offset","place","Point","setVisualCurveHandles","stringStyle","handleBeforeString","handleAfterString","handleMovable","Color","handleStationary","onMouseEnter","cursor","onMouseLeave","onMouseDrag","travelled","subtract","xChange","yChange","xSign","ySign","newPosition","lastSegment","onMouseUp","firstSegment","handlePosition","handleEditor","handleEditorHasSize","buildHandleEditorCanvas","HandleEditorInstance","init","React","keyframeKey","destroy","KeyframeEditor","previouslyClickedKeyframe","keyframeEditorHasSize","buildKeyframeEditorCanvas","handleKeyframeClick","onSelect","shadowColor","alpha","handleKeyUp","split","removeKey","rebuild","timelineMath","verticalSpacing","timelineStart","timelineEnd","timelineStep","placementIndex","playheadLine","buildPlayhead","newKeyframeItems","list","propName","placing","PointText","fontSize","timelineHover","timeline","newKeyframeRect","visible","newKeyframePlus","newKeyframeHoverEffect","newKeyframeHide","newKeyClick","onMouseMove","hitTest","stroke","segments","keyframeIndex","keyframeRect","shadowBlur","bringToFront","addEventListener","removeEventListener","playheadTriangle","RegularPolygon","sides","timelineWidth","AnimateMode","heWidth","keSize","selectedItemKey","changeHandlePosition","handleType","handleSuffix","titleCase","str","splitStr","toLowerCase","charAt","substring","join","kItem","kProp","kIndexStr","kIndex","auxilaryHandle","targetHandle","container2","clientHeight","smallestLength","min","container3","selectKeyframe","keyframesOfType","PlayController","play","goToNext","goToPrev","goToFirst","goToLast","borderTop","gridColumnStart","getWidth","innerWidth","documentElement","ViewMode","webpackContext","req","webpackContextResolve","__webpack_require__","o","code","webpackContextKeys","resolve"],"mappings":"wIAqBqB,SAAfA,EAAgBC,EAAMC,GAAP,OArBJ,SAAXC,SAAYF,EAAMG,EAAUC,GAChC,IAAMC,EAAO,IAAIC,KAAK,CAACN,GAAO,CAAEI,SAChC,GAAIG,OAAOC,UAAUC,iBACnBF,OAAOC,UAAUC,iBAAiBJ,EAAMF,OACnC,CACL,IAAMO,EAAMC,SAASC,cAAc,KAC7BC,EAAMN,OAAOO,IAAIC,gBAAgBV,GAEvCK,EAAIM,KAAOH,EACXH,EAAIR,SAAWC,EAEfQ,SAASM,KAAKC,YAAYR,GAC1BA,EAAIS,QAEJC,WAAW,WACTT,SAASM,KAAKI,YAAYX,GAC1BH,OAAOO,IAAIQ,gBAAgBT,MAM/BX,CAASF,EAAD,UAAUC,EAAV,SAA2B,a,u8BCqFtBsB,G,0CA/Fb,iBAAYC,GAAW,Y,4GAAA,6KAyBvBC,MAAQ,WACNC,IAAMC,QAAQF,QACdC,IAAMC,QAAQC,SAFF,MAIkB,EAAKJ,UAA3BK,EAJI,EAIJA,OAAQC,EAJJ,EAIIA,UAChBD,EAAOE,aAAQC,OAAWA,GAC1BF,EAAUG,MAAMC,IAAUC,OAC1BL,EAAUM,OAAON,EAAUO,SAhCN,KAmCvBC,KAAO,SAACC,EAAWC,GAAa,MAKA,EAAKhB,UAA3BK,EALsB,EAKtBA,OAAQC,EALc,EAKdA,UACVW,EAAQC,KAAKC,MAAMJ,GAEnBK,EAAOJ,GAAYC,EAAMd,QAAQiB,KACvC,EAAKC,QAAQD,EAAKE,QAAQ,YAAa,KAEvCC,OAAOC,KAAKP,EAAMX,WAAWmB,QAAQ,SAACC,GACpCpB,EAAUoB,GAAOT,EAAMX,UAAUoB,KAGnCH,OAAOC,KAAKP,EAAMZ,QAAQoB,QAAQ,SAACC,GACrB,gBAARA,EACF,EAAKC,WAAaV,EAAMZ,OAAOuB,YAE/BvB,EAAOqB,GAAOT,EAAMZ,OAAOqB,KAI/B,EAAK1B,UAAU6B,KAAKC,IAAI,UA1DH,KA6DvBC,aAAe,SAACC,GAAU,IAElBC,EADYD,EAAME,OAAhBC,MACiB,GACnBC,EAAS,IAAIC,WACnBD,EAAOE,OAAS,kBAAM,EAAKxB,KAAKsB,EAAOG,OAAQN,EAAWb,OAE1D,EAAKpB,UAAUwC,QACfJ,EAAOK,WAAWR,IApEG,KAuEvBS,KAAO,WAAM,MAEmB,EAAK1C,UAA3BK,EAFG,EAEHA,OAAQC,EAFL,EAEKA,UAMhB,OALsBY,KAAKyB,UAAU,CACnCxC,QAAS,EAAKyC,SACdtC,UAAWA,EAAUsC,SACrBvC,OAAQA,EAAOuC,YA7EI,KAkFvBlE,SAAW,SAACmE,GACVtE,EAAasE,EAAQ,EAAKzB,OAnFL,KAsFvB0B,QAAU,WACRC,QAAQC,IAAI,uBAtFZC,KAAKjD,UAAYA,EACjBiD,KAAKC,a,mKAIDhD,IAAMC,UACRD,IAAMC,QAAQF,QACdC,IAAMC,QAAQC,UAEhB6C,KAAK7B,KAAO,eACZ6B,KAAKtB,gBAAanB,EAClByC,KAAKE,YAAa,I,sCAIlB,MAAQ,CACN/B,KAAM6B,KAAK7B,Q,sCAICA,GACd6B,KAAK7B,KAAOA,M,8BA1BbgC,K,oHACAA,K,oHACAA,K,+GAuBAC,K,srECiJYC,G,gDAtKb,gBAAYtD,GAAW,Y,kHAAA,4ZA4CvBuD,gBAAkB,SAACC,GACjB,IAAMC,EAAUtE,SAASuE,eAAeF,GACxCtD,IAAMyD,MAAMF,GACZvD,IAAM0D,KAAKC,YAAa,EACxB,EAAKC,WAAa,IAAI5D,IAAM6D,KAAKC,UAAU,CACzCC,QAAS,CAAC,EAAG,GACbC,YAAa,CAAChE,IAAM0D,KAAKH,QAAQU,MAAOjE,IAAM0D,KAAKH,QAAQW,QAC3DC,UAAW,EAAKC,QAElB,EAAKC,KAAK,EAAKvE,UAAUM,UAAUkE,aArDd,wRAwHvBC,sBAAwB,SAACC,GACvBA,EAAWC,KAAKC,GAAG,YAAa,EAAKC,qBACrC,EAAKC,OAAOJ,EAAWC,OA1HF,KA6HvBE,oBAAsB,SAAC7C,GACrBA,EAAM+C,kBACN,EAAKD,OAAO9C,EAAMgD,gBA/HG,KAkIvBC,oBAAsB,SAACjD,GACrBA,EAAM+C,kBACN,EAAKG,YApIgB,KAuIvBC,kBAAoB,SAAAC,GAAQ,OAC1B7D,OAAO8D,OAAO,EAAKzD,aAAaH,QAAQ2D,IAxInB,KA2IvBE,MAAQ,WACN,EAAKH,kBAAkB,SAACT,GAAiBA,EAAWa,OAAO,KAC3D,EAAKhB,QA7IgB,KAgJvBA,KAAO,SAACiB,GACN,IAAMC,EAAcD,GAAS,EAAKxF,UAAUM,UAAUoF,IACtD,EAAKP,kBAAkB,SAACT,GAAiBA,EAAWH,KAAKkB,KACrDvF,IAAM0D,MAAM1D,IAAM0D,KAAK+B,UAnJN,KAsJvBC,SAAW,WACT,EAAKT,kBAAkB,SAACT,GACtBA,EAAWC,KAAKC,GAAG,YAAa,EAAKC,uBAEvC3E,IAAM0D,KAAKgB,GAAG,YAAa,EAAKK,sBA1JX,KA6JvBY,UAAY,WACV,EAAKV,kBAAkB,SAACT,GACtBA,EAAWC,KAAKmB,IAAI,YAAa,EAAKjB,uBAExC3E,IAAM0D,KAAKkC,IAAI,YAAa,EAAKb,qBACjC,EAAKC,YAjKLjC,KAAKjD,UAAYA,EACjBiD,KAAKC,a,oLAIL,IAAI6C,EACAC,OACexF,IAAfyC,KAAKkB,QACP4B,EAAY9C,KAAKkB,MACjB6B,EAAa/C,KAAKmB,QAGpBnB,KAAKkB,WAAQ3D,EACbyC,KAAKmB,YAAS5D,EACdyC,KAAKgD,OAAS,UACdhD,KAAKrB,YAAc,GACnBqB,KAAKiD,UAAO1F,GACZyC,KAAKkD,cAAW3F,KAEZuF,GACF9C,KAAK1C,QAAQwF,EAAWC,K,sCAK1B,MAAQ,CACN1B,MAAOrB,KAAKqB,MACZ1C,YAAaL,OAAO6E,QAAQnD,KAAKrB,aAAayE,OAAO,SAACC,EAAD,GAA+B,0BAArB5E,EAAqB,KAAhBgD,EAAgB,KAElF,OADA4B,EAAO5E,GAAOgD,EAAW9B,SAClB0D,GACN,O,sCAICnC,EAAOC,GAAQ,WAEfmC,EAAgBlD,YAAO,WAC3B,EAAKe,OAASA,EACd,EAAKD,MAAQA,IAEfvE,WAAW2G,EAAe,K,gCAed,OAAOtD,KAAKgD,Q,iBAChBO,GACRvD,KAAKgD,OAASO,EACdvD,KAAKa,WAAWO,UAAYmC,M,8BAnE7BpD,K,sHACAA,K,sHACAA,K,0HACAA,K,2HACAA,K,oHACAA,K,wHACAA,K,mHAgEAC,K,gGAAa,SAACqB,GACbA,EAAWa,OAAO,GAClB,EAAK3D,YAAL,iBACK,EAAKA,YADV,mBAEG8C,EAAWhD,IAAMgD,IAGF,WAAd,EAAKwB,MACP,EAAKzB,sBAAsBC,GAG7B,EAAKH,W,wDAGNlB,K,gGAAgB,SAACqB,GAChBA,EAAWC,KAAKmB,IAAI,YAAa,EAAKjB,qBACtCH,EAAWC,KAAKvE,SAEhB,IAAMqG,EAAQ,cAAH,GAAQ,EAAK7E,oBACjB6E,EAAM/B,EAAWhD,KACxB,EAAKE,YAAc6E,EACnB,EAAKlC,W,yDAGNlB,K,gGAAiB,SAACqD,GAGA,SAAXC,GAAWC,GAAM,OAAKC,IAAaD,GAAUF,IAAaE,EAChD,SAAVE,GAAUF,GAAM,OAAKC,IAAaD,GAAUF,IAAaE,EAH/D,IAAMC,EAAW,EAAKX,KAKlBS,GAAS,WAAa,EAAKf,WAC3BkB,GAAQ,WAAa,EAAKjB,YAE1Bc,GAAS,cAAe,EAAK3G,UAAU6B,KAAKkF,UAAW,GACvDD,GAAQ,cAAe,EAAK9G,UAAU6B,KAAKkF,UAAW,GAEtDJ,GAAS,WAAY,EAAK3G,UAAU6B,KAAK5B,OAAQ,GACjD6G,GAAQ,WAAY,EAAK9G,UAAU6B,KAAK5B,OAAQ,GAGpD,EAAKiG,KAAOQ,M,wDAGbrD,K,gGAAgB,SAACsB,GAChB,EAAKO,WACLP,EAAKwB,UAAW,EAChB,EAAKA,SAAW,EAAKvE,YAAY+C,EAAKvD,MACtClB,IAAM0D,KAAK+B,a,0DAGZtC,K,gGAAkB,WACb,EAAK8C,WACP,EAAKA,SAASxB,KAAKwB,UAAW,EAC9B,EAAKA,cAAW3F,GAElBN,IAAM0D,KAAK+B,a,k2BC3GAqB,G,mDAfb,iB,qHAAc,mPACZ/D,KAAKC,a,2LAILD,KAAKgE,QAAU,QACfhE,KAAK8D,UAAW,EAChB9D,KAAKhD,OAAQ,M,8BAXdmD,K,2HACAA,K,wHACAA,K,sHAYAC,K,gGAAa,SAAC6D,GACb,EAAKD,QAAUC,M,21BClBW,SAkBfC,GAlBgBC,GAE7B,OADuBA,EAAcC,YAAYC,YAC3BC,IAAI,SAAC7F,GACzB,GAAY,cAARA,EACF,OAAOH,OAAOC,KAAK4F,EAAcI,WAAWD,IAAI,SAAAE,GAAS,OACvDL,EAAcI,UAAUC,GAAWF,IAAIJ,MAI3C,IAAMX,EAAQY,EAAc1F,GAC5B,OAAI8E,EAAMa,YAAYC,YACbH,GAAsBX,GAGxBA,I,gBCIIkB,G,oDAbb,kB,sHAAc,qJACZzE,KAAKC,a,+LAILD,KAAK0E,sBAAmBnH,M,wCAPzB4C,K,kIAUAC,K,gGAAwB,SAACuE,GACxB,EAAKD,iBAAmBC,M,qpBC8CbC,G,oCA1Cb,qBAAc,WAQZ,I,iHARY,qSAiCdrF,MAAQ,WACN,EAAKrC,QAAQ+C,aACb,EAAK7C,OAAO6C,aACZ,EAAK5C,UAAU4C,aACf,EAAKrB,KAAKqB,aACV,EAAK4E,MAAM5E,cArCXD,KAAK9C,QAAU,IAAIJ,EAAQkD,MAC3BA,KAAK5C,OAAS,IAAIiD,EAAOL,MACzBA,KAAK3C,UAAY,IAAII,IACrBuC,KAAKpB,KAAO,IAAIkG,EAChB9E,KAAK6E,MAAQ,IAAIE,ECvBE,SAAjBC,iBACJ,IACEC,aAAaC,QAAQ,QAAS,QAC9B,MAAOC,GACP,OAAO,EAET,OAAO,EDoBDH,GAAkB,CACpB,IAAMI,EAAaH,aAAaI,QAAQ,sBACpCD,GACFzI,WAAW,WACT,EAAKO,QAAQW,KAAKuH,IACjB,KAGLE,YAAQ,WACN,IAAMC,EAAgB,EAAKrI,QAAQuC,OACnCwF,aAAaC,QAAQ,qBAAsBK,IAC1C,CAAEC,MAAO,MAIdC,YACE,iBAAO,CACL,EAAKpI,UAAUoF,IACf,EAAKrF,OAAOiE,MACZ/C,OAAO8D,OAAO,EAAKhF,OAAOuB,aAAa2F,IAAIJ,MAE7C,kBAAM,EAAK9G,OAAOkE,W,qBAnCrBnB,K,qHACAA,K,wHACAA,K,mHACAA,K,oHACAA,K,iEENGuF,G,UAAQ,IAAId,GACZe,EAAUzJ,SAASuE,eAAe,OAExCmF,IAASC,OACP,kBAACC,EAAA,EAAD,CAAKJ,MAAOA,IACZC,I,ipCCHIG,EADLC,Y,4eACiBC,gB,+MAMP,IACCN,EAAU1F,KAAKiG,MAAfP,MACR,OACE,kBAAC,IAAD,CACEQ,UAAU,QACVC,iBAAiB,YAEjB,kBAAC,IAAD,CAAgBvH,KAAM8G,EAAM9G,OACJ,UAAvB8G,EAAM9G,KAAKoF,SACV,kBAAC,IAAD,CAAW0B,MAAOA,IAEI,YAAvBA,EAAM9G,KAAKoF,SACV,kBAAC,IAAD,CAAa0B,MAAOA,IAEE,SAAvBA,EAAM9G,KAAKoF,SACV,kBAAC,IAAD,CAAU0B,MAAOA,IAEK,WAAvBA,EAAM9G,KAAKoF,SACV,kBAAC,IAAD,CAAY0B,MAAOA,S,WAOdU,kBAAIC,EAAJD,CAAYN,K,m1BCvCX,SA0DDQ,GA1DE,GAOX,IANJC,EAMI,EANJA,UACAC,EAKI,EALJA,YACAC,EAII,EAJJA,QACAC,EAGI,EAHJA,SACAjE,EAEI,EAFJA,IACAkE,EACI,EADJA,eAEMC,EAAeL,GAAa,EAE5BM,EAAMD,EAAeJ,EACrBM,EAAuB,EAAdN,EAAkBK,EAAM,EACjCE,EAAOC,UAAUP,EAAUE,GAAkBE,GAC7CI,EAAOD,UAAUR,EAAcE,GAAYG,GAE7CK,EAAaF,SAAUvE,EAAMoE,EAAOE,GACpB,IAAhBP,EACFU,EAAaL,EACJpE,IAAQgE,EACjBS,EAAa,EACJzE,IAAQiE,IACjBQ,EAAaN,EAAeG,EAAOE,EAAOH,GAE5C,IAAMK,EAAa1E,IAAQiE,EAAW,EAAIE,EAAeG,EAAOE,EAAOC,EAAaJ,EAEpF,OACE,yBAAKM,MAAO,CAAEC,QAAS,SACrB,yBAAKD,MAAK,iBACLE,EADK,CAERpG,MAAO6F,EACPQ,gBAAiB,yBAEnB,yBAAKH,MAAK,iBACLE,EADK,CAERpG,MAAOgG,EACPK,gBAAiB,yBAEnB,yBAAKH,MAAK,iBACLE,EADK,CAERpG,MAAO4F,EACP3F,OAAQ,OACRqG,UAAW,MACXD,gBAAiB,wBAEnB,yBAAKH,MAAK,iBACLE,EADK,CAERpG,MAAOiG,EACPI,gBAAiB,yBAEnB,yBAAKH,MAAK,iBACLE,EADK,CAERpG,MAAO+F,EACPM,gBAAiB,0BAtDzB,I,EAAMD,EAAe,CAAEnG,OAAQ,OAAQsG,OAAQ,Y,q+BCMzCC,EADL3B,Y,gVAEC4B,cAAgB,WAAM,MACQ,EAAK1B,MAAzB7I,EADY,EACZA,OAAQwK,EADI,EACJA,QAChBxK,EAAOkD,gBAAgB,gBACvBsH,K,2QAJiB5B,gB,mJAOV,MACuBhG,KAAKiG,MAA3B7I,EADD,EACCA,OAAQC,EADT,EACSA,UAChB,OACE,kBAAC,IAAMwK,SAAP,KACE,kBAACxH,EAAA,EAAD,CACEE,GAAG,eACHW,MAAO9D,EAAO8D,MACdC,OAAQ/D,EAAO+D,OACf2G,QAAS9H,KAAK2H,gBAEhB,kBAAC,GAAD,CACEpB,UAAWnJ,EAAO8D,MAClBsF,YAAanJ,EAAUO,OACvB6I,QAASpJ,EAAUkE,WACnBmF,SAAUrJ,EAAU0K,UACpBtF,IAAKpF,EAAUoF,IACfkE,eAAgBlJ,IAAUC,a,cAOrBgK,O,oeC9BAM,IANE,SAAXA,SAAY,GAAD,IAAGzH,EAAH,EAAGA,GAAI0H,EAAP,EAAOA,SAAab,EAApB,qDACf,yBAAK7G,GAAIA,EAAI6G,MAAOA,GACjBa,K,49BCFCC,G,0CAUJ,gBAAYvM,I,4GAAM,uHAChBqE,KAAKrE,KAAOA,EACZqE,KAAKmI,UAAY,GACjBnI,KAAKoI,SAAW,E,+DAZC,OAAO,M,+BACN,OAAO,K,sCAEzB,MAAO,CAAC,YAAa,gB,2DAarB,MAAQ,CACNzM,KAAMqE,KAAKrE,KACXwM,UAAWnI,KAAKmI,UAChBC,SAAUpI,KAAKoI,Y,oCAID,OAAOpI,KAAKqI,Y,iBAchB9E,GACZvD,KAAKqI,WAAa9E,I,mCAdH,OAAOvD,KAAKsI,W,iBAiBhB/E,GACXvD,KAAKsI,UAAY/E,I,mCAhBjB,IAAIgF,EAAIvI,KAAKmI,UACTK,EAAIxI,KAAKoI,SAOb,MANkB,OAAdpI,KAAKrE,OACP4M,EAAIL,OAAOO,IAAMzI,KAAKmI,UACtBK,EAAIN,OAAOO,IAAMzI,KAAKoI,UAIjB,CAAEG,EAFTA,GAAKL,OAAOO,IAEAD,EADZA,GAAKN,OAAOO,M,oBAYS,IAARF,EAAQ,EAARA,EACPG,GADe,EAALF,EACHD,EAAIL,OAAOO,KAClBE,EAAOJ,EAAIL,OAAOO,IACN,OAAdzI,KAAKrE,MACPqE,KAAKmI,UAAYD,OAAOO,IAAMC,EAC9B1I,KAAKoI,SAAWF,OAAOO,IAAME,IAE7B3I,KAAKmI,UAAYO,EACjB1I,KAAKoI,SAAWO,O,mCA/CnBxI,K,mHACAA,K,iEAmDY+H,O,4/BC3DTzK,G,0CAcJ,qBAAc,Y,4GAAA,ijBAiDdmL,UAAY,WACV,IAAMC,EAAQ,EAAKpG,IAAM,EACzB,OAAIoG,EAAQ,EAAKd,UACG,SAAd,EAAKnJ,KAAwB,EAAK2C,WAC/B,KAEFsH,GAvDK,KA0DdC,UAAY,WACV,IAAMC,EAAU,EAAKtG,IAAM,EAC3B,OAAIsG,EAAU,EAAKxH,WACC,SAAd,EAAK3C,KAAwB,EAAKmJ,UAC/B,KAEFgB,GAhEK,wZACZ/I,KAAKC,a,oEAdc,OAAO,I,yCACE,MAAO,CAAC,OAAQ,Y,sEAiB5CD,KAAKpC,OAAS,IACdoC,KAAKuB,WAAa9D,UAAUC,MAC5BsC,KAAK+H,UAAY,IACjB/H,KAAKgJ,IAAM,GACXhJ,KAAKyC,IAAMzC,KAAKuB,WAChBvB,KAAKiJ,SAAU,EACfjJ,KAAKkJ,KAAO,EACZlJ,KAAKmJ,UAAY,KACjBnJ,KAAKpB,KAAO,S,sCAIZ,MAAQ,CACNhB,OAAQoC,KAAKpC,OACb2D,WAAYvB,KAAKuB,WACjBwG,UAAW/H,KAAK+H,UAChBiB,IAAKhJ,KAAKgJ,IACVpK,KAAMoB,KAAKpB,Q,0CAIGwK,IAChBpJ,KAAKpC,OAASwL,GACDpJ,KAAK+H,YAChB/H,KAAK+H,UAAYqB,O,kCAvCpBjJ,K,oHACAA,K,mHACAA,K,6GACAA,K,6GACAA,K,iHACAA,K,8GACAA,K,mHACAA,K,8GACAA,K,iHA4BAC,K,uHAOAA,K,gGAAe,SAACiJ,GACXA,EAAI5L,EAAUC,OAAS2L,EAAI,EAAKzL,SACpC,EAAK2D,WAAa8H,EACd,EAAK5G,IAAM4G,GACb,EAAKC,UAAUD,Q,kDAIlBjJ,K,gGAAgB,SAACiJ,GACZA,EAAI5L,EAAUC,OAAS2L,EAAI,EAAKzL,SACpC,EAAKmK,UAAYsB,EACb,EAAK5G,IAAM4G,GACb,EAAKC,UAAUD,Q,gDAsBlBjJ,K,gGAAc,WACY,OAArB,EAAKwI,cACT,EAAKK,SAAU,EACf,EAAKM,cAAc,WACjB,IAAMX,EAAY,EAAKA,YACvB,GAAkB,OAAdA,EAAoB,OAAO,EAAKY,QACpC,EAAK/G,IAAMmG,S,iDAIdxI,K,gGAAe,WACd,EAAK6I,SAAU,EACX,EAAKE,WAAWM,qBAAqB,EAAKN,e,qDAG/C/I,K,gGAAmB,SAACmC,GACnB,EAAKE,IAAMF,M,qDAGZnC,K,gGAAmB,WAClB,EAAKkJ,UAAU,EAAK/H,gB,oDAGrBnB,K,gGAAkB,WACjB,EAAKkJ,UAAU,EAAKvB,e,oDAGrB3H,K,gGAAkB,WACjB,IAAMwI,EAAY,EAAKA,YACL,OAAdA,GACJ,EAAKU,UAAUV,O,oDAGhBxI,K,gGAAkB,WACjB,IAAM0I,EAAY,EAAKA,YACL,OAAdA,GACJ,EAAKQ,UAAUR,O,yDAGhB1I,K,gGAAuB,SAACsJ,GACvB,IAAMC,EAAW,IAAO,EAAKX,IACzBY,EAAOC,KAAKpH,OAEH,SAAPqH,OACJ,IAAqB,IAAjB,EAAKb,QAAT,CACA,EAAKE,UAAYY,sBAAsBD,MACvC,IAAMrH,EAAMoH,KAAKpH,MACXuH,EAAQvH,EAAMmH,EACPD,GAATK,IACFJ,EAAOnH,EAAOuH,EAAQL,EACtB,EAAKT,KAAOe,KAAKC,MAAMF,EAAQL,EAAYK,EAAQL,GACnDD,MAGJI,O,GAIWrM,O,80BCrIA0M,IANF,SAAPA,KAAQ,GAAD,IAAGlC,EAAH,EAAGA,SAAab,EAAhB,gDACX,yBAAKA,M,mXAAK,EAAIC,QAAS,QAAWD,IAC/Ba,K,qBCJL,IAAMmC,EAAaC,UAMnBD,EAAW7L,OAAOC,QAAQ4L,I,kCCNT,SAAXE,GAAYC,EAAMC,GAAP,MAAiB,CAAED,OAAMC,QAEzB,SAAXC,GAAYlC,EAAGmC,EAAGC,EAAGC,EAAGC,GAC5B,IAAMC,EAAKJ,EAAInC,EACTwC,EAAKD,EAAKH,EACVK,EAAKD,EAAKxC,EAAIqC,EACpB,MAAO,CACLK,EAAGD,EAAKzC,EAAIsC,EACZK,IAAKJ,EAAKC,GAAMxC,EAAIyC,EACpBD,KACAC,MAqCkB,SAAhBG,GAAiBT,EAAGC,EAAGC,EAAGC,GAC9B,IAAIO,EACAC,EACAC,EACAC,EACJ,GAAU,IAANb,EACFU,OAAI7N,EACJ8N,EAAIV,EACJW,EAAKV,EACLW,EAAKV,OACA,GAAU,IAANA,EACTO,EAAI,EACJC,EAAIX,EACJY,EAAKX,EACLY,EAAKX,MACA,CAGL,IAAIY,EAAWf,GADfW,GAAMT,GADNU,EAAIX,GACW,EACYA,EAAGC,EAAGC,EAAGC,GAChCY,EAAID,EAASP,EACbS,EAAKF,EAASN,GAClBI,EAAKE,EAAST,GACdQ,EAAKC,EAASR,GAEd,IAAIW,EAAIF,EAAIf,EACRkB,EAAI3B,KAAK,IAALA,KAAK4B,IAAIF,GAAO,EAAI,GACtBG,EAAI7B,KAAK8B,KAAKJ,GAEZ,GADRA,GAAKD,EAAKhB,KAERkB,EAAI,kBAAoB3B,KAAK+B,IAAIJ,EAAG3B,KAAKgC,KAAKN,KAEhD,IAAIO,EAAKd,EAAIU,EAAIF,EACjB,GAAIM,IAAOd,EAAG,CAEZ,IADA,IAAMe,EAAM,EAAK,IAAMC,OAAOC,QAI5BZ,GADAD,EAAWf,GADXW,EAAIc,EACmBxB,EAAGC,EAAGC,EAAGC,IACnBI,EACbS,EAAKF,EAASN,GACdI,EAAKE,EAAST,GACdQ,EAAKC,EAASR,GAEEc,EAAIV,EAAbU,GADPI,EAAa,IAAPR,EAAWN,EAAIA,EAAKK,EAAIC,EAAMS,KAElClC,KAAK4B,IAAInB,GAAKU,EAAIA,EAAInB,KAAK4B,IAAIhB,EAAIO,KAErCE,IADAC,GAAMV,EAAIO,GACCR,GAAKQ,IAItB,IAAMkB,EAAQ,QACJ/O,IAAN6N,GACFkB,EAAMC,KAAKjC,GAASc,EAAG,IAEzB,IAAMoB,EAtFM,SAARC,MAAS/B,EAAGC,EAAGC,GACnB,IAAM8B,GAAK/B,EAAI,EACTc,EAAIiB,EAAIA,EAAIhC,EAAIE,EAClB+B,EAAK,EACLC,EAAK,EACLC,EAAK,EACLC,EAAK,EAET,GAAIrB,EAAI,EAAG,CACT,IAAML,EAAIsB,EAAIhC,EACRqC,EAAI9C,KAAKgC,MAAMR,GAAKf,EAG1BmC,EAFAF,EAAKvB,EAGL0B,IAFAF,EAAKG,OAGA,CAELD,EADAF,EAAK,EAEL,IAAMhB,EAAIc,EAAIzC,KAAK8B,KAAKW,GAAKzC,KAAKgC,KAAKR,GAGrCoB,EAFQ,GAANjB,GACFe,EAAK/B,EAAIF,GACHE,EAAIF,IAEViC,EAAK/B,EAAIgB,EACJA,EAAIlB,GAGb,MAAO,CACLJ,GAASqC,EAAIC,GACbtC,GAASuC,EAAIC,IAyDEL,CAAMpB,EAAGC,EAAIC,GAC9B,OAAOe,EAAMU,OAAOR,G,4GA+CPS,EAxCK,SAAdA,YAAe,GAAuB,IAArBC,EAAqB,EAArBA,GAAIC,EAAiB,EAAjBA,GAAIC,EAAa,EAAbA,GAAIC,EAAS,EAATA,GAIjC,GAAS,EAALH,GAAUA,EAAK,GAAU,EAALC,GAAUA,EAAK,EACrC,MAAMG,MAAM,2DAcJ,SAAJ3B,GAAKpD,GACT,IACM+D,EAAQnB,GAAcoC,EAAIC,EAAIC,GADxBlF,GASZ,OAPA+D,EAAMoB,OAAO,SAAA9B,GAAC,OACD,IAAXA,EAAEpB,MACoB,GAAtBoB,EAAErB,KAAKoD,QAAQ,KACf/B,EAAErB,KAAKoD,QAAQ,KAAO,IACrBrP,OAAOsP,GAAGhC,EAAErB,MAAO,KAGf+B,EAAM,GAAG/B,KAnBlB,IAAMgD,EAAK,EAAIL,EAAK,EAAIC,EAAK,EACvBK,GAAK,EAASN,EAAK,EAAIC,EACvBM,EAAK,EAAIP,EAETW,EAAK,EAAIT,EAAK,EAAIC,EAAK,EACvBS,GAAK,EAASV,EAAK,EAAIC,EACvBU,EAAK,EAAIX,EAqBf,MAAQ,CAAEzB,KAAGnD,EALH,SAAJA,EAAKD,GAET,OAtCU,SAARyF,MAASzF,EAAG8C,EAAGqB,EAAGuB,EAAGC,GAAb,OACX7C,EAAI,KAAH,IAAI9C,EAAK,GAAOmE,EAAI,KAAH,IAAInE,EAAK,GAAO0F,EAAI1F,EAAK2F,EAqCnCF,CADMrC,GAAEpD,GACIsF,EAAIC,EAAIC,EAjBlB,M,k7BCxHPI,G,eAUJ,kBAAY5L,EAAOgB,I,4GAAO,uNACxBvD,KAAKuC,MAAQA,EACbvC,KAAKuD,MAAQA,EACbvD,KAAKoO,SAAW,IAAIlG,IAAO,MAC3BlI,KAAKqO,UAAY,IAAInG,IAAO,O,yEAZ5B,MAAO,CAAC,QAAS,QAAS,WAAY,iB,6DAgBtC,MAAQ,CACN3F,MAAOvC,KAAKuC,MACZgB,MAAOvD,KAAKuD,MACZ6K,SAAUpO,KAAKoO,SAASzO,SACxB0O,UAAWrO,KAAKqO,UAAU1O,a,yCAId3B,GAAO,IACbuE,EAAsCvE,EAAtCuE,MAAOgB,EAA+BvF,EAA/BuF,MAAO6K,EAAwBpQ,EAAxBoQ,SAAUC,EAAcrQ,EAAdqQ,UAC1B1J,EAAW,IAAIwJ,SAAS5L,EAAOgB,GAKrC,OAJAoB,EAASyJ,SAASjG,UAAYiG,EAASjG,UACvCxD,EAASyJ,SAAShG,SAAWgG,EAAShG,SACtCzD,EAAS0J,UAAUlG,UAAYkG,EAAUlG,UACzCxD,EAAS0J,UAAUjG,SAAWiG,EAAUjG,SACjCzD,M,cAGF2J,KAAO,SAACjD,EAAGqB,GAAJ,OAAWrB,EAAE9I,MAAQmK,EAAEnK,O,EAE9BgM,YAAc,SAACC,EAAIC,GAAL,OACnBxB,EAAY,CACVC,GAAIsB,EAAGH,UAAUK,SAASnG,EAC1B6E,GAAIoB,EAAGH,UAAUK,SAASlG,EAC1B2E,GAAIsB,EAAGL,SAASM,SAASnG,EACzB8E,GAAIoB,EAAGL,SAASM,SAASlG,K,EAItBmG,YAAc,SAACH,EAAIC,EAAIlM,GAC5B,IAAMqM,EAAQT,EAASI,YAAYC,EAAIC,GACjCI,GAAatM,EAAQiM,EAAGjM,QAAUkM,EAAGlM,MAAQiM,EAAGjM,OAEhDuM,EAAaF,EAAMpG,EAAEqG,GAE3B,OADuBJ,EAAGlL,MAAQiL,EAAGjL,OAASuL,EAAcN,EAAGjL,O,qDA/ChEpD,K,+GACAA,K,kHACAA,K,mHACAA,K,iEAiDYgO,I,4qFCzDTY,G,wDAoBJ,2BAAqB,WAAPtQ,EAAO,EAAPA,K,0HAAO,sdA8IrBuQ,SAAW,SAACzL,GAAD,IAAQ0L,EAAR,uDAAoB,QAApB,OACT1L,EAAQ,IAAM,EAAKnG,OAAO6R,IA/IP,KAkJrBC,SAAW,SAAA3L,GAAK,OACdA,EAAQ,KAnJW,KAkMrB4L,cAAgB,SAAC5M,EAAOgC,GACtB,IAAM3G,EAAS2G,EAAUD,IAAI,SAAA7F,GAAG,OAAIA,EAAI8D,QAGxC,GAAI3E,EAAOwR,SAAS7M,GAElB,OAAOgC,EADO3G,EAAOyR,QAAQ9M,IACLgB,MAI1B3F,EAAO2O,KAAKhK,GACZ3E,EAAO0Q,KAAK,SAACjD,EAAGqB,GAAJ,OAAUrB,EAAIqB,IAC1B,IAAM4C,EAAQ1R,EAAOyR,QAAQ9M,GAG7B,GAAc,IAAV+M,EAAa,OAAO/K,EAAU,GAAGhB,MACrC,GAAI+L,IAAU1R,EAAOwL,OAAS,EAAG,OAAO7E,EAAUA,EAAU6E,OAAS,GAAG7F,MAGxE,IAAMgM,EAAShL,EAAU+K,EAAQ,GAC3BE,EAAQjL,EAAU+K,GACxB,OAAOnB,EAASQ,YAAYY,EAAQC,EAAOjN,IAtN3CvC,KAAKvB,IAAMA,E,mFAnBI,OAAO,K,4BACP,OAAO,K,gCAGH,OAAO,M,mCACJ,OAAO,I,qCAE7B,MAAO,CACLgR,IAAKxF,KAAKyF,MAAsB,IAAhBzF,KAAK0F,UACrBC,WAAY,GACZC,WAAY,K,sCAKd,MAAO,CAAC,IAAK,IAAK,QAAS,WAAY,YAAa,iB,iFAqBpD,MAAQ,CACNC,MAAO9P,KAAKoE,YAAYjG,KACxBoK,EAAGvI,KAAKuI,EACRC,EAAGxI,KAAKwI,EACRuH,MAAO/P,KAAK+P,MACZC,SAAUhQ,KAAKgQ,SACf5O,UAAWpB,KAAKoB,UAChBmD,UAAWjG,OAAO6E,QAAQnD,KAAKuE,WAAWnB,OACxC,SAACC,EAAD,GAAkC,0BAAxB4M,EAAwB,KAAlBC,EAAkB,KAGhC,OADA7M,EAAO4M,GAAQC,EAAa5L,IAAI,SAAAK,GAAQ,OAAIA,EAAShF,WAC9C0D,GACN,O,0CAmDSjG,GAChB4C,KAAK5C,OAASA,I,8DAId4C,KAAK0B,KAAKqO,MAAM/P,KAAKkP,SAASlP,KAAK+P,QACnC/P,KAAK0B,KAAKyO,OAAOnQ,KAAKgQ,Y,sDAGAI,EAAU7L,GAChCvE,KAAKuE,UAAL,iBACKvE,KAAKuE,UADV,mBAEG6L,EAAW7L,M,oCAIT6L,EAAU7N,E,KAAkD,IAAxB8N,EAAwB,6B,KAC3DC,GAD2D,6B,SAAnC/S,IACFyC,KAAKoQ,GAC3BG,EAAI,IAAIpC,EAAS5L,EAAO+N,GACxB/L,EAAY,GAAH,0BAAOvE,KAAKuE,UAAU6L,IAAtB,CAAiCG,IAGhD,GAFAhM,EAAU+J,KAAKH,EAASG,MAEnB+B,EAgBHrQ,KAAKwQ,gBAAgBJ,EAAU7L,OAhBZ,OACfkM,EACa,MAAbL,IAAoBK,EAAS,KAChB,MAAbL,IAAoBK,EAAS,KAEjC,IAAMC,EAAc1Q,KAAKyQ,GACnBE,EAAK,IAAIxC,EAAS5L,EAAOmO,GACzBE,EAAkB,GAAH,0BAAO5Q,KAAKuE,UAAUkM,IAAtB,CAA+BE,IACpDC,EAAgBtC,KAAKH,EAASG,MAE9BtO,KAAKuE,UAAL,iBACKvE,KAAKuE,WADV,qBAEG6L,EAAW7L,GAFd,kBAGGkM,EAASG,GAHZ,IASF,OAAOL,I,0CAGCH,EAAU7N,GAClB,IAAIgC,EAAY,mBAAIvE,KAAKuE,UAAU6L,IAGnC,GAFA7L,EAAYA,EAAUmJ,OAAO,SAAA6C,GAAC,OAAIA,EAAEhO,QAAUA,IAE7B,MAAb6N,EAAkB,CACpB,IAAIS,EAAa,mBAAI7Q,KAAKuE,UAAUiE,GACpCqI,EAAaA,EAAWnD,OAAO,SAAA6C,GAAC,OAAIA,EAAEhO,QAAUA,IAChDvC,KAAKuE,UAAL,iBACKvE,KAAKuE,UADV,CAEEgE,EAAGhE,EACHiE,EAAGqI,SAGL7Q,KAAKwQ,gBAAgBJ,EAAU7L,K,oCAY5BnH,QACeG,IAAhByC,KAAK5C,QAAsB4C,KAAK8Q,UAAU1T,GAE9C,IAAM2T,EAAc,CAClB5S,KAAM6B,KAAKvB,IACX2C,UAAWpB,KAAKoB,WAGW,mBAAlBpB,KAAKgR,UACdhR,KAAKgR,SAASD,QAGExT,IAAdyC,KAAK0B,MAAoB1B,KAAKiR,uB,0CAIlCjR,KAAK0B,KAAKvE,SACV6C,KAAKsC,OAAOtC,KAAK5C,QACjB4C,KAAK5C,OAAOoE,sBAAsBxB,Q,gCAG/BuC,GAAO,gBACQhF,IAAdyC,KAAK0B,MAETpD,OAAO6E,QAAQnD,KAAKuE,WAAW/F,QAAQ,YAA2B,0BAAzB4R,EAAyB,KAAf7L,EAAe,KAEhE,GAAiB,MAAb6L,EACJ,GAAiB,MAAbA,EAAkB,CAEpB,IAAMc,EAAa3M,EACb4M,EAAa,EAAK5M,UAAUiE,EAClC,GAA0B,IAAtB0I,EAAW9H,QAAsC,IAAtB+H,EAAW/H,OAAc,OACxD,IAAMgI,EAAS,EAAKjC,cAAc5M,EAAO2O,GACnCG,EAAS,EAAKlC,cAAc5M,EAAO4O,GACzC,EAAKzC,SAAW,CAAEnG,EAAG6I,EAAQ5I,EAAG6I,OAC3B,CAEL,GAAyB,IAArB9M,EAAU6E,OAAc,OAC5B,IAAM7F,EAAQ,EAAK4L,cAAc5M,EAAOgC,GACxC,EAAK6L,GAAY7M,O,+BA1JV,OAAOtG,IAAMC,QAAQoU,YAAYrJ,SAASjI,KAAKvB,O,4BAClD,OAAOuB,KAAKuR,I,iBAOhBhO,GACJvD,KAAK0B,KAAKgN,SAASnG,EAAIvI,KAAKgP,SAASzL,GACrCvD,KAAKuR,GAAKhO,I,4BARF,OAAOvD,KAAKwR,I,iBAWhBjO,GACJvD,KAAK0B,KAAKgN,SAASlG,EAAIxI,KAAKgP,SAASzL,EAAO,UAC5CvD,KAAKwR,GAAKjO,I,mCAZK,MAAO,CAAEgF,EAAGvI,KAAKuI,EAAGC,EAAGxI,KAAKwI,I,oBAetB,IAARD,EAAQ,EAARA,EAAGC,EAAK,EAALA,EAChBxI,KAAKuI,EAAIA,EACTvI,KAAKwI,EAAIA,I,gCAhBG,OAAOxI,KAAKyR,Q,iBAmBhBlO,GACR,GAAmB,IAAfvD,KAAK+P,OAAyB,IAAVxM,EACtBvD,KAAK0B,KAAKvE,SACV6C,KAAKsC,OAAOtC,KAAK5C,QACjB4C,KAAK0B,KAAKqO,MAAM/P,KAAKkP,SAAS3L,QACzB,CACL,IAAMmO,EAAUnO,EAAQvD,KAAK+P,MAC7B/P,KAAK0B,KAAKqO,MAAM2B,GAElB1R,KAAKyR,OAASlO,I,mCA3BC,OAAOvD,KAAK2R,W,iBA8BhBpO,GACX,IAAMqO,EAAWrO,EAAQvD,KAAKgQ,SAC9BhQ,KAAK0B,KAAKyO,OAAOyB,GACjB5R,KAAK2R,UAAYpO,I,oCAhCD,OAAOvD,KAAK6R,Y,iBAmChBtO,GACZvD,KAAK0B,KAAKN,UAAYmC,EACtBvD,KAAK6R,WAAatO,M,uCA1EnBpD,K,0HACAA,K,qFAAgB4O,EAAe3D,K,4DAC/BjL,K,qFAAgB4O,EAAehC,K,gEAC/B5M,K,qFAAoB4O,EAAe+C,S,mEACnC3R,K,qFAAuB4O,EAAegD,Y,oEACtC5R,K,qFAAwB4O,EAAeiD,c,mEACvC7R,K,oFAAuB,CACtBoI,EAAGpI,YAAW,IACdqI,EAAGrI,YAAW,IACd4P,MAAO5P,YAAW,IAClB6P,SAAU7P,YAAW,Q,iEAmEtBC,K,gJAIAA,K,sJAKAA,K,+EAiIY2O,I,+9DC/OTkD,G,63CAAelD,G,qKAOjB,gGAEEmD,OAAQlS,KAAKkS,W,wCAWRC,GAAW,MACDnS,KAAK0O,SAAdnG,EADU,EACVA,EAAGC,EADO,EACPA,EACX,IAAIvL,IAAM6D,KAAKmR,OAAf,uBACKE,EADL,CAEEC,OAAQ,CAACpS,KAAKgP,SAASzG,GAAIvI,KAAKgP,SAASxG,EAAG,WAC5C0J,OAAQlS,KAAKgP,SAAShP,KAAKkS,QAAU,O,iCAZ1B,OAAOlS,KAAKqS,S,iBAChB9O,GAETvD,KAAKqS,QAAU9O,EACfvD,KAAKsS,c,kCAfe,OAAO,O,gCAE5BnS,K,qFAAqB8R,EAAOM,U,GA0BhBN,I,uuFC9BTlR,G,2iCAAkBgO,G,iLAWpB,wHAEE7N,MAAOlB,KAAKkB,MACZC,OAAQnB,KAAKmB,OACb+Q,OAAQlS,KAAKkS,W,wCA0BRC,GAAW,MACDnS,KAAK0O,SAAdnG,EADU,EACVA,EAAGC,EADO,EACPA,EACLgK,EAAOxS,KAAKgP,SAASzG,GACrBkK,EAAOzS,KAAKgP,SAASxG,EAAG,UACxBkK,EAAW1S,KAAKgP,SAAShP,KAAKkB,OAC9ByR,EAAY3S,KAAKgP,SAAShP,KAAKmB,QAErC,IAAIlE,IAAM6D,KAAKC,UAAf,0BACKoR,EADL,CAEES,MAAO,CAACJ,EAAQE,EAAW,EAAID,EAAQE,EAAY,GACnDE,KAAM,CAACH,EAAUC,GACjBT,OAASlS,KAAKkS,OAAS,KAAQjI,KAAK+B,IAAI0G,EAAUC,GAAa,Q,gCAjCrD,OAAO3S,KAAK8S,Q,iBAIhBvP,GAERvD,KAAK8S,OAASvP,EACdvD,KAAKsS,a,iCANQ,OAAOtS,KAAK+S,S,iBAShBxP,GAETvD,KAAK+S,QAAUxP,EACfvD,KAAKsS,a,iCAXQ,OAAOtS,KAAKqS,S,iBAchB9O,GAETvD,KAAKqS,QAAU9O,EACfvD,KAAKsS,c,iCApCc,OAAO,K,iCACN,OAAO,K,iCACP,OAAO,M,kCAE5BnS,K,qFAAoBY,EAAUiS,S,4DAC9B7S,K,qFAAqBY,EAAUkS,U,4DAC/B9S,K,qFAAqBY,EAAUwR,U,GAiDnBxR,I,g1CCWAmS,EAnEdnN,Y,kZAECoN,OAAS,SAACpU,GACRA,EAAMqU,iBACN,EAAKnN,MAAMoN,QAAQtU,EAAMgD,cAAcxB,K,EAGzC+S,UAAY,WAAM,IACRC,EAAa,EAAKtN,MAAlBsN,SACFC,EAAS,IAAIvB,EAAO,CACxBxT,IAAK,UAAF,OAAYH,OAAOC,KAAKgV,GAAUnK,UAEvC,EAAKnD,MAAMwN,IAAID,I,EAGjBE,aAAe,WAAM,IACXH,EAAa,EAAKtN,MAAlBsN,SACFI,EAAO,IAAI5S,EAAU,CACzBtC,IAAK,QAAF,OAAUH,OAAOC,KAAKgV,GAAUnK,UAErC,EAAKnD,MAAMwN,IAAIE,I,+SAnBU3N,gB,qMAsBlB,IACC/C,EAASjD,KAAKiG,MAAdhD,KAER,OACE,yBAAKmE,MAAO,CAAEC,QAAS,OAAQuM,QAAS,uBACtC,qCACEjY,KAAK,SACL4E,GAAG,WACHsT,QAAS7T,KAAKmT,QACA,aAATlQ,EAAsB,CAAE6Q,QAAS,QAAW,IAEjD,mCAEF,4BACEnY,KAAK,SACL4E,GAAG,QACHsT,QAAS7T,KAAKmT,QAEd,mCAEF,qCACExX,KAAK,SACL4E,GAAG,SACHsT,QAAS7T,KAAKmT,QACA,WAATlQ,EAAoB,CAAE6Q,QAAS,QAAW,IAE/C,yBAAK1M,MAAO,CAAE2M,UAAW,oBAAzB,MAWF,4BAAQpY,KAAK,SAASkY,QAAS7T,KAAKsT,WAApC,YACA,4BAAQ3X,KAAK,SAASkY,QAAS7T,KAAK0T,cAApC,oB,qnCCMOM,EAtEdjO,Y,sYAECkO,MAAQ,CACNC,WAAY,G,EAUdC,SAAW,SAACpV,GACV,EAAKqV,SAAS,CAAEF,WAAYnV,EAAME,OAAOsE,S,EAG3C8Q,OAAS,WAAM,MACe,EAAKpO,MAAzB1C,EADK,EACLA,MAAO+Q,EADF,EACEA,SACPJ,EAAe,EAAKD,MAApBC,WAEFK,EAAcvN,SAASkN,GACzB5U,EAASiE,EACT6I,OAAOoI,UAAUD,KACnBjV,EAASiV,GAGXD,EAAShV,GACT,EAAK8U,SAAS,CAAEF,WAAY5U,K,EAG9BmV,cAAgB,SAAC1V,GAAU,IACjBN,EAAkBM,EAAlBN,IAAKiW,EAAa3V,EAAb2V,SACD,YAARjW,GAAqBiW,EACvB,EAAKC,YAAY,IACA,YAARlW,EACT,EAAKkW,YAAY,GACA,cAARlW,GAAuBiW,EAChC,EAAKE,YAAY,IACA,cAARnW,GACT,EAAKmW,YAAY,I,EAIrBC,SAAW,SAAAC,GAAS,OAAI,SAACC,GAAW,MACN,EAAK9O,MAAzB1C,EAD0B,EAC1BA,MAAO+Q,EADmB,EACnBA,SACTU,EAAOF,EAAUvR,EAAOwR,GAC9BT,EAASU,GACT,EAAKZ,SAAS,CAAEF,WAAYc,M,EAI9BL,YAAc,EAAKE,SAAS,SAACxJ,EAAGqB,GAAJ,OAAUrB,EAAIqB,I,EAC1CkI,YAAc,EAAKC,SAAS,SAACxJ,EAAGqB,GAAJ,OAAUrB,EAAIqB,I,ySApDjB1G,gB,mNAKL,IACVzC,EAAUvD,KAAKiG,MAAf1C,MACJA,IAAUvD,KAAKiU,MAAMC,YACvBlU,KAAKoU,SAAS,CAAEF,WAAY3Q,M,sCA8CvB,IACC2Q,EAAelU,KAAKiU,MAApBC,WACR,OACE,2BACEvY,KAAK,OACLyL,MAAO,CAAElG,MAAO,OAAQ+T,YAAa,OAAQC,UAAW,UACxD3R,MAAO2Q,EACPC,SAAUnU,KAAKmU,SACfgB,UAAWnV,KAAKyU,cAChBJ,OAAQrU,KAAKqU,a,ioCC3CP,SAmBCe,GAnBA,GAAoC,IAAlCnN,EAAkC,EAAlCA,SAAUoN,EAAwB,EAAxBA,KAAMC,EAAkB,EAAlBA,YACzBC,EAAcC,iBAAO,MAO3B,OACW,IAATH,EAAiB,KACf,yBAAKjO,MAAOA,EAAMqO,UAAW5B,QAPb,SAAd6B,YAAe3W,GACfwW,EAAYvR,QAAQ2R,SAAS5W,EAAME,SACvCqW,MAMI,yBAAKM,IAAKL,EAAanO,MAAOA,EAAM5K,MAClC,yBAAK4K,MAAOA,EAAMyO,SAAU5N,K,MCoDvB6N,EAjFd/P,Y,kZAECgQ,eAAiB,SAAA3F,GAAQ,OAAI,SAAC7M,GAAU,MAChB,EAAK0C,MAAnBvE,EAD8B,EAC9BA,KAAMe,EADwB,EACxBA,IAEd,GAAIf,EAAK6C,UAAU6L,GAAUhH,OAAQ,CACnC,IAAM4M,EAAmBtU,EAAK6C,UAAU6L,GAAU6F,KAAK,SAAAtR,GAAQ,OAAIA,EAASpC,QAAUE,IAClFuT,EACFA,EAAiBzS,MAAQA,EAEzB7B,EAAKwU,OAAL,UAAe9F,GAAY3N,EAAKc,QAGlC7B,EAAK0O,GAAY7M,I,+SAZMyC,gB,mNAgBX,IACNtE,EAAS1B,KAAKiG,MAAdvE,KACFyU,EAAYzU,EAAK0C,YAAYjG,KAEnC,MAAkB,WAAdgY,EAEA,kBAAC,IAAMtO,SAAP,KACE,yCACA,yBAAKT,MAAO,CAAEC,QAAS,SACrB,kBAAC,EAAD,CAAc9D,MAAO7B,EAAKwQ,OAAQoC,SAAUtU,KAAK+V,eAAe,cAMtD,cAAdI,EAEA,kBAAC,IAAMtO,SAAP,KACE,uCACA,yBAAKT,MAAO,CAAEC,QAAS,SACrB,kBAAC,EAAD,CAAc9D,MAAO7B,EAAKR,MAAOoT,SAAUtU,KAAK+V,eAAe,WAC/D,kBAAC,EAAD,CAAcxS,MAAO7B,EAAKP,OAAQmT,SAAUtU,KAAK+V,eAAe,mBANxE,I,sCAaO,IACCrU,EAAS1B,KAAKiG,MAAdvE,KAER,YAAanE,IAATmE,EAEA,wBAAI0F,MAAO,CAAEwM,QAAS,OAAQvS,MAAO,aAArC,iCAOF,yBAAK+F,MAAO,CAAEwM,QAAS,SACrB,4BAAKlS,EAAKjD,KACV,2CACA,yBAAK2I,MAAO,CAAEC,QAAS,SACrB,kBAAC,EAAD,CAAc9D,MAAO7B,EAAK6G,EAAG+L,SAAUtU,KAAK+V,eAAe,OAC3D,kBAAC,EAAD,CAAcxS,MAAO7B,EAAK8G,EAAG8L,SAAUtU,KAAK+V,eAAe,QAG7D,wCACA,yBAAK3O,MAAO,CAAEC,QAAS,SACrB,kBAAC,EAAD,CAAc9D,MAAO7B,EAAKqO,MAAOuE,SAAUtU,KAAK+V,eAAe,YAGjE,2CACA,yBAAK3O,MAAO,CAAEC,QAAS,SACrB,kBAAC,EAAD,CAAc9D,MAAO7B,EAAKsO,SAAUsE,SAAUtU,KAAK+V,eAAe,eAGnE/V,KAAKoW,qB,sBDhFRhP,EAAQ,CACZqO,UAAW,CACT/G,SAAU,QACV2H,OAAQ,IACRC,KAAM,EACNC,IAAK,EACLrV,MAAO,OACPC,OAAQ,OACRqV,SAAU,OACVjP,gBAAiB,sBAEnB/K,KAAM,CACJ+K,gBAAiB,UACjBE,OAAQ,WACRgP,OAAQ,iBACRvV,MAAO,OAET2U,QAAS,CACPjC,QAAS,S,6nCEgCE8C,EA/Cd3Q,Y,wZAEC3H,QAAU,SAACW,GACS,EAAKkH,MAAfP,MACFxI,QAAQkB,QAAQW,EAAME,OAAOsE,Q,EAGrCoT,UAAY,SAAC5X,GAAU,IACb2G,EAAU,EAAKO,MAAfP,MACF0D,EAASpC,SAASjI,EAAME,OAAOsE,OACrCmC,EAAMrI,UAAUsZ,UAAUvN,I,EAG5BwN,SAAW,SAAC7X,GACQ,EAAKkH,MAAfP,MACFtI,OAAOiE,MAAQtC,EAAME,OAAOsE,O,EAGpCsT,WAAa,kBAAM,EAAK5Q,MAAMP,MAAMtI,OAAOiW,QAAQ,W,kTAjBvBrN,gB,yMAmBnB,IACCN,EAAU1F,KAAKiG,MAAfP,MAER,OACE,kBAAC,GAAD,CAAO2P,KAAM3P,EAAM9G,KAAKkF,SAAUwR,YAAatV,KAAK6W,YAClD,gDAEA,+CACA,2BAAOlb,KAAK,OAAO4H,MAAOmC,EAAMxI,QAAQiB,KAAMgW,SAAUnU,KAAK5B,UAE7D,mDACA,2BAAOzC,KAAK,SAASmb,KAAK,IAAIvT,MAAOmC,EAAMrI,UAAUO,OAAQuW,SAAUnU,KAAK2W,YAE5E,oDACA,4BAAQpT,MAAOmC,EAAMtI,OAAOiE,MAAO8S,SAAUnU,KAAK4W,UAChD,4BAAQrT,MAAM,WAAd,SACA,4BAAQA,MAAM,WAAd,UAGF,yBAAK6D,MAAO,CAAEC,QAAS,OAAQ0P,cAAe,gBAC5C,4BAAQpb,KAAK,SAASkY,QAAS7T,KAAK6W,YAApC,e,snCCZKG,EA5BdjR,Y,sYAEC8Q,WAAa,kBAAM,EAAK5Q,MAAMP,MAAMtI,OAAOiW,QAAQ,W,ySAD1BrN,gB,6LAGhB,IACCN,EAAU1F,KAAKiG,MAAfP,MACA9G,EAAyB8G,EAAzB9G,KAAM1B,EAAmBwI,EAAnBxI,QAASqC,EAAUmG,EAAVnG,MAEvB,OACE,kBAAC,GAAD,CAAO8V,KAAMzW,EAAK5B,MAAOsY,YAAatV,KAAK6W,YACzC,+CAEA,sDAEE,gCAAS3Z,EAAQiB,MAFnB,mFAOA,yBAAKiJ,MAAO,CAAEC,QAAS,OAAQ4P,eAAgB,aAC7C,4BAAQtb,KAAK,SAASkY,QAAS7T,KAAK6W,YAApC,UACA,4BAAQlb,KAAK,SAASkY,QAAStU,GAA/B,gB,6CClBK2X,GALD,CACZjF,SACAlR,a,i8ECWIoW,GADLpR,Y,oXAECkO,MAAQ,CACNmD,OAAO,EACPC,iBAAiB,G,EAGnBC,qB,IAmEA1P,QAAU,WACW,EAAK3B,MAAMP,MAAtBtI,OACDiF,QACP,EAAK+R,SAAS,CAAEgD,OAAO,K,EAGzB3D,IAAM,SAAC/R,GACc,EAAKuE,MAAMP,MAAtBtI,OACDqW,IAAI/R,I,gSAjFSsE,gB,uMAQF,aACUhG,KAAKiG,MAAMP,MAA/BtI,EADU,EACVA,OAAQF,EADE,EACFA,QACVuY,EAAYvZ,SAASuE,eAAe,mBAC1C9D,WAAW,WACT,IAAMuE,EAAQ+I,KAAKC,MAAMuL,EAAU8B,aAAe,GAC5CpW,EAAS8I,KAAKC,MAAO,EAAI,GAAMhJ,GACrC9D,EAAOE,QAAQ4D,EAAOC,IACrB,GAEiB,WAAhB/D,EAAO6F,MACTtG,WAAW,WACTS,EAAOiW,aAAQ9V,GACfH,EAAOiW,QAAQ,WACd,IAGLrT,KAAKsX,gBAAkBhS,YAAQ,WAC7B,EAAK8O,SAAS,CAAEiD,gBAAiBG,QAAQta,EAAQwB,kB,4DAIlC+Y,EAAWC,GAAW,WACjCC,EAAsBD,EAAUL,gBADC,EAEXrX,KAAKiG,MAAMP,MAA/BtI,EAF+B,EAE/BA,OAAQF,EAFuB,EAEvBA,QAFuB,EAGJ8C,KAAKiU,MAAhCmD,EAH+B,EAG/BA,MAAOC,EAHwB,EAGxBA,iBAEZna,EAAQgD,aAENkX,IAAUO,GAAuBN,GACjCA,IAAoBK,EAAUN,OAASA,KAG1C9Y,OAAO6E,QAAQjG,EAAQwB,YAAYF,QAAQ,YAAwB,mCAAtBoZ,EAAsB,KAAbC,EAAa,KAClD1B,EAAwC0B,EADU,MACvCtT,EAA6BsT,EAA7BtT,UAAcuT,EADyB,yBACVD,EADU,uBAG3DpW,EAAa,IAAIyV,GAAMf,GAAW,CAAE1X,IAAKmZ,IAC/Cxa,EAAOqW,IAAIhS,GAEX,IAAMsW,EAAiBzZ,OAAO6E,QAAQoB,GACnCnB,OAAO,SAAC4U,EAAD,GAAyC,mCAAhCC,EAAgC,KAAlB/H,EAAkB,KAG/C,OADA8H,EAAMC,GAAgB/H,EAAa5L,IAAI6J,EAAS+J,UACzCF,GACN,IACLvW,EAAW8C,U,yZAAX,IACK,EAAKA,UADV,GAEKwT,GAGLzZ,OAAO6E,QAAQ2U,GAAYtZ,QAAQ,YAAkB,mCAAhBC,EAAgB,KAAX8E,EAAW,KACnD9B,EAAWhD,GAAO8E,MAItBrG,EAAQgD,YAAa,K,kEAIF,MACOF,KAAKiG,MAAMP,MAA/BxI,EADa,EACbA,QADa,EACJE,OACVwF,YACP1F,EAAQF,QACRgD,KAAKsX,oB,sCAcE,MACuBtX,KAAKiG,MAAMP,MAAjCtI,EADD,EACCA,OAAQC,EADT,EACSA,UACR+Z,EAAUpX,KAAKiU,MAAfmD,MACR,OACE,kBAAC,IAAMvP,SAAP,KACE,kBAAC,EAAD,CAAiBnC,MAAO1F,KAAKiG,MAAMP,QACnC,kBAAC,EAAD,CAAcA,MAAO1F,KAAKiG,MAAMP,QAChC,kBAACyE,EAAA,EAAD,CACEhE,iBAAiB,YACjBgS,oBAAoB,cAEpB,kBAACnQ,GAAA,EAAD,CAAUoQ,SAAS,gBAAgB7X,GAAG,kBAAkBqT,QAAQ,OAAOyE,UAAU,UAC/E,kBAAC3Q,EAAA,EAAD,CAAQtK,OAAQA,EAAQC,UAAWA,EAAWuK,QAAS5H,KAAK4H,WAE9D,kBAACI,GAAA,EAAD,CAAUoQ,SAAS,gBAAgB7Q,gBAAgB,sBACjD,kBAAC,EAAD,CAAgB7F,KAAMtE,EAAO8F,SAAUT,IAAKpF,EAAUoF,OAExD,kBAACuF,GAAA,EAAD,CAAUoQ,SAAS,gBAAgB7Q,gBAAgB,sBAC/C6P,GACA,kBAAC,EAAD,CACE7D,SAAUnW,EAAOuB,YACjB8U,IAAKzT,KAAKyT,IACVxQ,KAAM7F,EAAO6F,KACboQ,QAASjW,EAAOiW,iB,iBAUjB8D,Q,8iCCjIT9W,EADL0F,Y,wfACoBC,gB,yKAEjBhG,KAAKsY,wB,4DAGYb,QACOla,IAApBka,EAAUvW,OACZlB,KAAKsY,wB,gEAIa,MACOtY,KAAKiG,MAAxB/E,EADY,EACZA,MAAO4G,EADK,EACLA,aACDvK,IAAV2D,GACF4G,M,sCAIK,MACuB9H,KAAKiG,MAA3B1F,EADD,EACCA,GAAIW,EADL,EACKA,MAAOC,EADZ,EACYA,OACnB,YAAc5D,IAAV2D,EAA4B,KAE9B,4BACEkG,MAAO,CAAEC,QAAS,SAClB9G,GAAIA,EACJW,MAAOA,EACPC,OAAQA,Q,cAMDd,O,wjCCrBTkY,E,0VACJC,iBAAmB,WAAM,IACftb,EAAY,EAAK+I,MAAMP,MAAvBxI,QACRA,EAAQzB,SAASyB,EAAQuC,S,+QAHJuG,gB,uJAMd,IACC9I,EAAY8C,KAAKiG,MAAMP,MAAvBxI,QAER,OACE,kBAAC,IAAD,CACEiJ,iBAAiB,cACjBgS,oBAAoB,OAEpBM,aAAa,UAOb,kBAAC,IAAD,CAAUJ,UAAU,OAClB,4BAAQ1c,KAAK,SAASkY,QAAS7T,KAAKwY,kBAApC,2BAEF,kBAAC,IAAD,CAAUH,UAAU,UAClB,2BAAOK,QAAQ,cAActR,MAAO,CAAEC,QAAS,QAASnG,MAAO,UAA/D,4BACA,2BAAOvF,KAAK,OAAO4E,GAAG,cAAc4T,SAAUjX,EAAQ4B,aAAcsI,MAAO,CAAElG,MAAO,YAEtF,kBAAC,IAAD,KACE,4BAAQvF,KAAK,SAASkY,QAAS3W,EAAQ2C,SAAvC,sC,cAOK0Y,O,qBCnDflS,EAAOsS,QAAU,IAA0B,gB,qxCCKrCC,E,sWACJC,SAAW,SAAC9Z,GACVA,EAAMqU,iBACW,EAAKnN,MAAdrH,KACHC,IAAIE,EAAME,OAAO6Z,YAAYC,gB,mRAJT/S,gB,2JAOlB,IACChC,EAAYhE,KAAKiG,MAAMrH,KAAvBoF,QACR,OACE,kBAAC,IAAD,CAAMmU,oBAAoB,kBAAkBa,aAAa,gCACvD,kBAAC,IAAD,CAAU3R,QAAQ,OAAO4R,WAAW,SAASR,aAAa,UACxD,qCACE9c,KAAK,SACLyL,MAAO,CAAEK,OAAQ,OACjBoM,QAAS7T,KAAK6Y,UACG,UAAZ7U,EAAsB,CAAE8P,QAAS,QAAW,IAJnD,UASF,kBAAC,IAAD,CAAUzM,QAAQ,OAAO4R,WAAW,SAASR,aAAa,UACxD,qCACE9c,KAAK,SACLyL,MAAO,CAAEK,OAAQ,OACjBoM,QAAS7T,KAAK6Y,UACG,YAAZ7U,EAAwB,CAAE8P,QAAS,QAAW,IAJrD,YASF,kBAAC,IAAD,CAAUzM,QAAQ,OAAO4R,WAAW,SAASR,aAAa,UACxD,qCACE9c,KAAK,SACLyL,MAAO,CAAEK,OAAQ,OACjBoM,QAAS7T,KAAK6Y,UACG,SAAZ7U,EAAqB,CAAE8P,QAAS,QAAW,IAJlD,SASF,kBAAC,IAAD,CAAUzM,QAAQ,OAAO4R,WAAW,SAASR,aAAa,UACxD,qCACE9c,KAAK,SACLyL,MAAO,CAAEK,OAAQ,OACjBoM,QAAS7T,KAAK6Y,UACG,WAAZ7U,EAAuB,CAAE8P,QAAS,QAAW,IAJpD,gB,kBAcK8E,O,miCC0JAM,E,WAlNb,sBAAYC,EAAWC,EAAgBC,EAAeC,GAAQ,Y,4GAAA,yBAU9DC,UAAY,SAAChZ,GACX,IAAMC,EAAUtE,SAASuE,eAAeF,GACxC,EAAKC,QAAUA,EACf,EAAKvD,MAAMyD,MAAMF,IAb2C,KAoL9DgZ,aAAe,kBACb,EAAKC,uBAAuB,EAAKL,eAAe/K,UAAUK,WArLE,KAwL9DgL,YAAc,kBACZ,EAAKD,uBAAuB,EAAKJ,cAAcjL,SAASM,WAxLxD1O,KAAKmZ,UAAYA,EACjBnZ,KAAKoZ,eAAiBA,EACtBpZ,KAAKqZ,cAAgBA,EACrBrZ,KAAKsZ,OAASA,EACdtZ,KAAK/C,MAAQ,IAAIA,IAAM0c,WAEvB3Z,KAAKQ,aAAUjD,E,kKAUXyC,KAAK/C,MAAMC,UACb8C,KAAK/C,MAAMC,QAAQF,QACnBgD,KAAK/C,MAAMC,QAAQC,Y,kCAIhB,WAEL6C,KAAK4T,QAAU,GACf5T,KAAKkB,MAAQlB,KAAKmZ,UAA4B,EAAfnZ,KAAK4T,QAH/B,IAIG1S,EAAmBlB,KAAnBkB,MAAO0S,EAAY5T,KAAZ4T,QAET5S,EAAU,CAAC4S,EAASA,GACpBgG,EAAW,CAAC1Y,EAAQ0S,EAASA,GAC7BiG,EAAa,CAACjG,EAAS1S,EAAQ0S,GAE/BkG,EAAU5Y,EAAQgH,IAAO6R,KACzB3H,EAASpS,KAAKmZ,UAAY,EAGhC,IAAInZ,KAAK/C,MAAM6D,KAAKC,UAAU,CAC5BC,QAAS,CAAC,EAAG,GACbC,YAAa,CAACjB,KAAKmZ,UAAWnZ,KAAKmZ,WACnC/X,UAAW,uBAab,IATA,IAAM4Y,EAAW,IAAIha,KAAK/C,MAAMgd,iBAC9B,IAAIja,KAAK/C,MAAM6D,KAAKoZ,KAAK,CACvBC,KAAM,CAAC,EAAG,GACVC,GAAI,CAAC,EAAGpa,KAAKmZ,WAEbkB,YAAa,qBACbC,YAAa,KAGRC,EAAI,EAAGA,GAAKrS,IAAO6R,KAAMQ,GAAK,EAAG,CACxC,IAAMC,EAAS5G,EAAU,EAAKkG,EAAUS,EACxCP,EAASS,MAAM,IAAIza,KAAK/C,MAAMyd,MAAMF,EAAQpI,IAC5B4H,EAASS,MAAM,IAAIza,KAAK/C,MAAMyd,MAAMtI,EAAQoI,IACpDrK,OAAO,IAIjBnQ,KAAK4O,MAAQ,IAAI5O,KAAK/C,MAAM6D,KAAKoZ,KAAK,CAEpCG,YAAa,oBACbC,YAAa,EACbH,KAAM,IAAIna,KAAK/C,MAAMyd,MAAMb,GAC3BO,GAAI,IAAIpa,KAAK/C,MAAMyd,MAAMd,KAE3B5Z,KAAK2a,wBAGL,IAAMC,EAAc,CAElBP,YAAa,oBACbC,YAAa,GAETO,EAAqB,IAAI7a,KAAK/C,MAAM6D,KAAKoZ,KAApB,iBACtBU,EADsB,CAEzBT,KAAMN,EACNO,GAAIpa,KAAKwZ,kBAELsB,EAAoB,IAAI9a,KAAK/C,MAAM6D,KAAKoZ,KAApB,iBACrBU,EADqB,CAExBT,KAAMna,KAAK0Z,cACXU,GAAIR,KAIAmB,EAAgB,IAAI/a,KAAK/C,MAAMgd,iBACnC,IAAIja,KAAK/C,MAAM6D,KAAKmR,OAAO,CACzBW,MAAO5R,EACPkR,OAAQ,EAERmI,YAAa,oBACbC,YAAa,EACblZ,UAAW,IAAIpB,KAAK/C,MAAM+d,MAAM,EAAG,QAGjCC,EAAmB,IAAIjb,KAAK/C,MAAMgd,iBACtC,IAAIja,KAAK/C,MAAM6D,KAAKC,UAAU,CAC5B6R,MAAO,CAAC,IAAK,KACbC,KAAM,CAAC,GAAI,IAEXzR,UAAW,uBAGf6Z,EAAiBR,MAAMZ,GACvBoB,EAAiBR,MAAMb,GACvB,IAAMJ,EAAeuB,EAAcN,MAAMza,KAAKwZ,gBACxCE,EAAcqB,EAAcN,MAAMza,KAAK0Z,eAG7CF,EAAa0B,aAAe,WAC1B,EAAK1a,QAAQ4G,MAAM+T,OAAS,WAE9B3B,EAAa4B,aAAe,WAC1B,EAAK5a,QAAQ4G,MAAM+T,OAAS,WAE9B3B,EAAa6B,YAAc,SAACtc,GAC1B,EAAKyB,QAAQ4G,MAAM+T,OAAS,UAC5B,IAAMG,EAAYvc,EAAM6T,MAAM2I,SAAS/B,EAAa9K,UAE9C8M,EAAUvR,KAAK4B,IAAIyP,EAAU/S,IAAOuR,EAAU,EAC9C2B,EAAUxR,KAAK4B,IAAIyP,EAAU9S,IAAOsR,EAAU,EACpD,GAAI0B,GAAWC,EAAS,CACtB,IAAMC,EAAQzR,KAAK8B,KAAKuP,EAAU/S,GAC5BoT,EAAQ1R,KAAK8B,KAAKuP,EAAU9S,GAC5BoT,EAAcpC,EAAa9K,SAAS+E,IAAI,CAC5ClL,EAAGmT,EAAQ5B,EAAU0B,EACrBhT,EAAGmT,EAAQ7B,EAAU2B,IAGvBjC,EAAa9K,SAAWkN,EACxBf,EAAmBgB,YAAYjJ,MAAQgJ,EACvC,EAAKtC,OAAO,MAAO,CACjBnR,UAAWuT,EAAQxT,IAAO6R,KAAOyB,EACjCpT,UAAW,EAAIuT,EAAQzT,IAAO6R,KAAO0B,IAEvC,EAAKd,0BAGTnB,EAAasC,UAAY,WACvB,EAAKtb,QAAQ4G,MAAM+T,OAAS,WAG9BzB,EAAYwB,aAAe,WACzB,EAAK1a,QAAQ4G,MAAM+T,OAAS,WAE9BzB,EAAY0B,aAAe,WACzB,EAAK5a,QAAQ4G,MAAM+T,OAAS,WAE9BzB,EAAY2B,YAAc,SAACtc,GACzB,EAAKyB,QAAQ4G,MAAM+T,OAAS,UAC5B,IAAMG,EAAYvc,EAAM6T,MAAM2I,SAAS7B,EAAYhL,UAE7C8M,EAAUvR,KAAK4B,IAAIyP,EAAU/S,IAAOuR,EAAU,EAC9C2B,EAAUxR,KAAK4B,IAAIyP,EAAU9S,IAAOsR,EAAU,EACpD,GAAI0B,GAAWC,EAAS,CACtB,IAAMC,EAAQzR,KAAK8B,KAAKuP,EAAU/S,GAC5BoT,EAAQ1R,KAAK8B,KAAKuP,EAAU9S,GAC5BoT,EAAclC,EAAYhL,SAAS+E,IAAI,CAC3ClL,EAAGmT,EAAQ5B,EAAU0B,EACrBhT,EAAGmT,EAAQ7B,EAAU2B,IAGvB/B,EAAYhL,SAAWkN,EACvBd,EAAkBiB,aAAanJ,MAAQgJ,EACvC,EAAKtC,OAAO,KAAM,CAChBnR,WAAY,EAAIuT,EAAQxT,IAAO6R,KAAOyB,EACtCpT,SAAUuT,EAAQzT,IAAO6R,KAAO0B,IAElC,EAAKd,0BAGTjB,EAAYoC,UAAY,WACtB,EAAKtb,QAAQ4G,MAAM+T,OAAS,a,oEAaTa,GACrB,MAAQ,CACNA,EAAezT,EAAIvI,KAAKkB,MAAQlB,KAAK4T,QAErC5T,KAAKkB,MAAS8a,EAAexT,EAAIxI,KAAKkB,MAASlB,KAAK4T,W,oEAKlD5T,KAAK4O,QACP5O,KAAK4O,MAAMmN,aAAa1N,UAAY,IAAIrO,KAAK/C,MAAMyd,MACjD1a,KAAKoZ,eAAe/K,UAAUlG,UAAYnI,KAAKkB,MAAQgH,IAAOO,KAC7D,EAAIzI,KAAKoZ,eAAe/K,UAAUjG,SAAWpI,KAAKkB,MAAQgH,IAAOO,KAEpEzI,KAAK4O,MAAMiN,YAAYzN,SAAW,IAAIpO,KAAK/C,MAAMyd,OAC9C,EAAI1a,KAAKqZ,cAAcjL,SAASjG,UAAYnI,KAAKkB,MAAQgH,IAAOO,IACjEzI,KAAKqZ,cAAcjL,SAAShG,SAAWpI,KAAKkB,MAAQgH,IAAOO,U,mgCC/IpDyQ,EA3DdnT,Y,8WAECkO,MAAQ,G,EAERgI,kB,IASAC,oBAAsB,WACpB,EAAKC,2B,EAGPA,wBAA0B,WAAM,MAC2B,EAAKlW,MAAtD/E,EADsB,EACtBA,MAAOkY,EADe,EACfA,eAAgBC,EADD,EACCA,cAAeC,EADhB,EACgBA,OAE1CF,GAAkBC,IACpB,EAAK4C,aAAe,IAAIG,EAAqBlb,EAAOkY,EAAgBC,EAAeC,GACnF,EAAK2C,aAAa1C,UAAU,iBAC5B,EAAK0C,aAAaI,S,iRAtBGC,IAAMtW,W,mNAKZyR,QACala,IAA1Bka,EAAU8E,aAA6B9E,EAAU8E,cAAgBvc,KAAKiG,MAAMsW,cAC1Evc,KAAKic,cAAcjc,KAAKic,aAAaO,UACzCxc,KAAKmc,6B,sCAkBA,MACuDnc,KAAKiG,MAA3D/E,EADD,EACCA,MAAOqb,EADR,EACQA,YAAanD,EADrB,EACqBA,eAAgBC,EADrC,EACqCA,cAE5C,YAAoB9b,IAAhBgf,EAEA,wBAAInV,MAAO,CAAEwM,QAAS,OAAQvS,MAAO,aAArC,sCAMA+X,IAAmBC,EAEnB,wBAAIjS,MAAO,CAAEwM,QAAS,OAAQvS,MAAO,aACnC,mFAMJ,yBAAK+F,MAAO,CAAEwM,QAAS,SACrB,kBAACvT,EAAA,EAAD,CACEE,GAAG,gBACHW,MAAOA,EACPC,OAAQD,EACR4G,QAAS9H,KAAKkc,2B,isDC6NTO,EAlRd1W,Y,kZAECkO,MAAQ,CACNyI,+BAA2Bnf,G,EAG7BN,MAAQ,IAAIA,IAAM0c,W,EAClBnZ,a,IAwBAmc,sBAAwB,WACtB,EAAKC,6B,EAGPC,oBAAsB,SAAC9d,GACrBA,EAAM+C,kBADyB,IAEvBC,EAAkBhD,EAAlBgD,cAEA+a,EAAa,EAAK7W,MAAlB6W,SACAJ,EAA8B,EAAKzI,MAAnCyI,0BAEJA,IACFA,EAA0BpC,YAAc,EACxCoC,EAA0BK,YAAYC,MAAQ,GAEhDjb,EAAcuY,YAAc,EAC5BvY,EAAcgb,YAAYC,MAAQ,GAClCF,EAAS/a,EAAc5D,MACvB,EAAKiW,SAAS,CAAEsI,0BAA2B3a,K,EAG7Ckb,YAAc,SAACle,GAAU,IACfN,EAAQM,EAARN,IADe,EAE2B,EAAKwH,MAA/CvE,EAFe,EAEfA,KAAM6a,EAFS,EAETA,YAAa5X,EAFJ,EAEIA,SAAUmY,EAFd,EAEcA,SACrC,GAAY,cAARre,GAA+B,WAARA,EAAkB,CAC3CM,EAAMqU,iBAEN,IAAM6E,EAAesE,EAAYW,MAAM,KAAK,GAC5CJ,OAASvf,GACTmE,EAAKyb,UAAUlF,EAActT,EAASpC,OACtC,EAAK6a,Y,EAITR,0BAA4B,WAAM,IACxBlb,EAAS,EAAKuE,MAAdvE,KACR,EAAKlB,QAAUtE,SAASuE,eAAe,mBACvC,EAAKxD,MAAMyD,MAAM,EAAKF,SAHU,MAKsC,EAAK6c,eAAnEC,EALwB,EAKxBA,gBAAiBC,EALO,EAKPA,cAAeC,EALR,EAKQA,YAAaC,EALrB,EAKqBA,aACjDC,EAAiB,EAEbC,EAAiB,EAAKC,gBAAtBD,aACFE,EAAmB,GAEzBvf,OAAO6E,QAAQzB,EAAK6C,WAAW/F,QAAQ,YAAkB,0BAAhByR,EAAgB,KAAV6N,EAAU,KACnDC,EAAW9N,EACT+N,EAAUN,EAAiBJ,EAAkBA,EAEnD,GAAa,MAATrN,EAAJ,CACa,MAATA,IACF8N,EAAW,YAIb,IAAI,EAAK9gB,MAAMghB,UAAU,CACvBrL,MAAO,CAAC,EAAGoL,GACXnI,QAASkI,EACT3c,UAAW,QACX8c,SAAU,KAEZ,IAAMC,EAAgB,IAAI,EAAKlhB,MAAM6D,KAAKoZ,KAAK,CAC7C/b,KAAM,gBACNgc,KAAM,CAACoD,EAAgB,EAAGS,EAAU,GACpC5D,GAAI,CAACoD,EAAaQ,EAAU,GAC5B3D,YAAa,yBACbC,YAAa,KAET8D,EAAW,IAAI,EAAKnhB,MAAM6D,KAAKoZ,KAAK,CACxCC,KAAM,CAACoD,EAAgB,EAAGS,EAAU,GACpC5D,GAAI,CAACoD,EAAaQ,EAAU,GAC5B3D,YAAa,YACbC,YAAa,IAGT+D,EAAkB,IAAI,EAAKphB,MAAM6D,KAAKC,UAAU,CACpD5C,KAAM,kBACNyU,MAAO,CAAC,EAAGoL,EAAU,IACrBnL,KAAM,CAAC,GAAI,IACXX,OAAQ,EACR9Q,UAAW,0BACX4O,SAAU,GACVsO,SAAS,IAELC,EAAkB,IAAI,EAAKthB,MAAMghB,UAAU,CAC/CrL,MAAO,CAAC,EAAGoL,EAAU,GACrBnI,QAAS,IACTzU,UAAW,0BACX8c,SAAU,GACVI,SAAS,IAGXT,EAAiBtR,KAAK,CAAC4R,EAAeE,EAAiBE,IAGvD,IAAMC,EAAyB,SAAzBA,uBAA0Bzf,GAC9Bsf,EAAgBC,SAAU,EAC1BC,EAAgBD,SAAU,EAC1BD,EAAgB3P,SAASnG,EAAIxJ,EAAM6T,MAAMrK,EACzCgW,EAAgB7P,SAASnG,EAAIxJ,EAAM6T,MAAMrK,EAAI,IAEzCkW,EAAkB,SAAlBA,kBACJJ,EAAgBC,SAAU,EAC1BC,EAAgBD,SAAU,GAEtBI,EAAc,SAAdA,YAAe3f,GACnB,IAAMwD,EAAQ0H,KAAKC,OAAOnL,EAAM6T,MAAMrK,EAAIgV,GAAiBE,GAC3D/b,EAAKwU,OAAOjG,EAAM1N,GAElB,EAAK6a,WAGPe,EAAcQ,YAAcH,EAC5BL,EAAc/C,aAAeqD,EAC7BL,EAASO,YAAcH,EACvBJ,EAAShD,aAAeqD,EAExBJ,EAAgBM,YAAc,SAAC5f,GACzBof,EAAcS,QAAQ7f,EAAM6T,MAAO,CAAEiM,QAAQ,EAAMC,UAAU,IAC/DN,EAAuBzf,GAEvB0f,KAIJN,EAActK,QAAU6K,EACxBN,EAASvK,QAAU6K,EACnBL,EAAgBxK,QAAU6K,EAG1BZ,EAAKtf,QAAQ,SAACmG,EAAUoa,GACtB,IAAMC,EAAe,IAAI,EAAK/hB,MAAM6D,KAAKC,UAAU,CACjD5C,KAAM,GAAF,OAAKuD,EAAKjD,IAAV,YAAiBwR,EAAjB,YAAyB8O,GAC7BnM,MAAO,CAAC2K,EAAgB5Y,EAASpC,MAAQkb,EAAe,EAAGO,EAAU,IACrEnL,KAAM,CAAC,GAAI,IACXX,OAAQ,EACR9Q,UAAW,oBACX4O,SAAU,GACVqK,YAAa,QACbC,YAAa,EACbyC,YAAa,mBACbkC,WAAY,IAGdD,EAAard,GAAG,YAAa,EAAKkb,qBAClCmC,EAAa9D,aAAe,WAC1B,EAAK1a,QAAQ4G,MAAM+T,OAAS,UAC5BsD,KAEFO,EAAa5D,aAAe,WAC1B,EAAK5a,QAAQ4G,MAAM+T,OAAS,aAIhCuC,GAAkB,KAGpBC,EAAagB,YAAc,SAAC5f,GAC1B8e,EAAiBrf,QAAQ,YAInB,0BAHJ2f,EAGI,KAFJE,EAEI,KADJE,EACI,KACAJ,EAAcS,QAAQ7f,EAAM6T,QAE9ByL,EAAgBC,SAAU,EAC1BC,EAAgBD,SAAU,EAC1BD,EAAgB3P,SAASnG,EAAIxJ,EAAM6T,MAAMrK,EACzCgW,EAAgB7P,SAASnG,EAAIxJ,EAAM6T,MAAMrK,EAAI,KAE7C8V,EAAgBC,SAAU,EAC1BC,EAAgBD,SAAU,MAIhCX,EAAauB,gB,+SA7MY5C,IAAMtW,W,2NAS/B9J,SAASijB,iBAAiB,QAASnf,KAAKid,e,4DAGvBxF,QAEIla,IAAnBka,EAAU/V,WACUnE,IAApByC,KAAKiG,MAAMvE,MACX+V,EAAU/V,KAAKjD,MAAQuB,KAAKiG,MAAMvE,KAAKjD,KAEvCuB,KAAKod,UAGH3F,EAAUhV,MAAQzC,KAAKiG,MAAMxD,KAC/BzC,KAAK4d,kB,kEAKP1hB,SAASkjB,oBAAoB,QAASpf,KAAKid,e,wCAsL3Cjd,KAAK/C,MAAMC,QAAQF,QACnBgD,KAAK/C,MAAMC,QAAQC,SACnB6C,KAAK4c,8B,oDAGS,MACQ5c,KAAKiG,MAAnB4M,EADM,EACNA,KAAMpQ,EADA,EACAA,IADA,EAE0BzC,KAAKqd,eAArCE,EAFM,EAENA,cAAeE,EAFT,EAESA,aAcvB,MAAO,CAAEE,aAbY,IAAI3d,KAAK/C,MAAM6D,KAAKoZ,KAAK,CAC5CC,KAAM,CAACoD,EAAgB9a,EAAMgb,EAAc,IAC3CrD,GAAI,CAACmD,EAAgB9a,EAAMgb,EAAc5K,EAAK1R,OAAS,IACvDkZ,YAAa,QACbC,YAAa,IASQ+E,iBAPE,IAAIrf,KAAK/C,MAAM6D,KAAKwe,eAAe,CAC1DlN,OAAQ,CAACmL,EAAgB9a,EAAMgb,EAAc,IAC7C8B,MAAO,EACPrN,OAAQ,EACRlC,SAAU,IACV5O,UAAW,a,kDAKA,MACYpB,KAAKiG,MAAtB4M,EADK,EACLA,KAAMjV,EADD,EACCA,OAGR4f,EAAc3K,EAAK3R,MAFD,GAGlBse,EAAgBhC,EAFA,GAItB,MAAO,CACLF,gBANsB,GAOtBC,cANoB,GAOpBC,cACAgC,gBACA/B,aANmB+B,EAAgB5hB,K,sCAU9B,MACgBoC,KAAKiG,MAApB4M,EADD,EACCA,KAAMnR,EADP,EACOA,KAEd,YAAanE,IAATsV,QAA+BtV,IAATmE,EAEtB,wBAAI0F,MAAO,CAAEwM,QAAS,OAAQvS,MAAO,SAArC,yCAOF,yBAAK+F,MAAO,CAAEwM,QAAS,SACrB,kBAACvT,EAAA,EAAD,CACEE,GAAG,kBACHW,MAAO2R,EAAK3R,MACZC,OAAQ0R,EAAK1R,OACb2G,QAAS9H,KAAK2c,6B,uuDCpQlB8C,EADL1Z,Y,gYAECkO,MAAQ,CACNyL,aAASniB,EACToiB,YAAQpiB,EACRqiB,qBAAiBriB,G,EAGnB+Z,qB,IAkDA1P,QAAU,WAAM,IACNxK,EAAW,EAAK6I,MAAMP,MAAtBtI,OACRA,EAAOiF,QACP1F,WAAW,WACTS,EAAOiW,aAAQ9V,GACfH,EAAOiW,QAAQ,WACd,K,EAGLwM,qBAAuB,SAACC,EAAD,GAAyC,IAA1B3X,EAA0B,EAA1BA,UAAWC,EAAe,EAAfA,SAAe,EACpC,EAAKnC,MAAMP,MAA7Bb,EADsD,EACtDA,MAAOzH,EAD+C,EAC/CA,OACf,GAAKyH,EAAMH,iBAAX,CAEA,IAAMqb,ECnFQ,SAAZC,UAAaC,GAIjB,IADA,IAAMC,EAAWD,EAAIE,cAAcjD,MAAM,UAChC3C,EAAI,EAAGA,EAAI2F,EAAS9W,OAAQmR,GAAK,EACxC2F,EAAS3F,GAAK2F,EAAS3F,GAAG6F,OAAO,GAAGrH,cAAgBmH,EAAS3F,GAAG8F,UAAU,GAE5E,OAAOH,EAASI,KAAK,KD4EEN,CAAUF,GAJ+B,4BAK5Bjb,EAAMH,iBAAiBwY,MAAM,KALD,GAKvDqD,EALuD,KAKhDC,EALgD,KAKzCC,EALyC,KAM1DC,EAAS1Z,SAASyZ,GACH,OAAfX,IACFY,GAAU,GAGZ,IACIC,EADEC,EAAexjB,EAAOuB,YAAY4hB,GAAOhc,UAAUic,GAAOE,GAA3C,gBAA4DX,IAEnE,MAAVS,IACFG,EAAiBvjB,EAAOuB,YAAY4hB,GAAOhc,UAAUiE,EAAEkY,GAAtC,gBAAuDX,KAG1Ea,EAAazY,WAAaA,EAC1ByY,EAAaxY,UAAYA,EAErBuY,IACFA,EAAexY,WAAaA,EAC5BwY,EAAevY,UAAYA,K,sSAxFPpC,gB,+MASJ,WACV5I,EAAW4C,KAAKiG,MAAMP,MAAtBtI,OACFqY,EAAYvZ,SAASuE,eAAe,kBAC1C9D,WAAW,WACT,IAAMuE,EAAQ+I,KAAKC,MAAMuL,EAAU8B,aAAe,GAC5CpW,EAAS8I,KAAKC,MAAO,EAAI,GAAMhJ,GACrC9D,EAAOE,QAAQ4D,EAAOC,IACrB,GAEH,IAAM0f,EAAa3kB,SAASuE,eAAe,oBAC3C9D,WAAW,WACT,IAAMuE,EAAQ+I,KAAKC,MAAM2W,EAAWtJ,aAAe,GAC7CpW,EAAS8I,KAAKC,MAAM2W,EAAWC,cAAgB,GAC/CC,EAAiB9W,KAAK+W,IAAI9f,EAAOC,GACvC,EAAKiT,SAAS,CAAEsL,QAASqB,KACxB,GAEH,IAAME,EAAa/kB,SAASuE,eAAe,sBAC3C9D,WAAW,WACT,IAAMuE,EAAQ+I,KAAKC,MAAM+W,EAAW1J,aAAe,GAC7CpW,EAAS8I,KAAKC,MAAM+W,EAAWH,cAAgB,GACrD,EAAK1M,SAAS,CAAEuL,OAAQ,CAAEze,QAAOC,aAChC,GAEHnB,KAAKsX,gBAAkBhS,YAAQ,WACzBlI,EAAO8F,SACT,EAAKkR,SAAS,CAAEwL,gBAAiBxiB,EAAO8F,SAASzE,MAEjD,EAAK2V,SAAS,CAAEwL,qBAAiBriB,Q,4DAKpBka,EAAWC,GAAW,IAC/B7S,EAAU7E,KAAKiG,MAAMP,MAArBb,MACJ6S,EAAUkI,kBAAoB5f,KAAKiU,MAAM2L,iBAC3C/a,EAAMqc,oBAAe3jB,K,kEAIF,MACcyC,KAAKiG,MAAMP,MAAtCtI,EADa,EACbA,OAAQF,EADK,EACLA,QAAS2H,EADJ,EACIA,MACzBzH,EAAOwF,YACP1F,EAAQF,QACR6H,EAAMqc,oBAAe3jB,GACrByC,KAAKsX,oB,sCAsCE,IAIH8B,EACAC,EALG,EAC8BrZ,KAAKiG,MAAMP,MAAxCtI,EADD,EACCA,OAAQC,EADT,EACSA,UAAWwH,EADpB,EACoBA,MADpB,EAEqB7E,KAAKiU,MAAzByL,EAFD,EAECA,QAASC,EAFV,EAEUA,OAIjB,GAAI9a,EAAMH,iBAAkB,iCACQG,EAAMH,iBAAiBwY,MAAM,KADrC,GACnBqD,EADmB,KACZC,EADY,KACLC,EADK,KAEpBC,EAAS1Z,SAASyZ,GAClBU,EAAkB/jB,EAAOuB,YAAY4hB,GAAOhc,UAAUic,GAC5DpH,EAAiB+H,EAAgBT,GAC7BA,EAAS,EAAIS,EAAgB/X,SAC/BiQ,EAAgB8H,EAAgBT,EAAS,IAI7C,OACE,kBAACvW,EAAA,EAAD,CACEhE,iBAAiB,aACjBgS,oBAAoB,cAEpB,kBAACnQ,EAAA,EAAD,CAAUzH,GAAG,iBAAiBqT,QAAQ,OAAOwE,SAAS,iBACpD,kBAAC1Q,EAAA,EAAD,CAAQtK,OAAQA,EAAQC,UAAWA,EAAWuK,QAAS5H,KAAK4H,WAE9D,kBAACI,EAAA,EAAD,CAAUzH,GAAG,mBAAmB6X,SAAS,gBAAgB7Q,gBAAgB,sBACvE,kBAAC,EAAD,CACErG,MAAOwe,EACPnD,YAAa1X,EAAMH,iBACnB0U,eAAgBA,EAChBC,cAAeA,EACfC,OAAQtZ,KAAK6f,wBAGjB,kBAAC7X,EAAA,EAAD,CAAUzH,GAAG,qBAAqB6X,SAAS,gBAAgB7Q,gBAAgB,sBACzE,kBAAC,EAAD,CACEsL,KAAM8M,EACNje,KAAMtE,EAAO8F,SACbqZ,YAAa1X,EAAMH,iBACnBC,SAAUyU,EACV0D,SAAUjY,EAAMqc,eAChBtjB,OAAQP,EAAUO,OAClB6E,IAAKpF,EAAUoF,Y,mBAQZgd,O,olCErEA2B,EA/Edrb,Y,wWAUC0O,cAAgB,SAAC1V,GAAU,MASrB,EAAKkH,MAAM5I,UAPbgkB,EAFuB,EAEvBA,KACA7X,EAHuB,EAGvBA,MACA8X,EAJuB,EAIvBA,SACAC,EALuB,EAKvBA,SACAC,EANuB,EAMvBA,UACAC,EAPuB,EAOvBA,SACAxY,EARuB,EAQvBA,QAEMxK,EAAkBM,EAAlBN,IAAKiW,EAAa3V,EAAb2V,SAED,cAARjW,GAAuBiW,EACzB8M,IACiB,cAAR/iB,EACT8iB,IACiB,eAAR9iB,GAAwBiW,EACjC+M,IACiB,eAARhjB,EACT6iB,IACiB,MAAR7iB,IACTM,EAAM+C,kBACN/C,EAAMqU,kBACU,IAAZnK,EACFO,IAEA6X,M,mRAnCqBrb,gB,iLAEzB9J,SAASijB,iBAAiB,UAAWnf,KAAKyU,eAAe,K,kEAIzDvY,SAASkjB,oBAAoB,UAAWpf,KAAKyU,eAAe,K,sCAkCrD,MASHzU,KAAKiG,MAAM5I,UAPbgkB,EAFK,EAELA,KACA7X,EAHK,EAGLA,MACA8X,EAJK,EAILA,SACAC,EALK,EAKLA,SACAC,EANK,EAMLA,UACAC,EAPK,EAOLA,SACAxY,EARK,EAQLA,QAGF,OACE,kBAACkB,EAAA,EAAD,CAAMgO,oBAAoB,8BAA8BhX,OAAO,OAAO8X,WAAW,SAASR,aAAa,SAASiJ,UAAU,gCACxH,kBAAC1Z,EAAA,EAAD,CAAU2Z,gBAAgB,KACxB,4BAAQhmB,KAAK,SAASyL,MAAO,CAAEK,OAAQ,GAAKoM,QAAS2N,GAArD,MAEF,kBAACxZ,EAAA,EAAD,CAAU2Z,gBAAgB,KACxB,4BAAQhmB,KAAK,SAASyL,MAAO,CAAEK,OAAQ,GAAKoM,QAAS0N,GAArD,MAEF,kBAACvZ,EAAA,EAAD,CAAU2Z,gBAAgB,MACV,IAAZ1Y,EACA,4BAAQtN,KAAK,SAASyL,MAAO,CAAEK,OAAQ,GAAKoM,QAASwN,GAArD,KACA,4BAAQ1lB,KAAK,SAASyL,MAAO,CAAEK,OAAQ,GAAKoM,QAASrK,GAArD,QAGJ,kBAACxB,EAAA,EAAD,CAAU2Z,gBAAgB,KACxB,4BAAQhmB,KAAK,SAASyL,MAAO,CAAEK,OAAQ,GAAKoM,QAASyN,GACnD,yBAAKla,MAAO,CAAE2M,UAAW,mBAAzB,OAGJ,kBAAC/L,EAAA,EAAD,CAAU2Z,gBAAgB,KACxB,4BAAQhmB,KAAK,SAASyL,MAAO,CAAEK,OAAQ,GAAKoM,QAAS4N,GAArD,W,sBC5EO,SAAXG,KAAW,OACf9lB,OAAO+lB,YACF3lB,SAAS4lB,gBAAgBvK,aACzBrb,SAASM,KAAK+a,YAHrB,I,ujCCQMwK,EADLhc,Y,8WAcC6B,QAAU,WACW,EAAK3B,MAAMP,MAAtBtI,OACDiF,S,6RAfY2D,gB,mMACD,IACV5I,EAAW4C,KAAKiG,MAAMP,MAAtBtI,OACF8D,EAAQ0gB,KAAa,GACrBzgB,EAAS8I,KAAKC,MAAO,EAAI,GAAMhJ,GACrC9D,EAAOE,QAAQ4D,EAAOC,K,kEAIFnB,KAAKiG,MAAMP,MAAvBxI,QACAF,U,sCAQD,MACuBgD,KAAKiG,MAAMP,MAAjCtI,EADD,EACCA,OAAQC,EADT,EACSA,UAChB,OACE,kBAAC8M,EAAA,EAAD,CACEhE,iBAAiB,YACjB8S,WAAW,UAEX,kBAACjR,EAAA,EAAD,CAAU4L,QAAQ,QAChB,kBAAClM,EAAA,EAAD,CAAQtK,OAAQA,EAAQC,UAAWA,EAAWuK,QAAS5H,KAAK4H,WAE9D,kBAAC,EAAD,CAAgBvK,UAAWA,S,gBAMpB0kB,O,qBC5Cf,IAAIzd,EAAM,CACT,iBAAkB,QAInB,SAAS0d,eAAeC,GACvB,IAAI1hB,EAAK2hB,sBAAsBD,GAC/B,OAAOE,EAAoB5hB,GAE5B,SAAS2hB,sBAAsBD,GAC9B,GAAIE,EAAoBC,EAAE9d,EAAK2d,GAK/B,OAAO3d,EAAI2d,GAJV,IAAI9c,EAAI,IAAImI,MAAM,uBAAyB2U,EAAM,KAEjD,MADA9c,EAAEkd,KAAO,mBACHld,EAIR6c,eAAezjB,KAAO,SAAS+jB,qBAC9B,OAAOhkB,OAAOC,KAAK+F,IAEpB0d,eAAeO,QAAUL,uBACzB7b,EAAOsS,QAAUqJ,gBACFzhB,GAAK,S","file":"app.c6b986e2.js","sourcesContent":["const download = (data, filename, type) => {\n  const file = new Blob([data], { type })\n  if (window.navigator.msSaveOrOpenBlob) {\n    window.navigator.msSaveOrOpenBlob(file, filename)\n  } else {\n    const elm = document.createElement('a')\n    const url = window.URL.createObjectURL(file)\n\n    elm.href = url\n    elm.download = filename\n\n    document.body.appendChild(elm)\n    elm.click()\n\n    setTimeout(() => {\n      document.body.removeChild(elm)\n      window.URL.revokeObjectURL(url)\n    })\n  }\n}\n\nconst downloadJSON = (data, basename) => (\n  download(data, `${basename}.json`, 'text/json')\n)\n\nexport {\n  download,\n  downloadJSON,\n}\n","import { observable, action } from 'mobx'\nimport paper from 'paper'\n\nimport Animation from './Animation'\n\nimport { downloadJSON } from '../util/download'\n\nclass Project {\n  @observable name\n  @observable inputItems\n  @observable inputBuilt\n\n  constructor(rootStore) {\n    this.rootStore = rootStore\n    this.initialize()\n  }\n\n  initialize() {\n    if (paper.project) {\n      paper.project.clear()\n      paper.project.remove()\n    }\n    this.name = 'My Animation'\n    this.inputItems = undefined\n    this.inputBuilt = false\n  }\n\n  toJSON() {\n    return ({\n      name: this.name,\n    })\n  }\n\n  @action setName(name) {\n    this.name = name\n  }\n\n  clear = () => {\n    paper.project.clear()\n    paper.project.remove()\n\n    const { canvas, animation } = this.rootStore\n    canvas.setSize(undefined, undefined)\n    animation.setIn(Animation.FIRST)\n    animation.setOut(animation.frames)\n  }\n\n  load = (inputJSON, fileName) => {\n    // this.inputItems = undefined\n    // this.inputBuilt = false\n    // BUG: this needs to clear the whole project, similar to what the clear button does\n\n    const { canvas, animation } = this.rootStore\n    const input = JSON.parse(inputJSON)\n\n    const name = fileName || input.project.name\n    this.setName(name.replace(/\\.[^/.]+$/, ''))\n\n    Object.keys(input.animation).forEach((key) => {\n      animation[key] = input.animation[key]\n    })\n\n    Object.keys(input.canvas).forEach((key) => {\n      if (key === 'animatables') {\n        this.inputItems = input.canvas.animatables\n      } else {\n        canvas[key] = input.canvas[key]\n      }\n    })\n\n    this.rootStore.mode.set('BUILD')\n  }\n\n  loadFromFile = (event) => {\n    const { files } = event.target\n    const targetFile = files[0]\n    const reader = new FileReader()\n    reader.onload = () => this.load(reader.result, targetFile.name)\n\n    this.rootStore.reset()\n    reader.readAsText(targetFile)\n  }\n\n  save = () => {\n    /* eslint no-param-reassign: 0 */\n    const { canvas, animation } = this.rootStore\n    const projectAsJSON = JSON.stringify({\n      project: this.toJSON(),\n      animation: animation.toJSON(),\n      canvas: canvas.toJSON(),\n    })\n    return projectAsJSON\n  }\n\n  download = (object) => {\n    downloadJSON(object, this.name)\n  }\n\n  publish = () => {\n    console.log('publishing project')\n  }\n\n  // render() {\n  //   // render canvas animation to frames\n  // }\n}\n\nexport default Project\n","import { observable, action } from 'mobx'\nimport paper from 'paper'\n\nclass Canvas {\n  @observable width\n  @observable height\n  @observable _color\n  @observable background\n  @observable animatables\n  @observable tool\n  @observable selected\n\n  constructor(rootStore) {\n    this.rootStore = rootStore\n    this.initialize()\n  }\n\n  initialize() {\n    let prevWidth\n    let prevHeight\n    if (this.width !== undefined) {\n      prevWidth = this.width\n      prevHeight = this.height\n    }\n\n    this.width = undefined\n    this.height = undefined\n    this._color = '#000000'\n    this.animatables = {}\n    this.tool = undefined\n    this.selected = undefined\n\n    if (prevWidth !== undefined) {\n      this.setSize(prevWidth, prevHeight)\n    }\n  }\n\n  toJSON() {\n    return ({\n      color: this.color,\n      animatables: Object.entries(this.animatables).reduce((output, [key, animatable]) => {\n        output[key] = animatable.toJSON() // eslint-disable-line\n        return output\n      }, {}),\n    })\n  }\n\n  setSize(width, height) {\n    // allows the canvas element one tick to recognize size changes\n    const setSizeAction = action(() => {\n      this.height = height\n      this.width = width\n    })\n    setTimeout(setSizeAction, 1)\n  }\n\n  attatchAndSetup = (id) => {\n    const element = document.getElementById(id)\n    paper.setup(element)\n    paper.view.autoUpdate = false\n    this.background = new paper.Path.Rectangle({\n      topLeft: [0, 0],\n      bottomRight: [paper.view.element.width, paper.view.element.height],\n      fillColor: this.color,\n    })\n    this.draw(this.rootStore.animation.firstFrame)\n  }\n\n  get color() { return this._color }\n  set color(value) {\n    this._color = value\n    this.background.fillColor = value\n  }\n\n  @action add = (animatable) => {\n    animatable.create(this)\n    this.animatables = {\n      ...this.animatables,\n      [animatable.key]: animatable,\n    }\n\n    if (this.tool === 'SELECT') {\n      this.addListenersAndSelect(animatable)\n    }\n\n    this.draw()\n  }\n\n  @action remove = (animatable) => {\n    animatable.item.off('mousedown', this.handleItemMouseDown)\n    animatable.item.remove()\n\n    const clone = { ...this.animatables }\n    delete clone[animatable.key]\n    this.animatables = clone\n    this.draw()\n  }\n\n  @action setTool = (nextTool) => {\n    const prevTool = this.tool\n\n    const entering = toolId => (prevTool !== toolId && nextTool === toolId)\n    const exiting = toolId => (prevTool === toolId && nextTool !== toolId)\n\n    if (entering('SELECT')) { this.selectOn() }\n    if (exiting('SELECT')) { this.selectOff() }\n\n    if (entering('SETTINGS')) { this.rootStore.mode.settings = true }\n    if (exiting('SETTINGS')) { this.rootStore.mode.settings = false }\n\n    if (entering('CLEAR')) { this.rootStore.mode.clear = true }\n    if (exiting('CLEAR')) { this.rootStore.mode.clear = false }\n\n    // Finally, set the tool in-memory\n    this.tool = nextTool\n  }\n\n  @action select = (item) => {\n    this.deselect()\n    item.selected = true // eslint-disable-line no-param-reassign\n    this.selected = this.animatables[item.name]\n    paper.view.update()\n  }\n\n  @action deselect = () => {\n    if (this.selected) {\n      this.selected.item.selected = false\n      this.selected = undefined\n    }\n    paper.view.update()\n  }\n\n  addListenersAndSelect = (animatable) => {\n    animatable.item.on('mousedown', this.handleItemMouseDown)\n    this.select(animatable.item)\n  }\n\n  handleItemMouseDown = (event) => {\n    event.stopPropagation()\n    this.select(event.currentTarget)\n  }\n\n  handleViewMouseDown = (event) => {\n    event.stopPropagation()\n    this.deselect()\n  }\n\n  forEachAnimatable = callback => (\n    Object.values(this.animatables).forEach(callback)\n  )\n\n  build = () => {\n    this.forEachAnimatable((animatable) => { animatable.create(this) })\n    this.draw()\n  }\n\n  draw = (frame) => {\n    const frameToDraw = frame || this.rootStore.animation.now\n    this.forEachAnimatable((animatable) => { animatable.draw(frameToDraw) })\n    if (paper.view) paper.view.update()\n  }\n\n  selectOn = () => {\n    this.forEachAnimatable((animatable) => {\n      animatable.item.on('mousedown', this.handleItemMouseDown)\n    })\n    paper.view.on('mousedown', this.handleViewMouseDown)\n  }\n\n  selectOff = () => {\n    this.forEachAnimatable((animatable) => {\n      animatable.item.off('mousedown', this.handleItemMouseDown)\n    })\n    paper.view.off('mousedown', this.handleViewMouseDown)\n    this.deselect()\n  }\n}\n\nexport default Canvas\n","import { observable, action } from 'mobx'\n\nclass Mode {\n  @observable current\n  @observable settings\n  @observable clear\n\n  constructor() {\n    this.initialize()\n  }\n\n  initialize() {\n    this.current = 'BUILD'\n    this.settings = false\n    this.clear = false\n  }\n\n  @action set = (m) => {\n    this.current = m\n  }\n}\n\nexport default Mode\n","const observeAnimatableTree = (observableObj) => {\n  const observableKeys = observableObj.constructor.OBSERVABLES\n  return observableKeys.map((key) => {\n    if (key === 'keyframes') {\n      return Object.keys(observableObj.keyframes).map(keyFrType => (\n        observableObj.keyframes[keyFrType].map(observeAnimatableTree)\n      ))\n    }\n\n    const value = observableObj[key]\n    if (value.constructor.OBSERVABLES) {\n      return observeAnimatableTree(value)\n    }\n\n    return value\n  })\n}\n\nexport default observeAnimatableTree\n","import { observable, action } from 'mobx'\n\nclass Tools {\n  @observable selectedKeyframe\n\n  constructor() {\n    this.initialize()\n  }\n\n  initialize() {\n    this.selectedKeyframe = undefined\n  }\n\n  @action selectKeyframe = (keyframe) => {\n    this.selectedKeyframe = keyframe\n  }\n}\n\nexport default Tools\n","import { observable, reaction, autorun } from 'mobx'\n\nimport Project from './prototypes/Project'\nimport Canvas from './prototypes/Canvas'\nimport Animation from './prototypes/Animation'\nimport ModeStore from './prototypes/ModeStore'\nimport ToolsStore from './prototypes/ToolsStore'\n\nimport observeAnimatableTree from './util/observeAnimatableTree'\nimport { storageEnabled } from './util/storage'\n\nclass RootStore {\n  @observable project\n  @observable canvas\n  @observable animation\n  @observable mode\n  @observable tools\n\n  constructor() {\n    this.project = new Project(this)\n    this.canvas = new Canvas(this)\n    this.animation = new Animation()\n    this.mode = new ModeStore()\n    this.tools = new ToolsStore()\n\n    // Auto Save & Auto Load\n    if (storageEnabled()) {\n      const projectObj = localStorage.getItem('micrograph.project')\n      if (projectObj) {\n        setTimeout(() => {\n          this.project.load(projectObj)\n        }, 100)\n      }\n\n      autorun(() => {\n        const projectAsJSON = this.project.save()\n        localStorage.setItem('micrograph.project', projectAsJSON)\n      }, { delay: 300 })\n    }\n\n    // Reacts to all changes made to animatable item properties and redraws the canvas\n    reaction(\n      () => ([\n        this.animation.now,\n        this.canvas.color,\n        Object.values(this.canvas.animatables).map(observeAnimatableTree),\n      ]),\n      () => this.canvas.draw()\n    )\n  }\n\n  reset = () => {\n    this.project.initialize()\n    this.canvas.initialize()\n    this.animation.initialize()\n    this.mode.initialize()\n    this.tools.initialize()\n  }\n}\n\nexport default RootStore\n","const storageEnabled = () => {\n  try {\n    localStorage.setItem('_test', 'test')\n  } catch (e) {\n    return false\n  }\n  return true\n}\n\nconst storageSet = (key, value) => {\n  localStorage.setItem(key, JSON.stringify(value))\n}\n\nconst storageGet = (key) => {\n  const value = localStorage.getItem(key)\n  return value && JSON.parse(value)\n}\n\nexport {\n  storageEnabled,\n  storageSet,\n  storageGet,\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\n// Root Application Container\nimport App from './containers/App'\nimport RootStore from './store'\n\n// Styles\nimport '../css'\n\nconst store = new RootStore()\nconst appNode = document.getElementById('app')\n\nReactDOM.render(\n  <App store={store} />,\n  appNode\n)\n","import React, { Component } from 'react'\nimport { hot } from 'react-hot-loader'\nimport { observer } from 'mobx-react'\n\nimport ModeController from './ModeController'\nimport BuildMode from './BuildMode'\nimport AnimateMode from './AnimateMode'\nimport ViewMode from './ViewMode'\nimport ExportMode from './ExportMode'\nimport Grid from '../components/Grid'\n\n@observer\nclass App extends Component {\n  componentDidMount() {\n    // const { store } = this.props\n    // store.canvas.setTool('SETTINGS')\n  }\n\n  render() {\n    const { store } = this.props\n    return (\n      <Grid\n        minHeight=\"100vh\"\n        gridTemplateRows=\"60px 1fr\"\n      >\n        <ModeController mode={store.mode} />\n        {store.mode.current === 'BUILD' &&\n          <BuildMode store={store} />\n        }\n        {store.mode.current === 'ANIMATE' &&\n          <AnimateMode store={store} />\n        }\n        {store.mode.current === 'VIEW' &&\n          <ViewMode store={store} />\n        }\n        {store.mode.current === 'EXPORT' &&\n          <ExportMode store={store} />\n        }\n      </Grid>\n    )\n  }\n}\n\nexport default hot(module)(App)\n","import React from 'react'\n\nconst playbarStyle = { height: '10px', margin: '10px 0px' }\n\nconst Playbar = ({\n  fullWidth,\n  totalFrames,\n  inPoint,\n  outPoint,\n  now,\n  ABSOLUTE_FIRST,\n}) => {\n  const playbarWidth = fullWidth || 0\n\n  const per = playbarWidth / totalFrames\n  const marker = totalFrames > 1 ? per : 0\n  const head = parseInt((inPoint - ABSOLUTE_FIRST) * per)\n  const tail = parseInt((totalFrames - outPoint) * per)\n\n  let activeHead = parseInt((now * per) - head)\n  if (totalFrames === 1) {\n    activeHead = per\n  } else if (now === inPoint) {\n    activeHead = 0\n  } else if (now === outPoint) {\n    activeHead = playbarWidth - head - tail - marker\n  }\n  const activeTail = now === outPoint ? 0 : playbarWidth - head - tail - activeHead - marker\n\n  return (\n    <div style={{ display: 'flex' }}>\n      <div style={{\n        ...playbarStyle,\n        width: head,\n        backgroundColor: 'rgb(150, 160, 170)' }}\n      />\n      <div style={{\n        ...playbarStyle,\n        width: activeHead,\n        backgroundColor: 'rgb(220, 225, 240)' }}\n      />\n      <div style={{\n        ...playbarStyle,\n        width: marker,\n        height: '20px',\n        marginTop: '5px',\n        backgroundColor: 'rgb(30, 155, 255)' }}\n      />\n      <div style={{\n        ...playbarStyle,\n        width: activeTail,\n        backgroundColor: 'rgb(220, 225, 240)' }}\n      />\n      <div style={{\n        ...playbarStyle,\n        width: tail,\n        backgroundColor: 'rgb(150, 160, 170)' }}\n      />\n    </div>\n  )\n}\n\nexport default Playbar\n","import React, { Component } from 'react'\nimport { observer } from 'mobx-react'\n\nimport Animation from '../prototypes/Animation'\nimport Canvas from '../components/Canvas'\nimport Playbar from '../components/Playbar'\n\n@observer\nclass Viewer extends Component {\n  canvasHasSize = () => {\n    const { canvas, onSetup } = this.props\n    canvas.attatchAndSetup('paper-canvas')\n    onSetup()\n  }\n\n  render() {\n    const { canvas, animation } = this.props\n    return (\n      <React.Fragment>\n        <Canvas\n          id=\"paper-canvas\"\n          width={canvas.width}\n          height={canvas.height}\n          hasSize={this.canvasHasSize}\n        />\n        <Playbar\n          fullWidth={canvas.width}\n          totalFrames={animation.frames}\n          inPoint={animation.firstFrame}\n          outPoint={animation.lastFrame}\n          now={animation.now}\n          ABSOLUTE_FIRST={Animation.FIRST}\n        />\n      </React.Fragment>\n    )\n  }\n}\n\nexport default Viewer\n","import React from 'react'\n\nconst GridItem = ({ id, children, ...style }) => (\n  <div id={id} style={style}>\n    {children}\n  </div>\n)\n\nexport default GridItem\n","import { observable } from 'mobx'\n\nclass Handle {\n  static get MAX() { return 100 }\n  static get STEP() { return 10 }\n  static get OBSERVABLES() {\n    return ['influence', 'distance']\n  }\n\n  @observable _influence\n  @observable _distance\n\n  constructor(type) {\n    this.type = type\n    this.influence = 50\n    this.distance = 0\n  }\n\n  toJSON() {\n    return ({\n      type: this.type,\n      influence: this.influence,\n      distance: this.distance,\n    })\n  }\n\n  get influence() { return this._influence }\n  get distance() { return this._distance }\n  get position() {\n    let x = this.influence\n    let y = this.distance\n    if (this.type === 'IN') {\n      x = Handle.MAX - this.influence\n      y = Handle.MAX - this.distance\n    }\n    x /= Handle.MAX\n    y /= Handle.MAX\n    return { x, y }\n  }\n\n  set influence(value) {\n    this._influence = value\n  }\n\n  set distance(value) {\n    this._distance = value\n  }\n\n  set position({ x, y }) {\n    const newX = x * Handle.MAX\n    const newY = x * Handle.MAX\n    if (this.type === 'IN') {\n      this.influence = Handle.MAX - newX\n      this.distance = Handle.MAX - newY\n    } else {\n      this.influence = newX\n      this.distance = newY\n    }\n  }\n}\n\nexport default Handle\n","import { observable, action } from 'mobx'\n\nclass Animation {\n  static get FIRST() { return 1 }\n  static get PLAYBACK_MODES() { return ['LOOP', 'ONCE'] }\n\n  @observable frames\n  @observable firstFrame\n  @observable lastFrame\n  @observable fps\n  @observable now\n  @observable playing\n  @observable sync\n  @observable requestId\n  @observable mode\n\n  constructor() {\n    this.initialize()\n  }\n\n  initialize() {\n    this.frames = 100\n    this.firstFrame = Animation.FIRST\n    this.lastFrame = 100\n    this.fps = 30\n    this.now = this.firstFrame\n    this.playing = false\n    this.sync = 0\n    this.requestId = null\n    this.mode = 'LOOP'\n  }\n\n  toJSON() {\n    return ({\n      frames: this.frames,\n      firstFrame: this.firstFrame,\n      lastFrame: this.lastFrame,\n      fps: this.fps,\n      mode: this.mode,\n    })\n  }\n\n  @action setLength(length) {\n    this.frames = length\n    if (length < this.lastFrame) {\n      this.lastFrame = length\n    }\n  }\n\n  @action setIn = (f) => {\n    if (f < Animation.FIRST || f > this.frames) return\n    this.firstFrame = f\n    if (this.now < f) {\n      this.goToFrame(f)\n    }\n  }\n\n  @action setOut = (f) => {\n    if (f < Animation.FIRST || f > this.frames) return\n    this.lastFrame = f\n    if (this.now > f) {\n      this.goToFrame(f)\n    }\n  }\n\n  nextFrame = () => {\n    const later = this.now + 1\n    if (later > this.lastFrame) {\n      if (this.mode === 'LOOP') return this.firstFrame\n      return null\n    }\n    return later\n  }\n\n  prevFrame = () => {\n    const earlier = this.now - 1\n    if (earlier < this.firstFrame) {\n      if (this.mode === 'LOOP') return this.lastFrame\n      return null\n    }\n    return earlier\n  }\n\n  @action play = () => {\n    if (this.nextFrame() === null) return\n    this.playing = true\n    this.animateAtRate(() => {\n      const nextFrame = this.nextFrame()\n      if (nextFrame === null) return this.pause()\n      this.now = nextFrame\n    })\n  }\n\n  @action pause = () => {\n    this.playing = false\n    if (this.requestId) cancelAnimationFrame(this.requestId)\n  }\n\n  @action goToFrame = (frame) => {\n    this.now = frame\n  }\n\n  @action goToFirst = () => {\n    this.goToFrame(this.firstFrame)\n  }\n\n  @action goToLast = () => {\n    this.goToFrame(this.lastFrame)\n  }\n\n  @action goToNext = () => {\n    const nextFrame = this.nextFrame()\n    if (nextFrame === null) return\n    this.goToFrame(nextFrame)\n  }\n\n  @action goToPrev = () => {\n    const prevFrame = this.prevFrame()\n    if (prevFrame === null) return\n    this.goToFrame(prevFrame)\n  }\n\n  @action animateAtRate = (func) => {\n    const interval = 1000 / this.fps\n    let then = Date.now()\n\n    const loop = () => {\n      if (this.playing === false) return\n      this.requestId = requestAnimationFrame(loop)\n      const now = Date.now()\n      const delta = now - then\n      if (delta >= interval) {\n        then = now - (delta % interval)\n        this.sync = Math.round(delta - interval - (delta % interval))\n        func()\n      }\n    }\n    loop()\n  }\n}\n\nexport default Animation\n","import React from 'react'\n\nconst Grid = ({ children, ...style }) => (\n  <div style={{ display: 'grid', ...style }}>\n    {children}\n  </div>\n)\n\nexport default Grid\n","const cssContext = require.context(\n  '!!file-loader?name=[name].[ext]!.',\n  true,\n  /\\.(css)$/\n)\n\ncssContext.keys().forEach(cssContext)\n","const makeRoot = (real, imag) => ({ real, imag })\n\nconst evaluate = (x, A, B, C, D) => {\n  const q0 = A * x\n  const B1 = q0 + B\n  const C2 = B1 * x + C\n  return {\n    Q: C2 * x + D,\n    dQ: (q0 + B1) * x + C2,\n    B1,\n    C2,\n  }\n}\n\nconst qdrtc = (A, B, C) => {\n  const b = -B / 2\n  const q = b * b - A * C\n  let X1 = 0\n  let Y1 = 0\n  let X2 = 0\n  let Y2 = 0\n\n  if (q < 0) {\n    const X = b / A\n    const Y = Math.sqrt(-q) / A\n    X1 = X\n    Y1 = Y\n    X2 = X\n    Y2 = -Y\n  } else {\n    Y1 = 0\n    Y2 = 0\n    const r = b + Math.sign(b) * Math.sqrt(q)\n    if (r === 0) {\n      X1 = C / A\n      X2 = -C / A\n    } else {\n      X1 = C / r\n      X2 = r / A\n    }\n  }\n  return [\n    makeRoot(X1, Y1),\n    makeRoot(X2, Y2),\n  ]\n}\n\nconst getCubicRoots = (A, B, C, D) => {\n  let X\n  let a\n  let b1\n  let c2\n  if (A === 0) {\n    X = undefined\n    a = B\n    b1 = C\n    c2 = D\n  } else if (D === 0) {\n    X = 0\n    a = A\n    b1 = B\n    c2 = C\n  } else {\n    a = A\n    X = -(B / A) / 3\n    let evalInfo = evaluate(X, A, B, C, D)\n    let q = evalInfo.Q\n    let dq = evalInfo.dQ\n    b1 = evalInfo.B1\n    c2 = evalInfo.C2\n\n    let t = q / A\n    let r = Math.abs(t) ** (1 / 3)\n    const s = Math.sign(t)\n    t = -dq / A\n    if (t > 0) {\n      r = 1.324717957244746 * Math.max(r, Math.sqrt(t))\n    }\n    let x0 = X - s * r\n    if (x0 !== X) {\n      const den = 1 + (100 * Number.EPSILON)\n      do {\n        X = x0\n        evalInfo = evaluate(X, A, B, C, D)\n        q = evalInfo.Q\n        dq = evalInfo.dQ\n        b1 = evalInfo.B1\n        c2 = evalInfo.C2\n        x0 = (dq === 0 ? X : X - (q / dq) / den)\n      } while (s * x0 > s * X)\n      if (Math.abs(A) * X * X > Math.abs(D / X)) {\n        c2 = -D / X\n        b1 = (c2 - C) / X\n      }\n    }\n  }\n  const roots = []\n  if (X !== undefined) {\n    roots.push(makeRoot(X, 0))\n  }\n  const quadInfo = qdrtc(a, b1, c2)\n  return roots.concat(quadInfo)\n}\n\nconst cubic = (x, a, b, c, d) => (\n  (a * (x ** 3)) + (b * (x ** 2)) + (c * x) + d\n)\n\nconst bezierCurve = ({ x2, x3, y2, y3 }) => {\n  /* x2, and x3 are the X values from the 2nd and 3rd points for a bezier\n      definition. For this use case, they must be between 0 - 1.\n  */\n  if (x2 > 1 || x2 < 0 || x3 > 1 || x3 < 0) {\n    throw Error('This bezier curve requires control values between 0 & 1')\n  }\n\n  // These constants were reduced from the Cubic Bzier curve definition, with\n  // values of (0, 0) and (1, 1) used for p1 & p4 respectively\n  const xA = 3 * x2 - 3 * x3 + 1\n  const xB = -1 * 6 * x2 + 3 * x3\n  const xC = 3 * x2\n\n  const yA = 3 * y2 - 3 * y3 + 1\n  const yB = -1 * 6 * y2 + 3 * y3\n  const yC = 3 * y2\n  const yD = 0\n\n  const t = (x) => {\n    const xD = -x\n    const roots = getCubicRoots(xA, xB, xC, xD)\n    roots.filter(r => (\n      r.imag === 0 &&\n      r.real.toFixed(10) >= 0 &&\n      r.real.toFixed(10) <= 1 &&\n      !Object.is(r.real, -0)\n    ))\n    // console.log(JSON.stringify(roots))\n    return roots[0].real\n  }\n\n  const y = (x) => {\n    const time = t(x)\n    return cubic(time, yA, yB, yC, yD)\n  }\n\n  return ({ t, y })\n}\n\nexport default bezierCurve\n","import { observable } from 'mobx'\n\nimport Handle from './Handle'\nimport bezierCurve from '../util/bezierCurve'\n\nclass Keyframe {\n  static get OBSERVABLES() {\n    return ['frame', 'value', 'handleIn', 'handleOut']\n  }\n\n  @observable frame\n  @observable value\n  @observable handleIn\n  @observable handleOut\n\n  constructor(frame, value) {\n    this.frame = frame\n    this.value = value\n    this.handleIn = new Handle('IN')\n    this.handleOut = new Handle('OUT')\n  }\n\n  toJSON() {\n    return ({\n      frame: this.frame,\n      value: this.value,\n      handleIn: this.handleIn.toJSON(),\n      handleOut: this.handleOut.toJSON(),\n    })\n  }\n\n  static fromJSON(input) {\n    const { frame, value, handleIn, handleOut } = input\n    const keyframe = new Keyframe(frame, value)\n    keyframe.handleIn.influence = handleIn.influence\n    keyframe.handleIn.distance = handleIn.distance\n    keyframe.handleOut.influence = handleOut.influence\n    keyframe.handleOut.distance = handleOut.distance\n    return keyframe\n  }\n\n  static sort = (a, b) => (a.frame - b.frame)\n\n  static createCurve = (k1, k2) => (\n    bezierCurve({\n      x2: k1.handleOut.position.x,\n      y2: k1.handleOut.position.y,\n      x3: k2.handleIn.position.x,\n      y3: k2.handleIn.position.y,\n    })\n  )\n\n  static interpolate = (k1, k2, frame) => {\n    const curve = Keyframe.createCurve(k1, k2)\n    const timeRatio = (frame - k1.frame) / (k2.frame - k1.frame)\n    // BUG: Bezier Interpolation is broken for certain ranges\n    const valueRatio = curve.y(timeRatio)\n    const interpolated = ((k2.value - k1.value) * valueRatio) + k1.value\n    return interpolated\n  }\n}\n\nexport default Keyframe\n","import { observable, action } from 'mobx'\nimport paper from 'paper'\n\nimport Keyframe from './Keyframe'\n\nclass AnimatableItem {\n  // Canvas Size Relative Values (0-100)\n  static get X() { return 50 }\n  static get Y() { return 50 }\n\n  // Absolute Values\n  static get SCALE() { return 100 }\n  static get ROTATION() { return 0 }\n  static get FILL_COLOR() {\n    return {\n      hue: Math.floor(Math.random() * 361),\n      saturation: 0.4,\n      brightness: 1,\n    }\n  }\n\n  static get OBSERVABLES() {\n    return ['x', 'y', 'scale', 'rotation', 'fillColor', 'keyframes']\n  }\n\n  constructor({ key }) {\n    this.key = key\n  }\n\n  @observable canvas\n  @observable _x = AnimatableItem.X\n  @observable _y = AnimatableItem.Y\n  @observable _scale = AnimatableItem.SCALE\n  @observable _rotation = AnimatableItem.ROTATION\n  @observable _fillColor = AnimatableItem.FILL_COLOR\n  @observable keyframes = {\n    x: observable([]),\n    y: observable([]),\n    scale: observable([]),\n    rotation: observable([]),\n  }\n\n  toJSON() {\n    return ({\n      class: this.constructor.name,\n      x: this.x,\n      y: this.y,\n      scale: this.scale,\n      rotation: this.rotation,\n      fillColor: this.fillColor,\n      keyframes: Object.entries(this.keyframes).reduce(\n        (output, [prop, keyframeList]) => {\n          /* eslint no-param-reassign: 0 */\n          output[prop] = keyframeList.map(keyframe => keyframe.toJSON())\n          return output\n        }, {}\n      ),\n    })\n  }\n\n  get item() { return paper.project.activeLayer.children[this.key] }\n  get x() { return this._x }\n  get y() { return this._y }\n  get position() { return { x: this.x, y: this.y } }\n  get scale() { return this._scale }\n  get rotation() { return this._rotation }\n  get fillColor() { return this._fillColor }\n\n  set x(value) {\n    this.item.position.x = this.absolute(value)\n    this._x = value\n  }\n\n  set y(value) {\n    this.item.position.y = this.absolute(value, 'height')\n    this._y = value\n  }\n\n  set position({ x, y }) {\n    this.x = x\n    this.y = y\n  }\n\n  set scale(value) {\n    if (this.scale === 0 && value !== 0) {\n      this.item.remove()\n      this.create(this.canvas)\n      this.item.scale(this.fraction(value))\n    } else {\n      const scaleBy = value / this.scale\n      this.item.scale(scaleBy)\n    }\n    this._scale = value\n  }\n\n  set rotation(value) {\n    const rotateBy = value - this.rotation\n    this.item.rotate(rotateBy)\n    this._rotation = value\n  }\n\n  set fillColor(value) {\n    this.item.fillColor = value\n    this._fillColor = value\n  }\n\n  @action setCanvas(canvas) {\n    this.canvas = canvas\n  }\n\n  @action setUntrackedValues() {\n    this.item.scale(this.fraction(this.scale))\n    this.item.rotate(this.rotation)\n  }\n\n  @action updateKeyframes(property, keyframes) {\n    this.keyframes = {\n      ...this.keyframes,\n      [property]: keyframes,\n    }\n  }\n\n  addKey(property, frame, value = undefined, ignorePairings = false) {\n    const valueToKey = value || this[property]\n    const k = new Keyframe(frame, valueToKey)\n    const keyframes = [...this.keyframes[property], k]\n    keyframes.sort(Keyframe.sort)\n\n    if (!ignorePairings) {\n      let paired\n      if (property === 'x') { paired = 'y' }\n      if (property === 'y') { paired = 'x' }\n\n      const valueToPair = this[paired]\n      const kP = new Keyframe(frame, valueToPair)\n      const keyframesPaired = [...this.keyframes[paired], kP]\n      keyframesPaired.sort(Keyframe.sort)\n\n      this.keyframes = {\n        ...this.keyframes,\n        [property]: keyframes,\n        [paired]: keyframesPaired,\n      }\n    } else {\n      this.updateKeyframes(property, keyframes)\n    }\n\n    return k\n  }\n\n  removeKey(property, frame) {\n    let keyframes = [...this.keyframes[property]]\n    keyframes = keyframes.filter(k => k.frame !== frame)\n\n    if (property === 'x') {\n      let keyframesY = [...this.keyframes.y]\n      keyframesY = keyframesY.filter(k => k.frame !== frame)\n      this.keyframes = {\n        ...this.keyframes,\n        x: keyframes,\n        y: keyframesY,\n      }\n    } else {\n      this.updateKeyframes(property, keyframes)\n    }\n  }\n\n  absolute = (value, dimension = 'width') => (\n    value / 100 * this.canvas[dimension]\n  )\n\n  fraction = value => (\n    value / 100\n  )\n\n  create(canvas) {\n    if (this.canvas === undefined) this.setCanvas(canvas)\n\n    const sharedProps = {\n      name: this.key,\n      fillColor: this.fillColor,\n    }\n\n    if (typeof this.onCreate === 'function') {\n      this.onCreate(sharedProps)\n    }\n\n    if (this.item !== undefined) this.setUntrackedValues()\n  }\n\n  recreate() {\n    this.item.remove()\n    this.create(this.canvas)\n    this.canvas.addListenersAndSelect(this)\n  }\n\n  draw(frame) {\n    if (this.item === undefined) return\n\n    Object.entries(this.keyframes).forEach(([property, keyframes]) => {\n      // Ignore `y` property\n      if (property === 'y') return\n      if (property === 'x') {\n        // Interpret `x` & `y` at the same time\n        const xKeyframes = keyframes\n        const yKeyframes = this.keyframes.y\n        if (xKeyframes.length === 0 && yKeyframes.length === 0) return\n        const xValue = this.valueForFrame(frame, xKeyframes)\n        const yValue = this.valueForFrame(frame, yKeyframes)\n        this.position = { x: xValue, y: yValue }\n      } else {\n        // Interpret all other properties individually\n        if (keyframes.length === 0) return\n        const value = this.valueForFrame(frame, keyframes)\n        this[property] = value\n      }\n    })\n  }\n\n  valueForFrame = (frame, keyframes) => {\n    const frames = keyframes.map(key => key.frame)\n\n    // is frame a keyframe\n    if (frames.includes(frame)) {\n      const where = frames.indexOf(frame)\n      return keyframes[where].value\n    }\n\n    // where is frame with respect to keyframes\n    frames.push(frame)\n    frames.sort((a, b) => a - b)\n    const where = frames.indexOf(frame)\n\n    // is frame before or after last key\n    if (where === 0) return keyframes[0].value\n    if (where === frames.length - 1) return keyframes[keyframes.length - 1].value\n\n    // frame is between two keys\n    const before = keyframes[where - 1]\n    const after = keyframes[where]\n    return Keyframe.interpolate(before, after, frame)\n  }\n}\n\nexport default AnimatableItem\n","import { observable } from 'mobx'\nimport paper from 'paper'\n\nimport AnimatableItem from '../AnimatableItem'\n\nclass Circle extends AnimatableItem {\n  // Canvas Size Relative Values (0-100)\n  static get RADIUS() { return 10 }\n\n  @observable _radius = Circle.RADIUS\n\n  toJSON() {\n    return ({\n      ...super.toJSON(),\n      radius: this.radius,\n    })\n  }\n\n  get radius() { return this._radius }\n  set radius(value) {\n    // TODO: update this value using item.bounds and scale\n    this._radius = value\n    this.recreate()\n  }\n\n  onCreate(itemProps) {\n    const { x, y } = this.position\n    new paper.Path.Circle({\n      ...itemProps,\n      center: [this.absolute(x), this.absolute(y, 'height')],\n      radius: this.absolute(this.radius) / 2,\n    })\n  }\n}\n\nexport default Circle\n","import { observable } from 'mobx'\nimport paper from 'paper'\n\nimport AnimatableItem from '../AnimatableItem'\n\nclass Rectangle extends AnimatableItem {\n  // Canvas Size Relative Values (0-100)\n  static get WIDTH() { return 10 }\n  static get HEIGHT() { return 10 }\n  static get RADIUS() { return 0 }\n\n  @observable _width = Rectangle.WIDTH\n  @observable _height = Rectangle.HEIGHT\n  @observable _radius = Rectangle.RADIUS\n\n  toJSON() {\n    return ({\n      ...super.toJSON(),\n      width: this.width,\n      height: this.height,\n      radius: this.radius,\n    })\n  }\n\n  get width() { return this._width }\n  get height() { return this._height }\n  get radius() { return this._radius }\n\n  set width(value) {\n    // TODO: update this value using item.bounds and scale\n    this._width = value\n    this.recreate()\n  }\n\n  set height(value) {\n    // TODO: update this value using item.bounds and scale\n    this._height = value\n    this.recreate()\n  }\n\n  set radius(value) {\n    // TODO: update this value using item.bounds and scale\n    this._radius = value\n    this.recreate()\n  }\n\n  onCreate(itemProps) {\n    const { x, y } = this.position\n    const absX = this.absolute(x)\n    const absY = this.absolute(y, 'height')\n    const absWidth = this.absolute(this.width)\n    const absHeight = this.absolute(this.height)\n\n    new paper.Path.Rectangle({\n      ...itemProps,\n      point: [absX - (absWidth / 2), absY - (absHeight / 2)],\n      size: [absWidth, absHeight],\n      radius: (this.radius / 100) * (Math.max(absWidth, absHeight) / 2),\n    })\n  }\n}\n\nexport default Rectangle\n","import React, { Component } from 'react'\nimport { observer } from 'mobx-react'\n\nimport Circle from '../prototypes/items/Circle'\nimport Rectangle from '../prototypes/items/Rectangle'\n\n@observer\nclass ToolController extends Component {\n  choose = (event) => {\n    event.preventDefault()\n    this.props.setTool(event.currentTarget.id)\n  }\n\n  addCircle = () => {\n    const { existing } = this.props\n    const circle = new Circle({\n      key: `circle-${Object.keys(existing).length}`,\n    })\n    this.props.add(circle)\n  }\n\n  addRectangle = () => {\n    const { existing } = this.props\n    const rect = new Rectangle({\n      key: `rect-${Object.keys(existing).length}`,\n    })\n    this.props.add(rect)\n  }\n\n  render() {\n    const { tool } = this.props\n\n    return (\n      <div style={{ display: 'flex', padding: '10px 10px 0px 10px' }}>\n        <button\n          type=\"button\"\n          id=\"SETTINGS\"\n          onClick={this.choose}\n          {...(tool === 'SETTINGS' ? { primary: 'true' } : {})}\n        >\n          <div>&#9776;</div>\n        </button>\n        <button\n          type=\"button\"\n          id=\"CLEAR\"\n          onClick={this.choose}\n        >\n          <div>&#10007;</div>\n        </button>\n        <button\n          type=\"button\"\n          id=\"SELECT\"\n          onClick={this.choose}\n          {...(tool === 'SELECT' ? { primary: 'true' } : {})}\n        >\n          <div style={{ transform: 'rotate(-135deg)' }}>&#10148;</div>\n        </button>\n        {/* <button\n          type=\"button\"\n          id=\"DRAW\"\n          onClick={this.choose}\n          {...(tool === 'DRAW' ? { primary: 'true' } : {})}\n        >\n          \n        </button> */}\n\n        <button type=\"button\" onClick={this.addCircle}>+ Circle</button>\n        <button type=\"button\" onClick={this.addRectangle}>+ Rectangle</button>\n      </div>\n    )\n  }\n}\n\nexport default ToolController\n","import React, { Component } from 'react'\nimport { observer } from 'mobx-react'\n\n@observer\nclass IntegerInput extends Component {\n  state = {\n    localValue: 0,\n  }\n\n  componentDidMount() {\n    const { value } = this.props\n    if (value !== this.state.localValue) {\n      this.setState({ localValue: value })\n    }\n  }\n\n  onChange = (event) => {\n    this.setState({ localValue: event.target.value })\n  }\n\n  onBlur = () => {\n    const { value, setValue } = this.props\n    const { localValue } = this.state\n\n    const possibleInt = parseInt(localValue)\n    let result = value\n    if (Number.isInteger(possibleInt)) {\n      result = possibleInt\n    }\n\n    setValue(result)\n    this.setState({ localValue: result })\n  }\n\n  handleKeyDown = (event) => {\n    const { key, shiftKey } = event\n    if (key === 'ArrowUp' && shiftKey) {\n      this.incrementBy(10)\n    } else if (key === 'ArrowUp') {\n      this.incrementBy(1)\n    } else if (key === 'ArrowDown' && shiftKey) {\n      this.decrementBy(10)\n    } else if (key === 'ArrowDown') {\n      this.decrementBy(1)\n    }\n  }\n\n  changeBy = operation => (amount) => {\n    const { value, setValue } = this.props\n    const next = operation(value, amount)\n    setValue(next)\n    this.setState({ localValue: next })\n  }\n\n  // eslint-disable-next-line\n  incrementBy = this.changeBy((a, b) => a + b)\n  decrementBy = this.changeBy((a, b) => a - b)\n\n  render() {\n    const { localValue } = this.state\n    return (\n      <input\n        type=\"text\"\n        style={{ width: '60px', marginRight: '20px', textAlign: 'center' }}\n        value={localValue}\n        onChange={this.onChange}\n        onKeyDown={this.handleKeyDown}\n        onBlur={this.onBlur}\n      />\n    )\n  }\n}\n\nexport default IntegerInput\n","import React, { useRef } from 'react'\n\nconst style = {\n  container: {\n    position: 'fixed',\n    zIndex: 100,\n    left: 0,\n    top: 0,\n    width: '100%',\n    height: '100%',\n    overflow: 'auto',\n    backgroundColor: 'rgba(0, 0, 0, 0.4)',\n  },\n  body: {\n    backgroundColor: '#fefefe',\n    margin: '15% auto',\n    border: '1px solid #888',\n    width: '80%',\n  },\n  content: {\n    padding: '16px',\n  },\n}\n\nconst Modal = ({ children, open, handleClose }) => {\n  const clickawayEl = useRef(null)\n\n  const onClickaway = (event) => {\n    if (clickawayEl.current.contains(event.target)) return\n    handleClose()\n  }\n\n  return (\n    open === false ? null : (\n      <div style={style.container} onClick={onClickaway}>\n        <div ref={clickawayEl} style={style.body}>\n          <div style={style.content}>{children}</div>\n        </div>\n      </div>\n    )\n  )\n}\n\nexport default Modal\n","// encapsulates ValueEditor, implements editing the paper properties of an AnimatibleItem\n\nimport React, { Component } from 'react'\nimport { observer } from 'mobx-react'\n\nimport IntegerInput from '../components/IntegerInput'\n\n@observer\nclass PropertyEditor extends Component {\n  propertySetter = property => (value) => {\n    const { item, now } = this.props\n\n    if (item.keyframes[property].length) {\n      const existingKeyframe = item.keyframes[property].find(keyframe => keyframe.frame === now)\n      if (existingKeyframe) {\n        existingKeyframe.value = value\n      } else {\n        item.addKey(`${property}`, now, value)\n      }\n    } else {\n      item[property] = value\n    }\n  }\n\n  classControls() {\n    const { item } = this.props\n    const itemClass = item.constructor.name\n\n    if (itemClass === 'Circle') {\n      return (\n        <React.Fragment>\n          <label>Radius</label>\n          <div style={{ display: 'flex' }}>\n            <IntegerInput value={item.radius} setValue={this.propertySetter('radius')} />\n          </div>\n        </React.Fragment>\n      )\n    }\n\n    if (itemClass === 'Rectangle') {\n      return (\n        <React.Fragment>\n          <label>Size</label>\n          <div style={{ display: 'flex' }}>\n            <IntegerInput value={item.width} setValue={this.propertySetter('width')} />\n            <IntegerInput value={item.height} setValue={this.propertySetter('height')} />\n          </div>\n        </React.Fragment>\n      )\n    }\n  }\n\n  render() {\n    const { item } = this.props\n\n    if (item === undefined) {\n      return (\n        <h3 style={{ padding: '10px', color: 'darkgray' }}>\n          Select an Item on the Canvas.\n        </h3>\n      )\n    }\n\n    return (\n      <div style={{ padding: '10px' }}>\n        <h4>{item.key}</h4>\n        <label>Position</label>\n        <div style={{ display: 'flex' }}>\n          <IntegerInput value={item.x} setValue={this.propertySetter('x')} />\n          <IntegerInput value={item.y} setValue={this.propertySetter('y')} />\n        </div>\n\n        <label>Scale</label>\n        <div style={{ display: 'flex' }}>\n          <IntegerInput value={item.scale} setValue={this.propertySetter('scale')} />\n        </div>\n\n        <label>Rotation</label>\n        <div style={{ display: 'flex' }}>\n          <IntegerInput value={item.rotation} setValue={this.propertySetter('rotation')} />\n        </div>\n\n        {this.classControls()}\n      </div>\n    )\n  }\n}\n\nexport default PropertyEditor\n","import React, { Component } from 'react'\nimport { observer } from 'mobx-react'\n\nimport Modal from '../components/Modal'\n\n@observer\nclass ProjectSettings extends Component {\n  setName = (event) => {\n    const { store } = this.props\n    store.project.setName(event.target.value)\n  }\n\n  setLength = (event) => {\n    const { store } = this.props\n    const length = parseInt(event.target.value)\n    store.animation.setLength(length)\n  }\n\n  setColor = (event) => {\n    const { store } = this.props\n    store.canvas.color = event.target.value\n  }\n\n  closeModal = () => this.props.store.canvas.setTool('SELECT')\n\n  render() {\n    const { store } = this.props\n\n    return (\n      <Modal open={store.mode.settings} handleClose={this.closeModal}>\n        <h3>Project Settings</h3>\n\n        <label>Project Name</label>\n        <input type=\"text\" value={store.project.name} onChange={this.setName} />\n\n        <label>Animation Length</label>\n        <input type=\"number\" step=\"1\" value={store.animation.frames} onChange={this.setLength} />\n\n        <label>Canvas Background</label>\n        <select value={store.canvas.color} onChange={this.setColor}>\n          <option value=\"#000000\">Black</option>\n          <option value=\"#ffffff\">White</option>\n        </select>\n\n        <div style={{ display: 'flex', flexDirection: 'row-reverse' }}>\n          <button type=\"button\" onClick={this.closeModal}>Close</button>\n        </div>\n      </Modal>\n    )\n  }\n}\n\nexport default ProjectSettings\n","import React, { Component } from 'react'\nimport { observer } from 'mobx-react'\n\nimport Modal from '../components/Modal'\n\n@observer\nclass ClearProject extends Component {\n  closeModal = () => this.props.store.canvas.setTool('SELECT')\n\n  render() {\n    const { store } = this.props\n    const { mode, project, reset } = store\n\n    return (\n      <Modal open={mode.clear} handleClose={this.closeModal}>\n        <h3>Remove Project?</h3>\n\n        <p>\n          You are about to remove&nbsp;\n          <strong>{project.name}</strong>\n          &nbsp;from your workspace, and start from scratch.\n          Are you sure you want to do this?\n        </p>\n\n        <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\n          <button type=\"button\" onClick={this.closeModal}>Cancel</button>\n          <button type=\"button\" onClick={reset}>Remove</button>\n        </div>\n      </Modal>\n    )\n  }\n}\n\nexport default ClearProject\n","import Circle from './Circle'\nimport Rectangle from './Rectangle'\n\nconst items = {\n  Circle,\n  Rectangle,\n}\n\nexport default items\n","import React, { Component } from 'react'\nimport { observer } from 'mobx-react'\nimport { autorun } from 'mobx'\n\nimport Viewer from './Viewer'\nimport ToolController from './ToolController'\nimport PropertyEditor from './PropertyEditor'\nimport ProjectSettings from './ProjectSettings'\nimport ClearProject from './ClearProject'\nimport Grid from '../components/Grid'\nimport GridItem from '../components/GridItem'\n\nimport items from '../prototypes/items'\nimport Keyframe from '../prototypes/Keyframe'\n\n@observer\nclass BuildMode extends Component {\n  state = {\n    ready: false,\n    inputItemsExist: false,\n  }\n\n  autorunDisposer\n\n  componentDidMount() {\n    const { canvas, project } = this.props.store\n    const container = document.getElementById('build-container')\n    setTimeout(() => {\n      const width = Math.round(container.clientWidth) - 20\n      const height = Math.round((9 / 16) * width)\n      canvas.setSize(width, height)\n    }, 1)\n\n    if (canvas.tool === 'SELECT') {\n      setTimeout(() => {\n        canvas.setTool(undefined)\n        canvas.setTool('SELECT')\n      }, 20)\n    }\n\n    this.autorunDisposer = autorun(() => {\n      this.setState({ inputItemsExist: Boolean(project.inputItems) })\n    })\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevInputItemsExist = prevState.inputItemsExist\n    const { canvas, project } = this.props.store\n    const { ready, inputItemsExist } = this.state\n    if (\n      !project.inputBuilt &&\n      (\n        (ready && !prevInputItemsExist && inputItemsExist) ||\n        (inputItemsExist && !prevState.ready && ready)\n      )\n    ) {\n      Object.entries(project.inputItems).forEach(([itemKey, itemObj]) => {\n        const { class: itemClass, keyframes, ...properties } = itemObj\n\n        const animatable = new items[itemClass]({ key: itemKey })\n        canvas.add(animatable)\n\n        const inputKeyframes = Object.entries(keyframes)\n          .reduce((accum, [keyframeProp, keyframeList]) => {\n            /* eslint no-param-reassign: 0 */\n            accum[keyframeProp] = keyframeList.map(Keyframe.fromJSON)\n            return accum\n          }, {})\n        animatable.keyframes = {\n          ...this.keyframes,\n          ...inputKeyframes,\n        }\n\n        Object.entries(properties).forEach(([key, value]) => {\n          animatable[key] = value\n        })\n      })\n\n      project.inputBuilt = true\n    }\n  }\n\n  componentWillUnmount() {\n    const { project, canvas } = this.props.store\n    canvas.selectOff()\n    project.clear()\n    this.autorunDisposer()\n  }\n\n  onSetup = () => {\n    const { canvas } = this.props.store\n    canvas.build()\n    this.setState({ ready: true })\n  }\n\n  add = (item) => {\n    const { canvas } = this.props.store\n    canvas.add(item)\n  }\n\n  render() {\n    const { canvas, animation } = this.props.store\n    const { ready } = this.state\n    return (\n      <React.Fragment>\n        <ProjectSettings store={this.props.store} />\n        <ClearProject store={this.props.store} />\n        <Grid\n          gridTemplateRows=\"auto 60px\"\n          gridTemplateColumns=\"auto 340px\"\n        >\n          <GridItem gridArea=\"1 / 1 / 1 / 2\" id=\"build-container\" padding=\"10px\" alignSelf=\"center\">\n            <Viewer canvas={canvas} animation={animation} onSetup={this.onSetup} />\n          </GridItem>\n          <GridItem gridArea=\"1 / 2 / 1 / 3\" backgroundColor=\"rgb(210, 210, 210)\">\n            <PropertyEditor item={canvas.selected} now={animation.now} />\n          </GridItem>\n          <GridItem gridArea=\"2 / 1 / 2 / 3\" backgroundColor=\"rgb(180, 180, 180)\">\n            { ready && (\n              <ToolController\n                existing={canvas.animatables}\n                add={this.add}\n                tool={canvas.tool}\n                setTool={canvas.setTool}\n              />\n            )}\n          </GridItem>\n        </Grid>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default BuildMode\n","import React, { Component } from 'react'\nimport { observer } from 'mobx-react'\n\n@observer\nclass Canvas extends Component {\n  componentDidMount() {\n    this.testForAvailability()\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.width === undefined) {\n      this.testForAvailability()\n    }\n  }\n\n  testForAvailability() {\n    const { width, hasSize } = this.props\n    if (width !== undefined) {\n      hasSize()\n    }\n  }\n\n  render() {\n    const { id, width, height } = this.props\n    if (width === undefined) return null\n    return (\n      <canvas\n        style={{ display: 'block' }}\n        id={id}\n        width={width}\n        height={height}\n      />\n    )\n  }\n}\n\nexport default Canvas\n","/* encapsulates Mode, implements:\n\n  | Viewer     | ExportEditor   |\n  |            |                |\n   ------------|                |\n  | Format     |                |\n  | Controller |                |\n\n*/\n\nimport React, { Component } from 'react'\n\nimport Grid from '../components/Grid'\nimport GridItem from '../components/GridItem'\n\nclass ExportMode extends Component {\n  saveThenDownload = () => {\n    const { project } = this.props.store\n    project.download(project.save())\n  }\n\n  render() {\n    const { project } = this.props.store\n\n    return (\n      <Grid\n        gridTemplateRows=\"1fr 1fr 1fr\"\n        gridTemplateColumns=\"auto\"\n        // alignItems=\"center\"\n        justifyItems=\"center\"\n      >\n        {/* <GridItem padding=\"10px\">\n          <h3 style={{ padding: '10px', color: 'darkgray' }}>\n            Feature under construction.\n          </h3>\n        </GridItem> */}\n        <GridItem alignSelf=\"end\">\n          <button type=\"button\" onClick={this.saveThenDownload}>&#x21e9; Save Project to File</button>\n        </GridItem>\n        <GridItem alignSelf=\"center\">\n          <label htmlFor=\"file-button\" style={{ display: 'block', width: '300px' }}>&#x21aa; Load Project from File</label>\n          <input type=\"file\" id=\"file-button\" onChange={project.loadFromFile} style={{ width: '300px' }} />\n        </GridItem>\n        <GridItem>\n          <button type=\"button\" onClick={project.publish}>&#x2912; Publish Project to Gallery</button>\n        </GridItem>\n      </Grid>\n    )\n  }\n}\n\nexport default ExportMode\n","module.exports = __webpack_public_path__ + \"bare.min.css\";","import React, { Component } from 'react'\n\nimport Grid from '../components/Grid'\nimport GridItem from '../components/GridItem'\n\nclass ModeController extends Component {\n  navigate = (event) => {\n    event.preventDefault()\n    const { mode } = this.props\n    mode.set(event.target.textContent.toUpperCase())\n  }\n\n  render() {\n    const { current } = this.props.mode\n    return (\n      <Grid gridTemplateColumns=\"1fr 1fr 1fr 1fr\" borderBottom=\"1px solid rgb(230, 230, 230)\">\n        <GridItem display=\"grid\" alignItems=\"center\" justifyItems=\"center\">\n          <button\n            type=\"button\"\n            style={{ margin: '0px' }}\n            onClick={this.navigate}\n            {...(current === 'BUILD' ? { primary: 'true' } : {})}\n          >\n            Build\n          </button>\n        </GridItem>\n        <GridItem display=\"grid\" alignItems=\"center\" justifyItems=\"center\">\n          <button\n            type=\"button\"\n            style={{ margin: '0px' }}\n            onClick={this.navigate}\n            {...(current === 'ANIMATE' ? { primary: 'true' } : {})}\n          >\n            Animate\n          </button>\n        </GridItem>\n        <GridItem display=\"grid\" alignItems=\"center\" justifyItems=\"center\">\n          <button\n            type=\"button\"\n            style={{ margin: '0px' }}\n            onClick={this.navigate}\n            {...(current === 'VIEW' ? { primary: 'true' } : {})}\n          >\n            View\n          </button>\n        </GridItem>\n        <GridItem display=\"grid\" alignItems=\"center\" justifyItems=\"center\">\n          <button\n            type=\"button\"\n            style={{ margin: '0px' }}\n            onClick={this.navigate}\n            {...(current === 'EXPORT' ? { primary: 'true' } : {})}\n          >\n            Export\n          </button>\n        </GridItem>\n      </Grid>\n    )\n  }\n}\n\nexport default ModeController\n","import paper from 'paper'\n\nimport Handle from './Handle'\n\nclass HandleEditor {\n  constructor(trueWidth, keyframeBefore, keyframeAfter, onMove) {\n    this.trueWidth = trueWidth\n    this.keyframeBefore = keyframeBefore\n    this.keyframeAfter = keyframeAfter\n    this.onMove = onMove\n    this.paper = new paper.PaperScope()\n\n    this.element = undefined\n  }\n\n  attatchTo = (id) => {\n    const element = document.getElementById(id)\n    this.element = element\n    this.paper.setup(element)\n  }\n\n  destroy() {\n    if (this.paper.project) {\n      this.paper.project.clear()\n      this.paper.project.remove()\n    }\n  }\n\n  init() {\n    // Assumes Width & Height are identical\n    this.padding = 10\n    this.width = this.trueWidth - (this.padding * 2)\n    const { width, padding } = this\n\n    const topLeft = [padding, padding]\n    const topRight = [width + padding, padding]\n    const bottomLeft = [padding, width + padding]\n    // const bottomRight = [width, width + padding]\n    const spacing = width / Handle.STEP\n    const center = this.trueWidth / 2\n\n    // Background\n    new this.paper.Path.Rectangle({\n      topLeft: [0, 0],\n      bottomRight: [this.trueWidth, this.trueWidth],\n      fillColor: 'rgb(210, 210, 210)',\n    })\n\n    // Gridlines\n    const gridline = new this.paper.SymbolDefinition(\n      new this.paper.Path.Line({\n        from: [0, 0],\n        to: [0, this.trueWidth],\n        // strokeColor: '#324252',\n        strokeColor: 'rgb(180, 180, 180)',\n        strokeWidth: 2,\n      })\n    )\n    for (let i = 0; i <= Handle.STEP; i += 1) {\n      const offset = padding + 0 + (spacing * i)\n      gridline.place(new this.paper.Point(offset, center))\n      const offAxis = gridline.place(new this.paper.Point(center, offset))\n      offAxis.rotate(90)\n    }\n\n    // Value Interpolation Curve\n    this.curve = new this.paper.Path.Line({\n      // strokeColor: '#2176ff',\n      strokeColor: 'rgb(30, 155, 255)',\n      strokeWidth: 2,\n      from: new this.paper.Point(bottomLeft),\n      to: new this.paper.Point(topRight),\n    })\n    this.setVisualCurveHandles()\n\n    // Handle Strings\n    const stringStyle = {\n      // strokeColor: '#2176ff',\n      strokeColor: 'rgb(30, 155, 255)',\n      strokeWidth: 2,\n    }\n    const handleBeforeString = new this.paper.Path.Line({\n      ...stringStyle,\n      from: bottomLeft,\n      to: this.handleBefore(),\n    })\n    const handleAfterString = new this.paper.Path.Line({\n      ...stringStyle,\n      from: this.handleAfter(),\n      to: topRight,\n    })\n\n    // Handle Grips\n    const handleMovable = new this.paper.SymbolDefinition(\n      new this.paper.Path.Circle({\n        point: topLeft,\n        radius: 6,\n        // strokeColor: '#2176ff',\n        strokeColor: 'rgb(30, 155, 255)',\n        strokeWidth: 2,\n        fillColor: new this.paper.Color(1, 0.01),\n      })\n    )\n    const handleStationary = new this.paper.SymbolDefinition(\n      new this.paper.Path.Rectangle({\n        point: [100, 100],\n        size: [10, 10],\n        // fillColor: '#2176ff',\n        fillColor: 'rgb(30, 155, 255)',\n      })\n    )\n    handleStationary.place(bottomLeft)\n    handleStationary.place(topRight)\n    const handleBefore = handleMovable.place(this.handleBefore())\n    const handleAfter = handleMovable.place(this.handleAfter())\n\n    // Handle Events\n    handleBefore.onMouseEnter = () => {\n      this.element.style.cursor = 'pointer'\n    }\n    handleBefore.onMouseLeave = () => {\n      this.element.style.cursor = 'default'\n    }\n    handleBefore.onMouseDrag = (event) => {\n      this.element.style.cursor = 'pointer'\n      const travelled = event.point.subtract(handleBefore.position)\n\n      const xChange = Math.abs(travelled.x) >= (spacing / 2)\n      const yChange = Math.abs(travelled.y) >= (spacing / 2)\n      if (xChange || yChange) {\n        const xSign = Math.sign(travelled.x)\n        const ySign = Math.sign(travelled.y)\n        const newPosition = handleBefore.position.add({\n          x: xSign * spacing * xChange,\n          y: ySign * spacing * yChange,\n        })\n\n        handleBefore.position = newPosition\n        handleBeforeString.lastSegment.point = newPosition\n        this.onMove('OUT', {\n          influence: xSign * Handle.STEP * xChange,\n          distance: -1 * ySign * Handle.STEP * yChange,\n        })\n        this.setVisualCurveHandles()\n      }\n    }\n    handleBefore.onMouseUp = () => {\n      this.element.style.cursor = 'default'\n    }\n\n    handleAfter.onMouseEnter = () => {\n      this.element.style.cursor = 'pointer'\n    }\n    handleAfter.onMouseLeave = () => {\n      this.element.style.cursor = 'default'\n    }\n    handleAfter.onMouseDrag = (event) => {\n      this.element.style.cursor = 'pointer'\n      const travelled = event.point.subtract(handleAfter.position)\n\n      const xChange = Math.abs(travelled.x) >= (spacing / 2)\n      const yChange = Math.abs(travelled.y) >= (spacing / 2)\n      if (xChange || yChange) {\n        const xSign = Math.sign(travelled.x)\n        const ySign = Math.sign(travelled.y)\n        const newPosition = handleAfter.position.add({\n          x: xSign * spacing * xChange,\n          y: ySign * spacing * yChange,\n        })\n\n        handleAfter.position = newPosition\n        handleAfterString.firstSegment.point = newPosition\n        this.onMove('IN', {\n          influence: -1 * xSign * Handle.STEP * xChange,\n          distance: ySign * Handle.STEP * yChange,\n        })\n        this.setVisualCurveHandles()\n      }\n    }\n    handleAfter.onMouseUp = () => {\n      this.element.style.cursor = 'default'\n    }\n  }\n\n\n  handleBefore = () => (\n    this.absoluteHandlePosition(this.keyframeBefore.handleOut.position)\n  )\n\n  handleAfter = () => (\n    this.absoluteHandlePosition(this.keyframeAfter.handleIn.position)\n  )\n\n  absoluteHandlePosition(handlePosition) {\n    return ([\n      handlePosition.x * this.width + this.padding,\n      // Compensates for 4th quadrant cartesian system\n      this.width - (handlePosition.y * this.width) + this.padding,\n    ])\n  }\n\n  setVisualCurveHandles() {\n    if (this.curve) {\n      this.curve.firstSegment.handleOut = new this.paper.Point(\n        this.keyframeBefore.handleOut.influence * this.width / Handle.MAX,\n        -1 * this.keyframeBefore.handleOut.distance * this.width / Handle.MAX\n      )\n      this.curve.lastSegment.handleIn = new this.paper.Point(\n        -1 * this.keyframeAfter.handleIn.influence * this.width / Handle.MAX,\n        this.keyframeAfter.handleIn.distance * this.width / Handle.MAX\n      )\n    }\n  }\n}\n\nexport default HandleEditor\n","import React from 'react'\nimport { observer } from 'mobx-react'\n\nimport Canvas from '../components/Canvas'\n\nimport HandleEditorInstance from '../prototypes/HandleEditor'\n\n@observer\nclass HandleEditor extends React.Component {\n  state = {}\n\n  handleEditor\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.keyframeKey !== undefined && prevProps.keyframeKey !== this.props.keyframeKey) {\n      if (this.handleEditor) this.handleEditor.destroy()\n      this.buildHandleEditorCanvas()\n    }\n  }\n\n  handleEditorHasSize = () => {\n    this.buildHandleEditorCanvas()\n  }\n\n  buildHandleEditorCanvas = () => {\n    const { width, keyframeBefore, keyframeAfter, onMove } = this.props\n\n    if (keyframeBefore && keyframeAfter) {\n      this.handleEditor = new HandleEditorInstance(width, keyframeBefore, keyframeAfter, onMove)\n      this.handleEditor.attatchTo('handle-editor')\n      this.handleEditor.init()\n    }\n  }\n\n  render() {\n    const { width, keyframeKey, keyframeBefore, keyframeAfter } = this.props\n\n    if (keyframeKey === undefined) {\n      return (\n        <h3 style={{ padding: '10px', color: 'darkgray' }}>\n          Select a Keyframe on the Timeline.\n        </h3>\n      )\n    }\n\n    if (keyframeBefore && !keyframeAfter) {\n      return (\n        <h3 style={{ padding: '10px', color: 'darkgray' }}>\n          <i>Selected tail Keyframe has no handle relationships.</i>\n        </h3>\n      )\n    }\n\n    return (\n      <div style={{ padding: '10px' }}>\n        <Canvas\n          id=\"handle-editor\"\n          width={width}\n          height={width}\n          hasSize={this.handleEditorHasSize}\n        />\n      </div>\n    )\n  }\n}\n\nexport default HandleEditor\n","import React from 'react'\nimport { observer } from 'mobx-react'\nimport paper from 'paper'\n\nimport Canvas from '../components/Canvas'\n\n@observer\nclass KeyframeEditor extends React.Component {\n  state = {\n    previouslyClickedKeyframe: undefined,\n  }\n\n  paper = new paper.PaperScope()\n  element\n\n  componentDidMount() {\n    document.addEventListener('keyup', this.handleKeyUp)\n  }\n\n  componentDidUpdate(prevProps) {\n    if (\n      prevProps.item !== undefined &&\n      this.props.item !== undefined &&\n      prevProps.item.key !== this.props.item.key\n    ) {\n      this.rebuild()\n    }\n\n    if (prevProps.now !== this.props.now) {\n      this.buildPlayhead()\n    }\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keyup', this.handleKeyUp)\n  }\n\n  keyframeEditorHasSize = () => {\n    this.buildKeyframeEditorCanvas()\n  }\n\n  handleKeyframeClick = (event) => {\n    event.stopPropagation()\n    const { currentTarget } = event\n\n    const { onSelect } = this.props\n    const { previouslyClickedKeyframe } = this.state\n\n    if (previouslyClickedKeyframe) {\n      previouslyClickedKeyframe.strokeWidth = 0\n      previouslyClickedKeyframe.shadowColor.alpha = 0\n    }\n    currentTarget.strokeWidth = 1\n    currentTarget.shadowColor.alpha = 0.3\n    onSelect(currentTarget.name)\n    this.setState({ previouslyClickedKeyframe: currentTarget })\n  }\n\n  handleKeyUp = (event) => {\n    const { key } = event\n    const { item, keyframeKey, keyframe, onSelect } = this.props\n    if (key === 'Backspace' || key === 'Delete') {\n      event.preventDefault()\n\n      const keyframeProp = keyframeKey.split('.')[1]\n      onSelect(undefined)\n      item.removeKey(keyframeProp, keyframe.frame)\n      this.rebuild()\n    }\n  }\n\n  buildKeyframeEditorCanvas = () => {\n    const { item } = this.props\n    this.element = document.getElementById('keyframe-editor')\n    this.paper.setup(this.element)\n\n    const { verticalSpacing, timelineStart, timelineEnd, timelineStep } = this.timelineMath()\n    let placementIndex = 0\n\n    const { playheadLine } = this.buildPlayhead()\n    const newKeyframeItems = []\n\n    Object.entries(item.keyframes).forEach(([prop, list]) => {\n      let propName = prop\n      const placing = placementIndex * verticalSpacing + verticalSpacing\n\n      if (prop === 'y') return // Interpret `x` & `y` at the same time\n      if (prop === 'x') {\n        propName = 'position'\n      }\n\n      // Draw Timelines\n      new this.paper.PointText({\n        point: [0, placing],\n        content: propName,\n        fillColor: 'black',\n        fontSize: 14,\n      })\n      const timelineHover = new this.paper.Path.Line({\n        name: 'timelineHover',\n        from: [timelineStart + 5, placing - 5],\n        to: [timelineEnd, placing - 5],\n        strokeColor: 'rgba(180, 180, 180, 1)',\n        strokeWidth: 40,\n      })\n      const timeline = new this.paper.Path.Line({\n        from: [timelineStart + 5, placing - 5],\n        to: [timelineEnd, placing - 5],\n        strokeColor: 'lightgrey',\n        strokeWidth: 4,\n      })\n\n      const newKeyframeRect = new this.paper.Path.Rectangle({\n        name: 'newKeyframeRect',\n        point: [0, placing - 10],\n        size: [10, 10],\n        radius: 3,\n        fillColor: 'rgba(31, 155, 255, 0.5)',\n        rotation: 45,\n        visible: false,\n      })\n      const newKeyframePlus = new this.paper.PointText({\n        point: [0, placing - 8],\n        content: '+',\n        fillColor: 'rgba(31, 155, 255, 0.5)',\n        fontSize: 14,\n        visible: false,\n      })\n\n      newKeyframeItems.push([timelineHover, newKeyframeRect, newKeyframePlus])\n\n      // TODO: Put these all in a group, including the playheadsegment, and apply one event\n      const newKeyframeHoverEffect = (event) => {\n        newKeyframeRect.visible = true\n        newKeyframePlus.visible = true\n        newKeyframeRect.position.x = event.point.x\n        newKeyframePlus.position.x = event.point.x + 10\n      }\n      const newKeyframeHide = () => {\n        newKeyframeRect.visible = false\n        newKeyframePlus.visible = false\n      }\n      const newKeyClick = (event) => {\n        const frame = Math.round((event.point.x - timelineStart) / timelineStep)\n        item.addKey(prop, frame)\n        // console.log(frame)\n        this.rebuild()\n      }\n\n      timelineHover.onMouseMove = newKeyframeHoverEffect\n      timelineHover.onMouseLeave = newKeyframeHide\n      timeline.onMouseMove = newKeyframeHoverEffect\n      timeline.onMouseLeave = newKeyframeHide\n\n      newKeyframeRect.onMouseMove = (event) => {\n        if (timelineHover.hitTest(event.point, { stroke: true, segments: false })) {\n          newKeyframeHoverEffect(event)\n        } else {\n          newKeyframeHide()\n        }\n      }\n\n      timelineHover.onClick = newKeyClick\n      timeline.onClick = newKeyClick\n      newKeyframeRect.onClick = newKeyClick\n\n      // Draw Keyframes\n      list.forEach((keyframe, keyframeIndex) => {\n        const keyframeRect = new this.paper.Path.Rectangle({\n          name: `${item.key}.${prop}.${keyframeIndex}`,\n          point: [timelineStart + keyframe.frame * timelineStep - 5, placing - 10],\n          size: [10, 10],\n          radius: 3,\n          fillColor: 'rgb(30, 155, 255)',\n          rotation: 45,\n          strokeColor: 'white',\n          strokeWidth: 0,\n          shadowColor: 'rgba(0, 0, 0, 0)',\n          shadowBlur: 5,\n        })\n\n        keyframeRect.on('mousedown', this.handleKeyframeClick)\n        keyframeRect.onMouseEnter = () => {\n          this.element.style.cursor = 'pointer'\n          newKeyframeHide()\n        }\n        keyframeRect.onMouseLeave = () => {\n          this.element.style.cursor = 'default'\n        }\n      })\n\n      placementIndex += 1\n    })\n\n    playheadLine.onMouseMove = (event) => {\n      newKeyframeItems.forEach(([\n        timelineHover,\n        newKeyframeRect,\n        newKeyframePlus,\n      ]) => {\n        if (timelineHover.hitTest(event.point)) {\n          /* eslint-disable no-param-reassign */\n          newKeyframeRect.visible = true\n          newKeyframePlus.visible = true\n          newKeyframeRect.position.x = event.point.x\n          newKeyframePlus.position.x = event.point.x + 10\n        } else {\n          newKeyframeRect.visible = false\n          newKeyframePlus.visible = false\n        }\n      })\n    }\n    playheadLine.bringToFront()\n  }\n\n  rebuild() {\n    this.paper.project.clear()\n    this.paper.project.remove()\n    this.buildKeyframeEditorCanvas()\n  }\n\n  buildPlayhead() {\n    const { size, now } = this.props\n    const { timelineStart, timelineStep } = this.timelineMath()\n    const playheadLine = new this.paper.Path.Line({\n      from: [timelineStart + now * timelineStep, 10],\n      to: [timelineStart + now * timelineStep, size.height - 10],\n      strokeColor: 'white',\n      strokeWidth: 1,\n    })\n    const playheadTriangle = new this.paper.Path.RegularPolygon({\n      center: [timelineStart + now * timelineStep, 10],\n      sides: 3,\n      radius: 6,\n      rotation: 180,\n      fillColor: 'white',\n    })\n    return { playheadLine, playheadTriangle }\n  }\n\n  timelineMath() {\n    const { size, frames } = this.props\n    const verticalSpacing = 40\n    const timelineStart = 80\n    const timelineEnd = size.width - verticalSpacing\n    const timelineWidth = timelineEnd - timelineStart\n    const timelineStep = timelineWidth / frames\n    return {\n      verticalSpacing,\n      timelineStart,\n      timelineEnd,\n      timelineWidth,\n      timelineStep,\n    }\n  }\n\n  render() {\n    const { size, item } = this.props\n\n    if (size === undefined || item === undefined) {\n      return (\n        <h3 style={{ padding: '10px', color: 'grey' }}>\n          Select an Item to view its Keyframes.\n        </h3>\n      )\n    }\n\n    return (\n      <div style={{ padding: '10px' }}>\n        <Canvas\n          id=\"keyframe-editor\"\n          width={size.width}\n          height={size.height}\n          hasSize={this.keyframeEditorHasSize}\n        />\n      </div>\n    )\n  }\n}\n\nexport default KeyframeEditor\n","import React, { Component } from 'react'\nimport { autorun } from 'mobx'\nimport { observer } from 'mobx-react'\n\nimport Viewer from './Viewer'\nimport HandleEditor from './HandleEditor'\nimport KeyframeEditor from './KeyframeEditor'\nimport Grid from '../components/Grid'\nimport GridItem from '../components/GridItem'\n\nimport { titleCase } from '../util/string'\n\n@observer\nclass AnimateMode extends Component {\n  state = {\n    heWidth: undefined,\n    keSize: undefined,\n    selectedItemKey: undefined,\n  }\n\n  autorunDisposer\n\n  componentDidMount() {\n    const { canvas } = this.props.store\n    const container = document.getElementById('view-container')\n    setTimeout(() => {\n      const width = Math.round(container.clientWidth) - 20\n      const height = Math.round((9 / 16) * width)\n      canvas.setSize(width, height)\n    }, 1)\n\n    const container2 = document.getElementById('handle-container')\n    setTimeout(() => {\n      const width = Math.round(container2.clientWidth) - 20\n      const height = Math.round(container2.clientHeight) - 20\n      const smallestLength = Math.min(width, height)\n      this.setState({ heWidth: smallestLength })\n    }, 1)\n\n    const container3 = document.getElementById('keyframe-container')\n    setTimeout(() => {\n      const width = Math.round(container3.clientWidth) - 20\n      const height = Math.round(container3.clientHeight) - 20\n      this.setState({ keSize: { width, height } })\n    }, 1)\n\n    this.autorunDisposer = autorun(() => {\n      if (canvas.selected) {\n        this.setState({ selectedItemKey: canvas.selected.key })\n      } else {\n        this.setState({ selectedItemKey: undefined })\n      }\n    })\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { tools } = this.props.store\n    if (prevState.selectedItemKey !== this.state.selectedItemKey) {\n      tools.selectKeyframe(undefined)\n    }\n  }\n\n  componentWillUnmount() {\n    const { canvas, project, tools } = this.props.store\n    canvas.selectOff()\n    project.clear()\n    tools.selectKeyframe(undefined)\n    this.autorunDisposer()\n  }\n\n  onSetup = () => {\n    const { canvas } = this.props.store\n    canvas.build()\n    setTimeout(() => {\n      canvas.setTool(undefined)\n      canvas.setTool('SELECT')\n    }, 20)\n  }\n\n  changeHandlePosition = (handleType, { influence, distance }) => {\n    const { tools, canvas } = this.props.store\n    if (!tools.selectedKeyframe) return\n\n    const handleSuffix = titleCase(handleType)\n    const [kItem, kProp, kIndexStr] = tools.selectedKeyframe.split('.')\n    let kIndex = parseInt(kIndexStr)\n    if (handleType === 'IN') {\n      kIndex += 1\n    }\n\n    const targetHandle = canvas.animatables[kItem].keyframes[kProp][kIndex][`handle${handleSuffix}`]\n    let auxilaryHandle\n    if (kProp === 'x') {\n      auxilaryHandle = canvas.animatables[kItem].keyframes.y[kIndex][`handle${handleSuffix}`]\n    }\n\n    targetHandle.influence += influence\n    targetHandle.distance += distance\n\n    if (auxilaryHandle) {\n      auxilaryHandle.influence += influence\n      auxilaryHandle.distance += distance\n    }\n  }\n\n  render() {\n    const { canvas, animation, tools } = this.props.store\n    const { heWidth, keSize } = this.state\n\n    let keyframeBefore\n    let keyframeAfter\n    if (tools.selectedKeyframe) {\n      const [kItem, kProp, kIndexStr] = tools.selectedKeyframe.split('.')\n      const kIndex = parseInt(kIndexStr)\n      const keyframesOfType = canvas.animatables[kItem].keyframes[kProp]\n      keyframeBefore = keyframesOfType[kIndex]\n      if (kIndex + 1 < keyframesOfType.length) {\n        keyframeAfter = keyframesOfType[kIndex + 1]\n      }\n    }\n\n    return (\n      <Grid\n        gridTemplateRows=\"auto 340px\"\n        gridTemplateColumns=\"auto 400px\"\n      >\n        <GridItem id=\"view-container\" padding=\"10px\" gridArea=\"1 / 1 / 1 / 2\">\n          <Viewer canvas={canvas} animation={animation} onSetup={this.onSetup} />\n        </GridItem>\n        <GridItem id=\"handle-container\" gridArea=\"1 / 2 / 1 / 3\" backgroundColor=\"rgb(210, 210, 210)\">\n          <HandleEditor\n            width={heWidth}\n            keyframeKey={tools.selectedKeyframe}\n            keyframeBefore={keyframeBefore}\n            keyframeAfter={keyframeAfter}\n            onMove={this.changeHandlePosition}\n          />\n        </GridItem>\n        <GridItem id=\"keyframe-container\" gridArea=\"2 / 1 / 2 / 3\" backgroundColor=\"rgb(180, 180, 180)\">\n          <KeyframeEditor\n            size={keSize}\n            item={canvas.selected}\n            keyframeKey={tools.selectedKeyframe}\n            keyframe={keyframeBefore}\n            onSelect={tools.selectKeyframe}\n            frames={animation.frames}\n            now={animation.now}\n          />\n        </GridItem>\n      </Grid>\n    )\n  }\n}\n\nexport default AnimateMode\n","const titleCase = (str) => {\n  /* Convert `any string` into `Any String`, including replacing underscores\n    with spaces */\n  const splitStr = str.toLowerCase().split(/[\\s_]+/)\n  for (let i = 0; i < splitStr.length; i += 1) {\n    splitStr[i] = splitStr[i].charAt(0).toUpperCase() + splitStr[i].substring(1)\n  }\n  return splitStr.join(' ')\n}\n\nexport {\n  titleCase,\n}\n","import React, { Component } from 'react'\nimport { observer } from 'mobx-react'\n\nimport Grid from '../components/Grid'\nimport GridItem from '../components/GridItem'\n\n@observer\nclass PlayController extends Component {\n  componentDidMount() {\n    document.addEventListener('keydown', this.handleKeyDown, false)\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleKeyDown, false)\n  }\n\n  handleKeyDown = (event) => {\n    const {\n      play,\n      pause,\n      goToNext,\n      goToPrev,\n      goToFirst,\n      goToLast,\n      playing,\n    } = this.props.animation\n    const { key, shiftKey } = event\n\n    if (key === 'ArrowLeft' && shiftKey) {\n      goToFirst()\n    } else if (key === 'ArrowLeft') {\n      goToPrev()\n    } else if (key === 'ArrowRight' && shiftKey) {\n      goToLast()\n    } else if (key === 'ArrowRight') {\n      goToNext()\n    } else if (key === ' ') {\n      event.stopPropagation()\n      event.preventDefault()\n      if (playing === true) {\n        pause()\n      } else {\n        play()\n      }\n    }\n  }\n\n  render() {\n    const {\n      play,\n      pause,\n      goToNext,\n      goToPrev,\n      goToFirst,\n      goToLast,\n      playing,\n    } = this.props.animation\n\n    return (\n      <Grid gridTemplateColumns=\"30% 1fr 1fr 1fr 1fr 1fr 30%\" height=\"60px\" alignItems=\"center\" justifyItems=\"center\" borderTop=\"1px solid rgb(230, 230, 230)\">\n        <GridItem gridColumnStart=\"2\">\n          <button type=\"button\" style={{ margin: 0 }} onClick={goToFirst}>&#8676;</button>\n        </GridItem>\n        <GridItem gridColumnStart=\"3\">\n          <button type=\"button\" style={{ margin: 0 }} onClick={goToPrev}>&#9667;</button>\n        </GridItem>\n        <GridItem gridColumnStart=\"4\">\n          { playing === false ?\n            <button type=\"button\" style={{ margin: 0 }} onClick={play}>&#9658;</button> :\n            <button type=\"button\" style={{ margin: 0 }} onClick={pause}>&#10073; &#10073;</button>\n          }\n        </GridItem>\n        <GridItem gridColumnStart=\"5\">\n          <button type=\"button\" style={{ margin: 0 }} onClick={goToNext}>\n            <div style={{ transform: 'rotate(180deg)' }}>&#9667;</div>\n          </button>\n        </GridItem>\n        <GridItem gridColumnStart=\"6\">\n          <button type=\"button\" style={{ margin: 0 }} onClick={goToLast}>&#8677;</button>\n        </GridItem>\n      </Grid>\n    )\n  }\n}\n\nexport default PlayController\n","import React from 'react'\n\nconst getWidth = () => (\n  window.innerWidth\n    || document.documentElement.clientWidth\n    || document.body.clientWidth\n)\n\nconst getHeight = () => (\n  window.innerHeight\n    || document.documentElement.clientHeight\n    || document.body.clientHeight\n)\n\nconst withWindowSize = Component => (\n  class extends React.Component {\n    state = {\n      width: getWidth(),\n      height: getHeight(),\n    }\n\n    componentDidMount() {\n      window.addEventListener('resize', this.updateDimensions)\n    }\n\n    componentWillUnmount() {\n      window.removeEventListener('resize', this.updateDimensions)\n    }\n\n    updateDimensions = () => {\n      const width = getWidth()\n      const height = getHeight()\n      this.setState({ width, height })\n    }\n\n    render() {\n      const { width, height } = this.state\n      return <Component width={width} height={height} {...this.props} />\n    }\n  }\n)\n\nexport default withWindowSize\nexport {\n  getWidth,\n  getHeight,\n}\n","import React, { Component } from 'react'\nimport { observer } from 'mobx-react'\n\nimport Viewer from './Viewer'\nimport PlayController from './PlayController'\nimport Grid from '../components/Grid'\nimport GridItem from '../components/GridItem'\nimport { getWidth } from '../components/withWindowSize'\n\n@observer\nclass ViewMode extends Component {\n  componentDidMount() {\n    const { canvas } = this.props.store\n    const width = getWidth() - 20\n    const height = Math.round((9 / 16) * width)\n    canvas.setSize(width, height)\n  }\n\n  componentWillUnmount() {\n    const { project } = this.props.store\n    project.clear()\n  }\n\n  onSetup = () => {\n    const { canvas } = this.props.store\n    canvas.build()\n  }\n\n  render() {\n    const { canvas, animation } = this.props.store\n    return (\n      <Grid\n        gridTemplateRows=\"auto 60px\"\n        alignItems=\"center\"\n      >\n        <GridItem padding=\"10px\">\n          <Viewer canvas={canvas} animation={animation} onSetup={this.onSetup} />\n        </GridItem>\n        <PlayController animation={animation} />\n      </Grid>\n    )\n  }\n}\n\nexport default ViewMode\n","var map = {\n\t\"./bare.min.css\": \"v4a6\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"zGb5\";"],"sourceRoot":""}